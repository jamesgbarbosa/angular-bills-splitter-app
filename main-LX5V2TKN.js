import{$ as at,$a as Ou,$b as t_,A as Au,Aa as g,Ab as T,B as bg,Ba as w,Bb as Ct,C as bn,Ca as fa,Cb as ke,D as Tg,Da as ct,Db as Yg,E as Ag,Ea as jg,Eb as mt,F as Zn,Fa as Bi,Fb as pe,G as le,Ga as rn,Gb as on,H as Cu,Ha as Ug,Hb as ri,I as Tn,Ia as Bg,Ib as Fu,J as tn,Ja as $i,Jb as si,K as Su,Ka as Sn,Kb as ds,L as He,La as $g,Lb as Ea,M as Cg,Ma as sn,Mb as wa,N as Sg,Na as lt,Nb as Ia,O as Rg,Oa as Ae,Ob as Vu,P as ji,Pa as ls,Pb as Lu,Q as Dg,Qa as us,Qb as fs,R as Ui,Ra as P,Rb as ba,S as An,Sa as b,Sb as ps,T as Ru,Ta as pa,Tb as Qg,U as Du,Ua as hs,Ub as Xg,V as Pg,Va as zg,Vb as Hi,W as xg,Wa as ma,Wb as Jg,X as Og,Xa as ga,Xb as Zg,Y as as,Ya as zi,Yb as H,Z as kg,Za as qg,Zb as e_,_ as Cn,_a,_b as ju,a as m,aa as ei,ab as ni,ac as n_,b as D,ba as de,bb as ku,bc as an,ca as Ng,cb as z,cc as i_,d as Ob,da as se,db as Gg,dc as r_,e as p,ea as we,eb as qi,ec as gt,f as Xn,fa as Pu,fb as Ce,fc as _t,g as vu,ga as cs,gb as Wg,gc as s_,h as nt,ha as it,hb as Nu,hc as o_,i as Eu,ia as fe,ib as Hg,ic as Be,j as wu,ja as ue,jb as Y,jc as a_,k as J,ka as oe,kb as ii,kc as c_,l as Oe,la as Mg,lb as F,lc as Uu,m as wg,ma as Ie,mb as Gi,mc as l_,n as ua,na as be,nb as E,nc as u_,o as Jn,oa as De,ob as _,p as Iu,pa as Fg,pb as Ue,q as ss,qa as S,qb as Mt,r as bu,ra as he,rb as Ft,s as je,sa as Vg,sb as Ze,t as N,ta as I,tb as Kg,u as os,ua as da,ub as Q,v as Tu,va as Lg,vb as W,w as Ig,wa as At,wb as Mu,x as U,xa as ti,xb as ya,y as ha,ya as xu,yb as va,z as We,za as nn,zb as Wi}from"./chunk-FM23VEO3.js";var $u=class{};var Ki=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var zu=class{encodeKey(e){return h_(e)}encodeValue(e){return h_(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function kb(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var Nb=/%(\d[a-f0-9])/gi,Mb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function h_(t){return encodeURIComponent(t).replace(Nb,(e,n)=>Mb[n]??e)}function Ta(t){return`${t}`}var Rn=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new zu,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=kb(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(Ta):[Ta(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ta(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Ta(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var qu=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Fb(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function d_(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function f_(t){return typeof Blob<"u"&&t instanceof Blob}function p_(t){return typeof FormData<"u"&&t instanceof FormData}function Vb(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ms=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Fb(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ki,this.context??=new qu,!this.params)this.params=new Rn,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:d_(this.body)||f_(this.body)||p_(this.body)||Vb(this.body)||typeof this.body=="string"?this.body:this.body instanceof Rn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||p_(this.body)?null:f_(this.body)?this.body.type||null:d_(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Rn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,d)=>h.set(d,e.setHeaders[d]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,d)=>h.set(d,e.setParams[d]),l)),new t(n,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}},m_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(m_||{}),Gu=class{constructor(e,n=g_.Ok,i="OK"){this.headers=e.headers||new Ki,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Wu=class t extends Gu{constructor(e={}){super(e),this.type=m_.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var g_=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(g_||{});function Bu(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var __=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof ms)o=i;else{let l;s.headers instanceof Ki?l=s.headers:l=new Ki(s.headers);let u;s.params&&(s.params instanceof Rn?u=s.params:u=new Rn({fromObject:s.params})),o=new ms(i,r,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=N(o).pipe(tn(l=>this.handler.handle(l)));if(i instanceof ms||s.observe==="events")return a;let c=a.pipe(le(l=>l instanceof Wu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(U(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(U(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(U(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(U(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Rn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,Bu(s,r))}post(i,r,s={}){return this.request("POST",i,Bu(s,r))}put(i,r,s={}){return this.request("PUT",i,Bu(s,r))}};e.\u0275fac=function(r){return new(r||e)(g($u))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();var Yu=class extends Zg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qu=class t extends Yu{static makeCurrent(){Jg(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Lb();return n==null?null:jb(n)}resetBaseElement(){gs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return i_(document.cookie,e)}},gs=null;function Lb(){return gs=gs||document.querySelector("base"),gs?gs.getAttribute("href"):null}function jb(t){return new URL(t,document.baseURI).pathname}var Ub=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Xu=new I(""),E_=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(g(Xu),g(z))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Aa=class{constructor(e){this._doc=e}},Hu="ng-app-id",w_=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Uu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Hu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Hu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Hu,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(g(H),g(da),g(xu,8),g(At))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Ku={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zu=/%COMP%/g,I_="%COMP%",Bb=`_nghost-${I_}`,$b=`_ngcontent-${I_}`,zb=!0,qb=new I("",{providedIn:"root",factory:()=>zb});function Gb(t){return $b.replace(Zu,t)}function Wb(t){return Bb.replace(Zu,t)}function b_(t,e){return e.map(n=>n.replace(Zu,t))}var Ca=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Uu(c),this.defaultRenderer=new _s(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cs.ShadowDom&&(r=D(m({},r),{encapsulation:cs.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Sa?s.applyToHost(i):s instanceof ys&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case cs.Emulated:o=new Sa(l,u,r,this.appId,h,a,c,d);break;case cs.ShadowDom:return new Ju(l,u,i,r,a,c,this.nonce,d);default:o=new ys(l,u,r,h,a,c,d);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(g(E_),g(w_),g(da),g(qb),g(H),g(At),g(z),g(xu))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),_s=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ku[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(y_(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(y_(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new se(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=Ku[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Ku[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(us.DashCase|us.Important)?e.style.setProperty(n,i,r&us.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&us.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Hi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function y_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ju=class extends _s{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=b_(r.id,r.styles);for(let u of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ys=class extends _s{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?b_(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Sa=class extends ys{constructor(e,n,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=Gb(l),this.hostAttr=Wb(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},Hb=(()=>{let e=class e extends Aa{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(g(H))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),v_=["alt","control","meta","shift"],Kb={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yb={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Qb=(()=>{let e=class e extends Aa{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hi().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),v_.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=Kb[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),v_.forEach(a=>{if(a!==s){let c=Yb[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(g(H))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function T_(t,e){return Qg(m({rootComponent:t},Xb(e)))}function Xb(t){return{appProviders:[...nT,...t?.providers??[]],platformProviders:tT}}function Jb(){Qu.makeCurrent()}function Zb(){return new ls}function eT(){return Fg(document),document}var tT=[{provide:At,useValue:a_},{provide:Lg,useValue:Jb,multi:!0},{provide:H,useFactory:eT,deps:[]}];var nT=[{provide:Bg,useValue:"root"},{provide:ls,useFactory:Zb,deps:[]},{provide:Xu,useClass:Hb,multi:!0,deps:[H,z,At]},{provide:Xu,useClass:Qb,multi:!0,deps:[H]},Ca,w_,E_,{provide:ga,useExisting:Ca},{provide:u_,useClass:Ub,deps:[]},[]];var A_=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(g(H))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $="primary",Ns=Symbol("RouteTitle"),rh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Zi(t){return new rh(t)}function rT(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function sT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Vt(t[n],e[n]))return!1;return!0}function Vt(t,e){let n=t?sh(t):void 0,i=e?sh(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!N_(t[r],e[r]))return!1;return!0}function sh(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function N_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function M_(t){return t.length>0?t[t.length-1]:null}function On(t){return Tu(t)?t:Ia(t)?je(Promise.resolve(t)):N(t)}var oT={exact:V_,subset:L_},F_={exact:aT,subset:cT,ignored:()=>!0};function C_(t,e,n){return oT[n.paths](t.root,e.root,n.matrixParams)&&F_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function aT(t,e){return Vt(t,e)}function V_(t,e,n){if(!ai(t.segments,e.segments)||!Pa(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!V_(t.children[i],e.children[i],n))return!1;return!0}function cT(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>N_(t[n],e[n]))}function L_(t,e,n){return j_(t,e,e.segments,n)}function j_(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!ai(r,n)||e.hasChildren()||!Pa(r,n,i))}else if(t.segments.length===n.length){if(!ai(t.segments,n)||!Pa(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!L_(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!ai(t.segments,r)||!Pa(t.segments,r,i)||!t.children[$]?!1:j_(t.children[$],e,s,i)}}function Pa(t,e,n){return e.every((i,r)=>F_[n](t[r].parameters,i.parameters))}var Dn=class{constructor(e=new ee([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Zi(this.queryParams),this._queryParamMap}toString(){return hT.serialize(this)}},ee=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xa(this)}},oi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Zi(this.parameters),this._parameterMap}toString(){return B_(this)}};function lT(t,e){return ai(t,e)&&t.every((n,i)=>Vt(n.parameters,e[i].parameters))}function ai(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function uT(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===$&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==$&&(n=n.concat(e(r,i)))}),n}var Ms=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:()=>new As,providedIn:"root"});let t=e;return t})(),As=class{parse(e){let n=new ah(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${vs(e.root,!0)}`,i=pT(e.queryParams),r=typeof e.fragment=="string"?`#${dT(e.fragment)}`:"";return`${n}${i}${r}`}},hT=new As;function xa(t){return t.segments.map(e=>B_(e)).join("/")}function vs(t,e){if(!t.hasChildren())return xa(t);if(e){let n=t.children[$]?vs(t.children[$],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==$&&i.push(`${r}:${vs(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=uT(t,(i,r)=>r===$?[vs(t.children[$],!1)]:[`${r}:${vs(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[$]!=null?`${xa(t)}/${n[0]}`:`${xa(t)}/(${n.join("//")})`}}function U_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ra(t){return U_(t).replace(/%3B/gi,";")}function dT(t){return encodeURI(t)}function oh(t){return U_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oa(t){return decodeURIComponent(t)}function S_(t){return Oa(t.replace(/\+/g,"%20"))}function B_(t){return`${oh(t.path)}${fT(t.parameters)}`}function fT(t){return Object.entries(t).map(([e,n])=>`;${oh(e)}=${oh(n)}`).join("")}function pT(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Ra(n)}=${Ra(r)}`).join("&"):`${Ra(n)}=${Ra(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var mT=/^[^\/()?;#]+/;function eh(t){let e=t.match(mT);return e?e[0]:""}var gT=/^[^\/()?;=#]+/;function _T(t){let e=t.match(gT);return e?e[0]:""}var yT=/^[^=?&#]+/;function vT(t){let e=t.match(yT);return e?e[0]:""}var ET=/^[^&#]+/;function wT(t){let e=t.match(ET);return e?e[0]:""}var ah=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[$]=new ee(e,n)),i}parseSegment(){let e=eh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new oi(Oa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=_T(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=eh(this.remaining);r&&(i=r,this.capture(i))}e[Oa(n)]=Oa(i)}parseQueryParam(e){let n=vT(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=wT(this.remaining);o&&(i=o,this.capture(i))}let r=S_(n),s=S_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=eh(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new se(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=$);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[$]:new ee([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function $_(t){return t.segments.length>0?new ee([],{[$]:t}):t}function z_(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=z_(r);if(i===$&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new ee(t.segments,e);return IT(n)}function IT(t){if(t.numberOfChildren===1&&t.children[$]){let e=t.children[$];return new ee(t.segments.concat(e.segments),e.children)}return t}function er(t){return t instanceof Dn}function bT(t,e,n=null,i=null){let r=q_(t);return G_(r,e,n,i)}function q_(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new ee(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=$_(i);return e??r}function G_(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return th(r,r,r,n,i);let s=TT(e);if(s.toRoot())return th(r,r,new ee([],{}),n,i);let o=AT(s,r,t),a=o.processChildren?Is(o.segmentGroup,o.index,s.commands):H_(o.segmentGroup,o.index,s.commands);return th(r,o.segmentGroup,a,n,i)}function ka(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Cs(t){return typeof t=="object"&&t!=null&&t.outlets}function th(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=W_(t,e,n);let a=$_(z_(o));return new Dn(a,s,r)}function W_(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=W_(s,e,n)}),new ee(t.segments,i)}var Na=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&ka(i[0]))throw new se(4003,!1);let r=i.find(Cs);if(r&&r!==M_(i))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function TT(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Na(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Na(n,e,i)}var Xi=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function AT(t,e,n){if(t.isAbsolute)return new Xi(e,!0,0);if(!n)return new Xi(e,!1,NaN);if(n.parent===null)return new Xi(n,!0,0);let i=ka(t.commands[0])?0:1,r=n.segments.length-1+i;return CT(n,r,t.numberOfDoubleDots)}function CT(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new se(4005,!1);r=i.segments.length}return new Xi(i,!1,r-s)}function ST(t){return Cs(t[0])?t[0].outlets:{[$]:t}}function H_(t,e,n){if(t??=new ee([],{}),t.segments.length===0&&t.hasChildren())return Is(t,e,n);let i=RT(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new ee(t.segments.slice(0,i.pathIndex),{});return s.children[$]=new ee(t.segments.slice(i.pathIndex),t.children),Is(s,0,r)}else return i.match&&r.length===0?new ee(t.segments,{}):i.match&&!t.hasChildren()?ch(t,e,n):i.match?Is(t,0,r):ch(t,e,n)}function Is(t,e,n){if(n.length===0)return new ee(t.segments,{});{let i=ST(n),r={};if(Object.keys(i).some(s=>s!==$)&&t.children[$]&&t.numberOfChildren===1&&t.children[$].segments.length===0){let s=Is(t.children[$],e,n);return new ee(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=H_(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new ee(t.segments,r)}}function RT(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(Cs(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!D_(c,l,o))return s;i+=2}else{if(!D_(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function ch(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(Cs(s)){let c=DT(s.outlets);return new ee(i,c)}if(r===0&&ka(n[0])){let c=t.segments[e];i.push(new oi(c.path,R_(n[0]))),r++;continue}let o=Cs(s)?s.outlets[$]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&ka(a)?(i.push(new oi(o,R_(a))),r+=2):(i.push(new oi(o,{})),r++)}return new ee(i,{})}function DT(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=ch(new ee([],{}),0,i))}),e}function R_(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function D_(t,e,n){return t==n.path&&Vt(e,n.parameters)}var bs="imperative",Ne=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ne||{}),vt=class{constructor(e,n){this.id=e,this.url=n}},tr=class extends vt{constructor(e,n,i="imperative",r=null){super(e,n),this.type=Ne.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cn=class extends vt{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=Ne.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(yt||{}),Ma=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ma||{}),Pn=class extends vt{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Ne.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xn=class extends vt{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Ne.NavigationSkipped}},Ss=class extends vt{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=Ne.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fa=class extends vt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Ne.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lh=class extends vt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Ne.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uh=class extends vt{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Ne.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hh=class extends vt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Ne.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dh=class extends vt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Ne.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fh=class{constructor(e){this.route=e,this.type=Ne.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ph=class{constructor(e){this.route=e,this.type=Ne.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mh=class{constructor(e){this.snapshot=e,this.type=Ne.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gh=class{constructor(e){this.snapshot=e,this.type=Ne.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_h=class{constructor(e){this.snapshot=e,this.type=Ne.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yh=class{constructor(e){this.snapshot=e,this.type=Ne.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Va=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=Ne.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Rs=class{},Ds=class{constructor(e){this.url=e}};var vh=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Fs,this.attachRef=null}},Fs=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new vh,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),La=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Eh(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Eh(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wh(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return wh(e,this._root).map(n=>n.value)}};function Eh(t,e){if(t===e.value)return e;for(let n of e.children){let i=Eh(t,n);if(i)return i}return null}function wh(t,e){if(t===e.value)return[e];for(let n of e.children){let i=wh(t,n);if(i.length)return i.unshift(e),i}return[]}var ut=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Qi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ja=class extends La{constructor(e,n){super(e),this.snapshot=n,kh(this,e)}toString(){return this.snapshot.toString()}};function K_(t){let e=PT(t),n=new Oe([new oi("",{})]),i=new Oe({}),r=new Oe({}),s=new Oe({}),o=new Oe(""),a=new ln(n,i,s,o,r,$,t,e.root);return a.snapshot=e.root,new ja(new ut(a,[]),e)}function PT(t){let e={},n={},i={},r="",s=new Ps([],e,i,r,n,$,t,null,{});return new Ua("",new ut(s,[]))}var ln=class{constructor(e,n,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(U(l=>l[Ns]))??N(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(e=>Zi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(e=>Zi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Oh(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:m(m({},e.params),t.params),data:m(m({},e.data),t.data),resolve:m(m(m(m({},t.data),e.data),r?.data),t._resolvedData)}:i={params:m({},t.params),data:m({},t.data),resolve:m(m({},t.data),t._resolvedData??{})},r&&Q_(r)&&(i.resolve[Ns]=r.title),i}var Ps=class{get title(){return this.data?.[Ns]}constructor(e,n,i,r,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ua=class extends La{constructor(e,n){super(n),this.url=e,kh(this,n)}toString(){return Y_(this._root)}};function kh(t,e){e.value._routerState=t,e.children.forEach(n=>kh(t,n))}function Y_(t){let e=t.children.length>0?` { ${t.children.map(Y_).join(", ")} } `:"";return`${t.value}${e}`}function nh(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Vt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Vt(e.params,n.params)||t.paramsSubject.next(n.params),sT(e.url,n.url)||t.urlSubject.next(n.url),Vt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ih(t,e){let n=Vt(t.params,e.params)&&lT(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Ih(t.parent,e.parent))}function Q_(t){return typeof t.title=="string"||t.title===null}var Nh=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=$,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=w(Fs),this.location=w(qi),this.changeDetector=w(ni),this.environmentInjector=w($i),this.inputBinder=w(qa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new bh(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=oe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sn]});let t=e;return t})(),bh=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===ln?this.route:e===Fs?this.childContexts:this.parent.get(e,n)}},qa=new I(""),P_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=ha([r.queryParams,r.params,r.data]).pipe(at(([o,a,c],l)=>(c=m(m(m({},o),a),c),l===0?N(c):Promise.resolve(c)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=Xg(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function xT(t,e,n){let i=xs(t,e._root,n?n._root:void 0);return new ja(i,e)}function xs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=OT(t,e,n);return new ut(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xs(t,a)),o}}let i=kT(e.value),r=e.children.map(s=>xs(t,s));return new ut(i,r)}}function OT(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return xs(t,i,r);return xs(t,i)})}function kT(t){return new ln(new Oe(t.url),new Oe(t.params),new Oe(t.queryParams),new Oe(t.fragment),new Oe(t.data),t.outlet,t.component,t)}var X_="ngNavigationCancelingError";function J_(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=er(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Z_(!1,yt.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function Z_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[X_]=!0,n.cancellationCode=e,n}function NT(t){return ey(t)&&er(t.url)}function ey(t){return!!t&&t[X_]}var MT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["ng-component"]],standalone:!0,features:[pe],decls:1,vars:0,template:function(r,s){r&1&&Ue(0,"router-outlet")},dependencies:[Nh],encapsulation:2});let t=e;return t})();function FT(t,e){return t.providers&&!t._injector&&(t._injector=Nu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Mh(t){let e=t.children&&t.children.map(Mh),n=e?D(m({},t),{children:e}):m({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$&&(n.component=MT),n}function Lt(t){return t.outlet||$}function VT(t,e){let n=t.filter(i=>Lt(i)===e);return n.push(...t.filter(i=>Lt(i)!==e)),n}function Vs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var LT=(t,e,n,i)=>U(r=>(new Th(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Th=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),nh(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Qi(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Qi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Qi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Qi(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new yh(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gh(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(nh(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nh(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Vs(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},Ba=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ji=class{constructor(e,n){this.component=e,this.route=n}};function jT(t,e,n){let i=t._root,r=e?e._root:null;return Es(i,r,n,[i.value])}function UT(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ir(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!Vg(t)?t:e.get(t):i}function Es(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Qi(e);return t.children.forEach(o=>{BT(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ts(a,n.getContext(o),r)),r}function BT(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=$T(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Ba(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Es(t,e,a?a.children:null,i,r):Es(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ji(a.outlet.component,o))}else o&&Ts(e,a,r),r.canActivateChecks.push(new Ba(i)),s.component?Es(t,null,a?a.children:null,i,r):Es(t,null,n,i,r);return r}function $T(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ai(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ai(t.url,e.url)||!Vt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ih(t,e)||!Vt(t.queryParams,e.queryParams);case"paramsChange":default:return!Ih(t,e)}}function Ts(t,e,n){let i=Qi(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Ts(o,e.children.getContext(s),n):Ts(o,null,n):Ts(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ji(e.outlet.component,r)):n.canDeactivateChecks.push(new Ji(null,r)):n.canDeactivateChecks.push(new Ji(null,r))}function Ls(t){return typeof t=="function"}function zT(t){return typeof t=="boolean"}function qT(t){return t&&Ls(t.canLoad)}function GT(t){return t&&Ls(t.canActivate)}function WT(t){return t&&Ls(t.canActivateChild)}function HT(t){return t&&Ls(t.canDeactivate)}function KT(t){return t&&Ls(t.canMatch)}function ty(t){return t instanceof Ig||t?.name==="EmptyError"}var Da=Symbol("INITIAL_VALUE");function nr(){return at(t=>ha(t.map(e=>e.pipe(He(1),Cn(Da)))).pipe(U(e=>{for(let n of e)if(n!==!0){if(n===Da)return Da;if(n===!1||n instanceof Dn)return n}return!0}),le(e=>e!==Da),He(1)))}function YT(t,e){return We(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?N(D(m({},n),{guardsResult:!0})):QT(o,i,r,t).pipe(We(a=>a&&zT(a)?XT(i,s,t,e):N(a)),U(a=>D(m({},n),{guardsResult:a})))})}function QT(t,e,n,i){return je(t).pipe(We(r=>nA(r.component,r.route,n,e,i)),An(r=>r!==!0,!0))}function XT(t,e,n,i){return je(e).pipe(tn(r=>bg(ZT(r.route.parent,i),JT(r.route,i),tA(t,r.path,n),eA(t,r.route,n))),An(r=>r!==!0,!0))}function JT(t,e){return t!==null&&e&&e(new _h(t)),N(!0)}function ZT(t,e){return t!==null&&e&&e(new mh(t)),N(!0)}function eA(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return N(!0);let r=i.map(s=>bn(()=>{let o=Vs(e)??n,a=ir(s,o),c=GT(a)?a.canActivate(e,t):Sn(o,()=>a(e,t));return On(c).pipe(An())}));return N(r).pipe(nr())}function tA(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>UT(o)).filter(o=>o!==null).map(o=>bn(()=>{let a=o.guards.map(c=>{let l=Vs(o.node)??n,u=ir(c,l),h=WT(u)?u.canActivateChild(i,t):Sn(l,()=>u(i,t));return On(h).pipe(An())});return N(a).pipe(nr())}));return N(s).pipe(nr())}function nA(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let c=Vs(e)??r,l=ir(a,c),u=HT(l)?l.canDeactivate(t,e,n,i):Sn(c,()=>l(t,e,n,i));return On(u).pipe(An())});return N(o).pipe(nr())}function iA(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return N(!0);let s=r.map(o=>{let a=ir(o,t),c=qT(a)?a.canLoad(e,n):Sn(t,()=>a(e,n));return On(c)});return N(s).pipe(nr(),ny(i))}function ny(t){return vu(de(e=>{if(er(e))throw J_(t,e)}),U(e=>e===!0))}function rA(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return N(!0);let s=r.map(o=>{let a=ir(o,t),c=KT(a)?a.canMatch(e,n):Sn(t,()=>a(e,n));return On(c)});return N(s).pipe(nr(),ny(i))}var Os=class{constructor(e){this.segmentGroup=e||null}},$a=class extends Error{constructor(e){super(),this.urlTree=e}};function Yi(t){return os(new Os(t))}function sA(t){return os(new se(4e3,!1))}function oA(t){return os(Z_(!1,yt.GuardRejected))}var Ah=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return N(i);if(r.numberOfChildren>1||!r.children[$])return sA(e.redirectTo);r=r.children[$]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new $a(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new Dn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new ee(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new se(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Ch={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aA(t,e,n,i,r){let s=Fh(t,e,n);return s.matched?(i=FT(e,i),rA(i,e,n,r).pipe(U(o=>o===!0?s:m({},Ch)))):N(s)}function Fh(t,e,n){if(e.path==="**")return cA(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?m({},Ch):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||rT)(n,t,e);if(!r)return m({},Ch);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?m(m({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function cA(t){return{matched:!0,parameters:t.length>0?M_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function x_(t,e,n,i){return n.length>0&&hA(t,n,i)?{segmentGroup:new ee(e,uA(i,new ee(n,t.children))),slicedSegments:[]}:n.length===0&&dA(t,n,i)?{segmentGroup:new ee(t.segments,lA(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new ee(t.segments,t.children),slicedSegments:n}}function lA(t,e,n,i){let r={};for(let s of n)if(Ga(t,e,s)&&!i[Lt(s)]){let o=new ee([],{});r[Lt(s)]=o}return m(m({},i),r)}function uA(t,e){let n={};n[$]=e;for(let i of t)if(i.path===""&&Lt(i)!==$){let r=new ee([],{});n[Lt(i)]=r}return n}function hA(t,e,n){return n.some(i=>Ga(t,e,i)&&Lt(i)!==$)}function dA(t,e,n){return n.some(i=>Ga(t,e,i))}function Ga(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function fA(t,e,n,i){return Lt(t)!==i&&(i===$||!Ga(e,n,t))?!1:Fh(e,t,n).matched}function pA(t,e,n){return e.length===0&&!t.children[n]}var Sh=class{};function mA(t,e,n,i,r,s,o="emptyOnly"){return new Rh(t,e,n,i,r,o,s).recognize()}var gA=31,Rh=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Ah(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=x_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(U(n=>{let i=new Ps([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,{},$,this.rootComponentType,null,{}),r=new ut(i,n),s=new Ua("",r),o=bT(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,$).pipe(Tn(i=>{if(i instanceof $a)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Os?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Oh(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(U(s=>s instanceof ut?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return je(r).pipe(tn(s=>{let o=i.children[s],a=VT(n,s);return this.processSegmentGroup(e,a,o,s)}),as((s,o)=>(s.push(...o),s)),Su(null),Pg(),We(s=>{if(s===null)return Yi(i);let o=iy(s);return _A(o),N(o)}))}processSegment(e,n,i,r,s,o){return je(n).pipe(tn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(Tn(c=>{if(c instanceof Os)return N(null);throw c}))),An(a=>!!a),Tn(a=>{if(ty(a))return pA(i,r,s)?N(new Sh):Yi(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return fA(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):Yi(r):Yi(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Fh(n,r,s);if(!a)return Yi(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gA&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,h).pipe(We(d=>this.processSegment(e,i,n,d.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=aA(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(at(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(at(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:h,parameters:d}=a,f=new Ps(u,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,vA(i),Lt(i),i.component??i._loadedComponent??null,i,EA(i)),{segmentGroup:R,slicedSegments:O}=x_(n,u,h,c);if(O.length===0&&R.hasChildren())return this.processChildren(l,c,R).pipe(U(q=>q===null?null:new ut(f,q)));if(c.length===0&&O.length===0)return N(new ut(f,[]));let x=Lt(i)===s;return this.processSegment(l,c,R,O,x?$:s,!0).pipe(U(q=>new ut(f,q instanceof ut?[q]:[])))}))):Yi(n)))}getChildConfig(e,n,i){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):iA(e,n,i,this.urlSerializer).pipe(We(r=>r?this.configLoader.loadChildren(e,n).pipe(de(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):oA(n))):N({routes:[],injector:e})}};function _A(t){t.sort((e,n)=>e.value.outlet===$?-1:n.value.outlet===$?1:e.value.outlet.localeCompare(n.value.outlet))}function yA(t){let e=t.value.routeConfig;return e&&e.path===""}function iy(t){let e=[],n=new Set;for(let i of t){if(!yA(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=iy(i.children);e.push(new ut(i.value,r))}return e.filter(i=>!n.has(i))}function vA(t){return t.data||{}}function EA(t){return t.resolve||{}}function wA(t,e,n,i,r,s){return We(o=>mA(t,e,n,i,o.extractedUrl,r,s).pipe(U(({state:a,tree:c})=>D(m({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function IA(t,e){return We(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return N(n);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of ry(c))o.add(l);let a=0;return je(o).pipe(tn(c=>s.has(c)?bA(c,i,t,e):(c.data=Oh(c,c.parent,t).resolve,N(void 0))),de(()=>a++),Du(1),We(c=>a===o.size?N(n):Jn))})}function ry(t){let e=t.children.map(n=>ry(n)).flat();return[t,...e]}function bA(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!Q_(r)&&(s[Ns]=r.title),TA(s,t,e,i).pipe(U(o=>(t._resolvedData=o,t.data=Oh(t,t.parent,n).resolve,null)))}function TA(t,e,n,i){let r=sh(t);if(r.length===0)return N({});let s={};return je(r).pipe(We(o=>AA(t[o],e,n,i).pipe(An(),de(a=>{s[o]=a}))),Du(1),Sg(s),Tn(o=>ty(o)?Jn:os(o)))}function AA(t,e,n,i){let r=Vs(e)??i,s=ir(t,r),o=s.resolve?s.resolve(e,n):Sn(r,()=>s(e,n));return On(o)}function ih(t){return at(e=>{let n=t(e);return n?je(n).pipe(U(()=>e)):N(e)})}var sy=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===$);return r}getResolvedTitleForRoute(i){return i.data[Ns]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:()=>w(CA),providedIn:"root"});let t=e;return t})(),CA=(()=>{let e=class e extends sy{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(g(A_))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),js=new I("",{providedIn:"root",factory:()=>({})}),ks=new I(""),Vh=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=w(ba)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return N(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=On(i.loadComponent()).pipe(U(oy),de(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Ui(()=>{this.componentLoaders.delete(i)})),s=new wu(r,()=>new J).pipe(Eu());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=SA(r,this.compiler,i,this.onLoadEndListener).pipe(Ui(()=>{this.childrenLoaders.delete(r)})),a=new wu(o,()=>new J).pipe(Eu());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SA(t,e,n,i){return On(t.loadChildren()).pipe(U(oy),We(r=>r instanceof Wg||Array.isArray(r)?N(r):je(e.compileModuleAsync(r))),U(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(ks,[],{optional:!0,self:!0}).flat()),{routes:o.map(Mh),injector:s}}))}function RA(t){return t&&typeof t=="object"&&"default"in t}function oy(t){return RA(t)?t.default:t}var Lh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:()=>w(DA),providedIn:"root"});let t=e;return t})(),DA=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ay=new I(""),cy=new I("");function PA(t,e,n){let i=t.get(cy),r=t.get(H);return t.get(z).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),xA(t))),{onViewTransitionCreated:c}=i;return c&&Sn(t,()=>c({transition:a,from:e,to:n})),o})}function xA(t){return new Promise(e=>{Gg(e,{injector:t})})}var jh=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new J,this.transitionAbortSubject=new J,this.configLoader=w(Vh),this.environmentInjector=w($i),this.urlSerializer=w(Ms),this.rootContexts=w(Fs),this.location=w(an),this.inputBindingEnabled=w(qa,{optional:!0})!==null,this.titleStrategy=w(sy),this.options=w(js,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=w(Lh),this.createViewTransition=w(ay,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let i=s=>this.events.next(new fh(s)),r=s=>this.events.next(new ph(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(D(m(m({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Oe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bs,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(le(o=>o.id!==0),U(o=>D(m({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),at(o=>{this.currentTransition=o;let a=!1,c=!1;return N(o).pipe(de(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?D(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),at(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&h!=="reload"){let d="";return this.events.next(new xn(l.id,this.urlSerializer.serialize(l.rawUrl),d,Ma.IgnoredSameUrlNavigation)),l.resolve(null),Jn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return N(l).pipe(at(d=>{let f=this.transitions?.getValue();return this.events.next(new tr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Jn:Promise.resolve(d)}),wA(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),de(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=D(m({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new Fa(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:f,source:R,restoredState:O,extras:x}=l,q=new tr(d,this.urlSerializer.serialize(f),R,O);this.events.next(q);let re=K_(this.rootComponentType).snapshot;return this.currentTransition=o=D(m({},l),{targetSnapshot:re,urlAfterRedirects:f,extras:D(m({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(o)}else{let d="";return this.events.next(new xn(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Ma.IgnoredByUrlHandlingStrategy)),l.resolve(null),Jn}}),de(l=>{let u=new lh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),U(l=>(this.currentTransition=o=D(m({},l),{guards:jT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),YT(this.environmentInjector,l=>this.events.next(l)),de(l=>{if(o.guardsResult=l.guardsResult,er(l.guardsResult))throw J_(this.urlSerializer,l.guardsResult);let u=new uh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),le(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",yt.GuardRejected),!1)),ih(l=>{if(l.guards.canActivateChecks.length)return N(l).pipe(de(u=>{let h=new hh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),at(u=>{let h=!1;return N(u).pipe(IA(this.paramsInheritanceStrategy,this.environmentInjector),de({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",yt.NoDataFromResolver)}}))}),de(u=>{let h=new dh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),ih(l=>{let u=h=>{let d=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(h.routeConfig).pipe(de(f=>{h.component=f}),U(()=>{})));for(let f of h.children)d.push(...u(f));return d};return ha(u(l.targetSnapshot.root)).pipe(Su(null),He(1))}),ih(()=>this.afterPreactivation()),at(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return h?je(h).pipe(U(()=>o)):N(o)}),U(l=>{let u=xT(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=D(m({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),de(()=>{this.events.next(new Rs)}),LT(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),He(1),de({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ei(this.transitionAbortSubject.pipe(de(l=>{throw l}))),Ui(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",yt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tn(l=>{if(c=!0,ey(l))this.events.next(new Pn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),NT(l)?this.events.next(new Ds(l.url)):o.resolve(!1);else{this.events.next(new Ss(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Jn}))}))}cancelNavigationTransition(i,r,s){let o=new Pn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OA(t){return t!==bs}var kA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:()=>w(NA),providedIn:"root"});let t=e;return t})(),Dh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},NA=(()=>{let e=class e extends Dh{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ly=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:()=>w(MA),providedIn:"root"});let t=e;return t})(),MA=(()=>{let e=class e extends ly{constructor(){super(...arguments),this.location=w(an),this.urlSerializer=w(Ms),this.options=w(js,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=w(Lh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Dn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=K_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof tr)this.stateMemento=this.createStateMemento();else if(i instanceof xn)this.rawUrlTree=r.initialUrl;else if(i instanceof Fa){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Rs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Pn&&(i.code===yt.GuardRejected||i.code===yt.NoDataFromResolver)?this.restoreHistory(r):i instanceof Ss?this.restoreHistory(r,!0):i instanceof cn&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=m(m({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=m(m({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ws=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ws||{});function uy(t,e){t.events.pipe(le(n=>n instanceof cn||n instanceof Pn||n instanceof Ss||n instanceof xn),U(n=>n instanceof cn||n instanceof xn?ws.COMPLETE:(n instanceof Pn?n.code===yt.Redirect||n.code===yt.SupersededByNewNavigation:!1)?ws.REDIRECTING:ws.FAILED),le(n=>n!==ws.REDIRECTING),He(1)).subscribe(()=>{e()})}function FA(t){throw t}var VA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Et=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=w(wa),this.stateManager=w(ly),this.options=w(js,{optional:!0})||{},this.pendingTasks=w(Hg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=w(jh),this.urlSerializer=w(Ms),this.location=w(an),this.urlHandlingStrategy=w(Lh),this._events=new J,this.errorHandler=this.options.errorHandler||FA,this.navigated=!1,this.routeReuseStrategy=w(kA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=w(ks,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!w(qa,{optional:!0}),this.eventsSubscription=new Xn,this.isNgZoneEnabled=w(z)instanceof z&&z.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pn&&r.code!==yt.Redirect&&r.code!==yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof cn)this.navigated=!0;else if(r instanceof Ds){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||OA(s.source)};this.scheduleNavigation(a,bs,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}UA(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=m({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Mh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let d;try{let f=s?s.snapshot:this.routerState.snapshot.root;d=q_(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),d=this.currentUrlTree.root}return G_(d,i,h,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=er(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,bs,null,r)}navigate(i,r={skipLocationChange:!1}){return jA(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=m({},VA):r===!1?s=m({},LA):s=r,er(i))return C_(this.currentUrlTree,i,s);let o=this.parseUrl(i);return C_(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((d,f)=>{c=d,l=f});let h=this.pendingTasks.add();return uy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jA(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new se(4008,!1)}function UA(t){return!(t instanceof Rs)&&!(t instanceof Ds)}var za=class{};var BA=(()=>{let e=class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(le(i=>i instanceof cn),tn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Nu(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return je(s).pipe(Au())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=N(null);let o=s.pipe(We(a=>a===null?N(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return je([o,a]).pipe(Au())}else return o})}};e.\u0275fac=function(r){return new(r||e)(g(Et),g(ba),g($i),g(za),g(Vh))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hy=new I(""),$A=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof tr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof cn?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof xn&&i.code===Ma.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Va&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Va(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){pa()},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function dy(t,...e){return rn([{provide:ks,multi:!0,useValue:t},[],{provide:ln,useFactory:fy,deps:[Et]},{provide:Lu,multi:!0,useFactory:py},e.map(n=>n.\u0275providers)])}function fy(t){return t.routerState.root}function Us(t,e){return{\u0275kind:t,\u0275providers:e}}function py(){let t=w(Ae);return e=>{let n=t.get(fs);if(e!==n.components[0])return;let i=t.get(Et),r=t.get(my);t.get(Uh)===1&&i.initialNavigation(),t.get(gy,null,Pu.Optional)?.setUpPreloading(),t.get(hy,null,Pu.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var my=new I("",{factory:()=>new J}),Uh=new I("",{providedIn:"root",factory:()=>1});function zA(){return Us(2,[{provide:Uh,useValue:0},{provide:Vu,multi:!0,deps:[Ae],useFactory:e=>{let n=e.get(e_,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Et),s=e.get(my);uy(r,()=>{i(!0)}),e.get(jh).afterPreactivation=()=>(i(!0),s.closed?N(void 0):s),r.initialNavigation()}))}}])}function qA(){return Us(3,[{provide:Vu,multi:!0,useFactory:()=>{let e=w(Et);return()=>{e.setUpLocationChangeListener()}}},{provide:Uh,useValue:2}])}var gy=new I("");function GA(t){return Us(0,[{provide:gy,useExisting:BA},{provide:za,useExisting:t}])}function WA(){return Us(8,[P_,{provide:qa,useExisting:P_}])}function HA(t){let e=[{provide:ay,useValue:PA},{provide:cy,useValue:m({skipNextTransition:!!t?.skipInitialTransition},t)}];return Us(9,e)}var O_=new I("ROUTER_FORROOT_GUARD"),KA=[an,{provide:Ms,useClass:As},Et,Fs,{provide:ln,useFactory:fy,deps:[Et]},Vh,[]],_y=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[KA,[],{provide:ks,multi:!0,useValue:i},{provide:O_,useFactory:JA,deps:[[Et,new ct,new jg]]},{provide:js,useValue:r||{}},r?.useHash?QA():XA(),YA(),r?.preloadingStrategy?GA(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ZA(r):[],r?.bindToComponentInputs?WA().\u0275providers:[],r?.enableViewTransitions?HA().\u0275providers:[],eC()]}}static forChild(i){return{ngModule:e,providers:[{provide:ks,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(g(O_,8))},e.\u0275mod=ue({type:e}),e.\u0275inj=he({});let t=e;return t})();function YA(){return{provide:hy,useFactory:()=>{let t=w(l_),e=w(z),n=w(js),i=w(jh),r=w(Ms);return n.scrollOffset&&t.setOffset(n.scrollOffset),new $A(r,i,t,e,n)}}}function QA(){return{provide:ju,useClass:n_}}function XA(){return{provide:ju,useClass:t_}}function JA(t){return"guarded"}function ZA(t){return[t.initialNavigation==="disabled"?qA().\u0275providers:[],t.initialNavigation==="enabledBlocking"?zA().\u0275providers:[]]}var k_=new I("");function eC(){return[{provide:k_,useFactory:py},{provide:Lu,multi:!0,useExisting:k_}]}var Sy=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(b(zi),b(De))},e.\u0275dir=oe({type:e});let t=e;return t})(),ec=(()=>{let e=class e extends Sy{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275dir=oe({type:e,features:[Ce]});let t=e;return t})(),qs=new I("");var nC={provide:qs,useExisting:nn(()=>Nn),multi:!0};function iC(){let t=Hi()?Hi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var rC=new I(""),Nn=(()=>{let e=class e extends Sy{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!iC())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(b(zi),b(De),b(rC,8))},e.\u0275dir=oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&Q("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[mt([nC]),Ce]});let t=e;return t})();function kn(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Ry(t){return t!=null&&typeof t.length=="number"}var tc=new I(""),nc=new I(""),sC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Me=class{static min(e){return oC(e)}static max(e){return aC(e)}static required(e){return cC(e)}static requiredTrue(e){return lC(e)}static email(e){return uC(e)}static minLength(e){return hC(e)}static maxLength(e){return dC(e)}static pattern(e){return fC(e)}static nullValidator(e){return Dy(e)}static compose(e){return My(e)}static composeAsync(e){return Vy(e)}};function oC(t){return e=>{if(kn(e.value)||kn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function aC(t){return e=>{if(kn(e.value)||kn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function cC(t){return kn(t.value)?{required:!0}:null}function lC(t){return t.value===!0?null:{required:!0}}function uC(t){return kn(t.value)||sC.test(t.value)?null:{email:!0}}function hC(t){return e=>kn(e.value)||!Ry(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function dC(t){return e=>Ry(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function fC(t){if(!t)return Dy;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(kn(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function Dy(t){return null}function Py(t){return t!=null}function xy(t){return Ia(t)?je(t):t}function Oy(t){let e={};return t.forEach(n=>{e=n!=null?m(m({},e),n):e}),Object.keys(e).length===0?null:e}function ky(t,e){return e.map(n=>n(t))}function pC(t){return!t.validate}function Ny(t){return t.map(e=>pC(e)?e:n=>e.validate(n))}function My(t){if(!t)return null;let e=t.filter(Py);return e.length==0?null:function(n){return Oy(ky(n,e))}}function Fy(t){return t!=null?My(Ny(t)):null}function Vy(t){if(!t)return null;let e=t.filter(Py);return e.length==0?null:function(n){let i=ky(n,e).map(xy);return Tg(i).pipe(U(Oy))}}function Ly(t){return t!=null?Vy(Ny(t)):null}function yy(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function jy(t){return t._rawValidators}function Uy(t){return t._rawAsyncValidators}function Bh(t){return t?Array.isArray(t)?t:[t]:[]}function Ka(t,e){return Array.isArray(t)?t.includes(e):t===e}function vy(t,e){let n=Bh(e);return Bh(t).forEach(r=>{Ka(n,r)||n.push(r)}),n}function Ey(t,e){return Bh(e).filter(n=>!Ka(t,n))}var Ya=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Fy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ly(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},wt=class extends Ya{get formDirective(){return null}get path(){return null}},zs=class extends Ya{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Qa=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},mC={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},nF=D(m({},mC),{"[class.ng-submitted]":"isSubmitted"}),or=(()=>{let e=class e extends Qa{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(b(zs,2))},e.\u0275dir=oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Gi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ce]});let t=e;return t})(),ar=(()=>{let e=class e extends Qa{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(b(wt,10))},e.\u0275dir=oe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Gi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ce]});let t=e;return t})();var Bs="VALID",Wa="INVALID",rr="PENDING",$s="DISABLED";function qh(t){return(ic(t)?t.validators:t)||null}function gC(t){return Array.isArray(t)?Fy(t):t||null}function Gh(t,e){return(ic(e)?e.asyncValidators:t)||null}function _C(t){return Array.isArray(t)?Ly(t):t||null}function ic(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function By(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new se(1e3,"");if(!i[n])throw new se(1001,"")}function $y(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new se(1002,"")})}var sr=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bs}get invalid(){return this.status===Wa}get pending(){return this.status==rr}get disabled(){return this.status===$s}get enabled(){return this.status!==$s}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vy(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vy(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ey(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ey(e,this._rawAsyncValidators))}hasValidator(e){return Ka(this._rawValidators,e)}hasAsyncValidator(e){return Ka(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=rr,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$s,this.errors=null,this._forEachChild(i=>{i.disable(D(m({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(D(m({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Bs,this._forEachChild(i=>{i.enable(D(m({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(D(m({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bs||this.status===rr)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$s:Bs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=rr,this._hasOwnPendingAsyncValidator=!0;let n=xy(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?$s:this.errors?Wa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rr)?rr:this._anyControlsHaveStatus(Wa)?Wa:Bs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ic(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=gC(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_C(this._rawAsyncValidators)}},Xa=class extends sr{constructor(e,n,i){super(qh(n),Gh(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){$y(this,!0,e),Object.keys(e).forEach(i=>{By(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var $h=class extends Xa{};var Wh=new I("CallSetDisabledState",{providedIn:"root",factory:()=>rc}),rc="always";function Hh(t,e){return[...e.path,t]}function wy(t,e,n=rc){Kh(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),vC(t,e),wC(t,e),EC(t,e),yC(t,e)}function Iy(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Za(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ja(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function yC(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Kh(t,e){let n=jy(t);e.validator!==null?t.setValidators(yy(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=Uy(t);e.asyncValidator!==null?t.setAsyncValidators(yy(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Ja(e._rawValidators,r),Ja(e._rawAsyncValidators,r)}function Za(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=jy(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=Uy(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Ja(e._rawValidators,i),Ja(e._rawAsyncValidators,i),n}function vC(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&zy(t,e)})}function EC(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&zy(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function zy(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function wC(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function IC(t,e){t==null,Kh(t,e)}function bC(t,e){return Za(t,e)}function TC(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function AC(t){return Object.getPrototypeOf(t.constructor)===ec}function CC(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function SC(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===Nn?n=s:AC(s)?i=s:r=s}),r||i||n||null}function RC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function by(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ty(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ha=class extends sr{constructor(e=null,n,i){super(qh(n),Gh(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ic(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Ty(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){by(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){by(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ty(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var DC=t=>t instanceof Ha,PC=(()=>{let e=class e extends wt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Hh(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275dir=oe({type:e,features:[Ce]});let t=e;return t})();var cr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=oe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),xC={provide:qs,useExisting:nn(()=>Gs),multi:!0},Gs=(()=>{let e=class e extends ec{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275dir=oe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&Q("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[mt([xC]),Ce]});let t=e;return t})();var qy=new I("");var OC={provide:wt,useExisting:nn(()=>Mn)},Mn=(()=>{let e=class e extends wt{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new we,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Za(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return wy(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){Iy(i.control||null,i,!1),RC(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,CC(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(Iy(r||null,i),DC(s)&&(wy(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);IC(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&bC(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Kh(this.form,this),this._oldForm&&Za(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(b(tc,10),b(nc,10),b(Wh,8))},e.\u0275dir=oe({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&Q("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[it.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[mt([OC]),Ce,sn]});let t=e;return t})(),kC={provide:wt,useExisting:nn(()=>sc)},sc=(()=>{let e=class e extends PC{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}_checkParentType(){Gy(this._parent)}};e.\u0275fac=function(r){return new(r||e)(b(wt,13),b(tc,10),b(nc,10))},e.\u0275dir=oe({type:e,selectors:[["","formGroupName",""]],inputs:{name:[it.None,"formGroupName","name"]},features:[mt([kC]),Ce]});let t=e;return t})(),NC={provide:wt,useExisting:nn(()=>oc)},oc=(()=>{let e=class e extends wt{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Hh(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){Gy(this._parent)}};e.\u0275fac=function(r){return new(r||e)(b(wt,13),b(tc,10),b(nc,10))},e.\u0275dir=oe({type:e,selectors:[["","formArrayName",""]],inputs:{name:[it.None,"formArrayName","name"]},features:[mt([NC]),Ce]});let t=e;return t})();function Gy(t){return!(t instanceof sc)&&!(t instanceof Mn)&&!(t instanceof oc)}var MC={provide:zs,useExisting:nn(()=>ci)},ci=(()=>{let e=class e extends zs{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new we,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=SC(this,o)}ngOnChanges(i){this._added||this._setUpControl(),TC(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return Hh(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(b(wt,13),b(tc,10),b(nc,10),b(qs,10),b(qy,8))},e.\u0275dir=oe({type:e,selectors:[["","formControlName",""]],inputs:{name:[it.None,"formControlName","name"],isDisabled:[it.None,"disabled","isDisabled"],model:[it.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[mt([MC]),Ce,sn]});let t=e;return t})(),FC={provide:qs,useExisting:nn(()=>lr),multi:!0};function Wy(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function VC(t){return t.split(":")[0]}var lr=(()=>{let e=class e extends ec{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=Wy(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=VC(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275dir=oe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&Q("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[mt([FC]),Ce]});let t=e;return t})(),ac=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(Wy(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(b(De),b(zi),b(lr,9))},e.\u0275dir=oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),LC={provide:qs,useExisting:nn(()=>Hy),multi:!0};function Ay(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function jC(t){return t.split(":")[0]}var Hy=(()=>{let e=class e extends ec{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=jC(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275dir=oe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&Q("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[mt([LC]),Ce]});let t=e;return t})(),cc=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Ay(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Ay(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(b(De),b(zi),b(Hy,9))},e.\u0275dir=oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var Ky=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ue({type:e}),e.\u0275inj=he({});let t=e;return t})(),zh=class extends sr{constructor(e,n,i){super(qh(n),Gh(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){$y(this,!1,e),e.forEach((i,r)=>{By(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Cy(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var ur=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return Cy(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Xa(s,o)}record(i,r=null){let s=this._reduceControls(i);return new $h(s,r)}control(i,r,s){let o={};return this.useNonNullable?(Cy(r)?o=r:(o.validators=r,o.asyncValidators=s),new Ha(i,D(m({},o),{nonNullable:!0}))):new Ha(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new zh(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof Ha)return i;if(i instanceof sr)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hr=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Wh,useValue:i.callSetDisabledState??rc}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ue({type:e}),e.\u0275inj=he({imports:[Ky]});let t=e;return t})(),dr=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:qy,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Wh,useValue:i.callSetDisabledState??rc}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ue({type:e}),e.\u0275inj=he({imports:[Ky]});let t=e;return t})();function lc(t,e=0){return UC(t)?Number(t):e}function UC(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Qh(t){return Array.isArray(t)?t:[t]}function Te(t){return t==null?"":typeof t=="string"?t:`${t}px`}function fr(t){return t instanceof De?t.nativeElement:t}var Jh;try{Jh=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Jh=!1}var rt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?c_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Jh)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(g(At))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ws;function BC(){if(Ws==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ws=!0}))}finally{Ws=Ws||!1}return Ws}function Zh(t){return BC()?t:!!t.capture}var li;function Yy(){if(li==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return li=!1,li;if("scrollBehavior"in document.documentElement.style)li=!0;else{let t=Element.prototype.scrollTo;t?li=!/\{\s*\[native code\]\s*\}/.test(t.toString()):li=!1}}return li}var Xh;function $C(){if(Xh==null){let t=typeof document<"u"?document.head:null;Xh=!!(t&&(t.createShadowRoot||t.attachShadow))}return Xh}function Qy(t){if($C()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Hs(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function un(t){return t.composedPath?t.composedPath()[0]:t.target}function ed(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var zC=new I("cdk-dir-doc",{providedIn:"root",factory:qC});function qC(){return w(H)}var GC=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function WC(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?GC.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Ks=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new we,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=WC(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(g(zC,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var YC=20,Xy=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new J,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=YC){return this._platform.isBrowser?new nt(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(Cu(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):N()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(le(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=fr(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Ag(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(g(z),g(rt),g(H,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var QC=20,nd=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new J,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,c=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(i=QC){return i>0?this._change.pipe(Cu(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(g(rt),g(z),g(H,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ys=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},pr=class extends Ys{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},mr=class extends Ys{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},id=class extends Ys{constructor(e){super(),this.element=e instanceof De?e.nativeElement:e}},gr=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof pr)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof mr)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof id)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var uc=class extends gr{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ae.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Qs=(()=>{let e=class e extends gr{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new we,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(b(ma),b(qi),b(H))},e.\u0275dir=oe({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[it.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ce]});let t=e;return t})();function hc(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var Jy=Yy(),rd=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Te(-this._previousScrollPosition.left),e.style.top=Te(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Jy&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Jy&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var sd=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(le(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},dc=class{enable(){}disable(){}attach(){}};function od(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return i||r||s||o})}function Zy(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return i||r||s||o})}var ad=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();od(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},JC=(()=>{let e=class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new dc,this.close=a=>new sd(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new rd(this._viewportRuler,this._document),this.reposition=a=>new ad(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(r){return new(r||e)(g(Xy),g(nd),g(z),g(H))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xs=class{constructor(e){if(this.scrollStrategy=new dc,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var cd=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var sv=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(g(H))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ZC=(()=>{let e=class e extends sv{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(g(H),g(z,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eS=(()=>{let e=class e extends sv{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=un(o)},this._clickListener=o=>{let a=un(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let h=l[u];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(c))break;let d=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(o)):d.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(g(H),g(rt),g(z,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_r=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||ed()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),ed()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(g(H),g(rt))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hn=class{constructor(e,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new J,this._attachments=new J,this._detachments=new J,this._locationChanges=Xn.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new J,this._outsidePointerEvents=new J,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(He(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=m(m({},this._config),e),this._updateElementSize()}setDirection(e){this._config=D(m({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Te(this._config.width),e.height=Te(this._config.height),e.minWidth=Te(this._config.minWidth),e.minHeight=Te(this._config.minHeight),e.maxWidth=Te(this._config.maxWidth),e.maxHeight=Te(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=Qh(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(ei(Zn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},ev="cdk-overlay-connected-position-bounding-box",tS=/([A-Za-z%]+)$/,ld=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new J,this._resizeSubscription=Xn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(ev),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ui(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ev),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){let s=nv(n),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,h=o+s.width-i.width,d=0-a,f=a+s.height-i.height,R=this._subtractOverflows(s.width,u,h),O=this._subtractOverflows(s.height,d,f),x=R*O;return{visibleArea:x,isCompletelyWithinViewport:s.width*s.height===x,fitsInViewportVertically:O===s.height,fitsInViewportHorizontally:R==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=tv(this._overlayRef.getConfig().minHeight),a=tv(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=nv(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,h=0;return r.width<=s.width?u=l||-o:u=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?h=c||-a:h=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!nS(this._lastScrollVisibility,i)){let r=new cd(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),R=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>R&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-R/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,l=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,h,d;if(l)d=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(c)h=e.x,u=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),R=this._lastBoundingBoxSize.width;u=f*2,h=e.x-f,u>R&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-R/2)}return{top:o,left:h,bottom:a,right:d,width:u,height:s}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Te(i.height),r.top=Te(i.top),r.bottom=Te(i.bottom),r.width=Te(i.width),r.left=Te(i.left),r.right=Te(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Te(s)),o&&(r.maxWidth=Te(o))}this._lastBoundingBoxSize=i,ui(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ui(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ui(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();ui(i,this._getExactOverlayY(n,e,u)),ui(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Te(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Te(o.maxWidth):s&&(i.maxWidth="")),ui(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Te(s.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Te(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Zy(e,i),isOriginOutsideView:od(e,i),isOverlayClipped:Zy(n,i),isOverlayOutsideView:od(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Qh(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof De)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function ui(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function tv(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(tS);return!n||n==="px"?parseFloat(e):null}return t||null}function nv(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function nS(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var iv="cdk-global-overlay-wrapper",ud=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(iv),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,h=this._xOffset,d=this._overlayRef.getConfig().direction==="rtl",f="",R="",O="";c?O="flex-start":u==="center"?(O="center",d?R=h:f=h):d?u==="left"||u==="end"?(O="flex-end",f=h):(u==="right"||u==="start")&&(O="flex-start",R=h):u==="left"||u==="start"?(O="flex-start",f=h):(u==="right"||u==="end")&&(O="flex-end",R=h),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":R,n.justifyContent=O,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(iv),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},iS=(()=>{let e=class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new ud}flexibleConnectedTo(i){return new ld(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(g(nd),g(H),g(rt),g(_r))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rS=0,Vn=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u,h,d,f,R){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=h,this._location=d,this._outsideClickDispatcher=f,this._animationsModuleType=R}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new Xs(i);return a.direction=a.direction||this._directionality.value,new hn(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${rS++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(fs)),new uc(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(g(JC),g(_r),g(ma),g(iS),g(ZC),g(Ae),g(z),g(H),g(Ks),g(an),g(eS),g(ti,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Js=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return oS(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=sS(pS(i));if(r&&(av(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=av(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!dS(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return fS(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(g(rt))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sS(t){try{return t.frameElement}catch{return null}}function oS(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function aS(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function cS(t){return uS(t)&&t.type=="hidden"}function lS(t){return hS(t)&&t.hasAttribute("href")}function uS(t){return t.nodeName.toLowerCase()=="input"}function hS(t){return t.nodeName.toLowerCase()=="a"}function cv(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function av(t){if(!cv(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function dS(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function fS(t){return cS(t)?!1:aS(t)||lS(t)||t.hasAttribute("contenteditable")||cv(t)}function pS(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var hd=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(He(1)).subscribe(e)}},mc=(()=>{let e=class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new hd(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(g(Js),g(z),g(H))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mS(t){return t.buttons===0||t.detail===0}function gS(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var _S=new I("cdk-input-modality-detector-options"),yS={ignoreKeys:[18,17,224,91,16]},lv=650,yr=Zh({passive:!0,capture:!0}),vS=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new Oe(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=un(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<lv||(this._modality.next(mS(a)?"keyboard":"mouse"),this._mostRecentTarget=un(a))},this._onTouchstart=a=>{if(gS(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=un(a)},this._options=m(m({},yS),o),this.modalityDetected=this._modality.pipe(kg(1)),this.modalityChanged=this.modalityDetected.pipe(ji()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,yr),s.addEventListener("mousedown",this._onMousedown,yr),s.addEventListener("touchstart",this._onTouchstart,yr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,yr),document.removeEventListener("mousedown",this._onMousedown,yr),document.removeEventListener("touchstart",this._onTouchstart,yr))}};e.\u0275fac=function(r){return new(r||e)(g(rt),g(z),g(H),g(_S,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pc=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(pc||{}),ES=new I("cdk-focus-monitor-default-options"),fc=Zh({passive:!0,capture:!0}),gc=(()=>{let e=class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new J,this._rootNodeFocusAndBlurListener=c=>{let l=un(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||pc.IMMEDIATE}monitor(i,r=!1){let s=fr(i);if(!this._platform.isBrowser||s.nodeType!==1)return N();let o=Qy(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new J,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=fr(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=fr(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===pc.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===pc.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?lv:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=un(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,fc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,fc)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ei(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(g(z),g(rt),g(vS),g(H,8),g(ES,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IS(t,e){}var hi=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var pd=(()=>{let e=class e extends gr{constructor(i,r,s,o,a,c,l,u){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=w(rt),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=w(ni),this.attachDomPortal=h=>{this._portalOutlet.hasAttached();let d=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),d},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=Hs(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=Hs();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Hs()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(b(De),b(mc),b(H,8),b(hi),b(Js),b(z),b(hn),b(gc))},e.\u0275cmp=fe({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&Mu(Qs,7),r&2){let o;ya(o=va())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&ii("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ce,pe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&Y(0,IS,0,0,"ng-template",0)},dependencies:[Qs],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Zs=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new J,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!hc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},bS=new I("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=w(Vn);return()=>t.scrollStrategies.block()}}),TS=new I("DialogData"),AS=new I("DefaultDialogConfig");var CS=0,hv=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new J,this._afterOpenedAtThisLevel=new J,this._ariaHiddenElements=new Map,this.afterAllClosed=bn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Cn(void 0))),this._scrollStrategy=c}open(i,r){let s=this._defaultOptions||new hi;r=m(m({},s),r),r.id=r.id||`cdk-dialog-${CS++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new Zs(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){dd(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){dd(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),dd(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Xs({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:hi,useValue:s},{provide:Zs,useValue:r},{provide:hn,useValue:i}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=pd;let l=new pr(c,s.viewContainerRef,Ae.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof hs){let a=this._createInjector(o,r,s,void 0),c={$implicit:o.data,dialogRef:r};o.templateContext&&(c=m(m({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new mr(i,null,c,a))}else{let a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new pr(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:TS,useValue:i.data},{provide:Zs,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(Ks,null,{optional:!0}))&&c.push({provide:Ks,useValue:{value:i.direction,change:N()}}),Ae.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(g(Vn),g(Ae),g(AS,8),g(e,12),g(_r),g(bS))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dd(t,e){let n=t.length;for(;n--;)e(t[n])}function SS(t,e){}var eo=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},md="mdc-dialog--open",dv="mdc-dialog--opening",fv="mdc-dialog--closing",RS=150,DS=75,PS=(()=>{let e=class e extends pd{constructor(i,r,s,o,a,c,l,u,h){super(i,r,s,o,a,c,l,h),this._animationMode=u,this._animationStateChanged=new we,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?mv(this._config.enterAnimationDuration)??RS:0,this._exitAnimationDuration=this._animationsEnabled?mv(this._config.exitAnimationDuration)??DS:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(pv,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(dv,md)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(md),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(md),this._animationsEnabled?(this._hostElement.style.setProperty(pv,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(fv)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(dv,fv)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(b(De),b(mc),b(H,8),b(eo),b(Js),b(z),b(hn),b(ti,8),b(gc))},e.\u0275cmp=fe({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,s){r&2&&(Kg("id",s._config.id),ii("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Gi("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[Ce,pe],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(E(0,"div",0)(1,"div",1),Y(2,SS,0,0,"ng-template",2),_()())},dependencies:[Qs],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),pv="--mat-dialog-transition-duration";function mv(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?lc(t.substring(0,t.length-2)):t.endsWith("s")?lc(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var _c=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(_c||{}),dn=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new J,this._beforeClosed=new J,this._state=_c.OPEN,this.disableClose=n.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(le(r=>r.state==="opened"),He(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(le(r=>r.state==="closed"),He(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Zn(this.backdropClick(),this.keydownEvents().pipe(le(r=>r.keyCode===27&&!this.disableClose&&!hc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),xS(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(le(n=>n.state==="closing"),He(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=_c.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=_c.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function xS(t,e,n){return t._closeInteractionType=e,t.close(n)}var di=new I("MatMdcDialogData"),OS=new I("mat-mdc-dialog-default-options"),kS=new I("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=w(Vn);return()=>t.scrollStrategies.block()}});var NS=0,yc=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,u){this._overlay=i,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new J,this._afterOpenedAtThisLevel=new J,this.dialogConfigClass=eo,this.afterAllClosed=bn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Cn(void 0))),this._dialog=r.get(hv),this._dialogRefConstructor=dn,this._dialogContainerType=PS,this._dialogDataToken=di}open(i,r){let s;r=m(m({},this._defaultOptions||new eo),r),r.id=r.id||`mat-mdc-dialog-${NS++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,D(m({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:hi,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(g(Vn),g(Ae),g(an,8),g(OS,8),g(kS),g(e,12),g(_r),g(ti,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MS(t,e){if(t&1){let n=Ze();E(0,"i",17),Q("click",function(){Ie(n);let r=W().index,s=W();return be(s.deleteUser(r))}),_()}}function FS(t,e){if(t&1&&(Mt(0),E(1,"div",11)(2,"div",12)(3,"div",13),Ue(4,"input",14),_(),E(5,"div",15),Y(6,MS,1,0,"i",16),_()()(),Ft()),t&2){let n=e.index,i=W();P(),F("formGroupName",n),P(5),F("ngIf",i.users.length>2)}}var gv=(()=>{let e=class e{constructor(i,r,s){this.dialogRef=i,this.data=r,this.fb=s,this.form=this.fb.group({projectName:["",Me.required],users:this.fb.array([])}),this.addUser(),this.addUser()}get users(){return this.form.get("users")}ngOnInit(){}addUser(){let i=this.fb.group({name:["",Me.required]});this.users.push(i)}deleteUser(i){this.users.removeAt(i)}close(){this.dialogRef.close()}create(){this.dialogRef.close(this.form.value)}};e.\u0275fac=function(r){return new(r||e)(b(dn),b(di),b(ur))},e.\u0275cmp=fe({type:e,selectors:[["app-create-project-modal"]],standalone:!0,features:[pe],decls:20,vars:3,consts:[[1,"modal-container"],[3,"formGroup"],[1,"mb-3"],["for","projectName",1,"form-label"],["id","projectName","formControlName","projectName","type","text",1,"form-control"],[1,"flex-space-between"],[1,"btn","btn-primary","btn-sm",3,"click"],["formArrayName","users"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"",3,"formGroupName"],[1,"row","mb-1"],[1,"col-10"],["id","name","formControlName","name","type","text",1,"form-control"],[1,"col-2",2,"line-height","2rem"],["class","bi bi-trash-fill clickable",3,"click",4,"ngIf"],[1,"bi","bi-trash-fill","clickable",3,"click"]],template:function(r,s){r&1&&(E(0,"div",0)(1,"h3"),T(2,"Create Project"),_(),E(3,"form",1)(4,"div",2)(5,"label",3),T(6,"Project Name"),_(),Ue(7,"input",4),_(),E(8,"div",2)(9,"div",5)(10,"label",3),T(11,"Users"),_(),E(12,"button",6),Q("click",function(){return s.addUser()}),T(13,"Add User"),_()(),Mt(14,7),Y(15,FS,7,2,"ng-container",8),Ft(),_(),E(16,"button",9),Q("click",function(){return s.close()}),T(17,"Close"),_(),E(18,"button",10),Q("click",function(){return s.create()}),T(19,"Create"),_()()()),r&2&&(P(3),F("formGroup",s.form),P(12),F("ngForOf",s.users.controls),P(3),F("disabled",s.form.invalid))},dependencies:[Be,gt,_t,hr,cr,Nn,or,ar,dr,Mn,ci,sc,oc],styles:[".modal-container[_ngcontent-%COMP%]{padding:1rem;width:30rem}button[_ngcontent-%COMP%]{margin:.25rem}@media (max-width: 575.98px){.modal-container[_ngcontent-%COMP%]{padding:1rem;width:18rem}}.flex-space-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]});let t=e;return t})();var Vd={};Ob(Vd,{FirebaseError:()=>ht,SDK_VERSION:()=>pn,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>so,_addOrOverwriteComponent:()=>Fd,_apps:()=>Ln,_clearComponents:()=>FR,_components:()=>io,_getProvider:()=>oo,_registerComponent:()=>St,_removeServiceInstance:()=>qv,deleteApp:()=>Cc,getApp:()=>wr,getApps:()=>ao,initializeApp:()=>Er,onLog:()=>Sc,registerVersion:()=>me,setLogLevel:()=>Rc});var yv=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},VS=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4,d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let l=r<t.length?n[t.charAt(r)]:64;++r;let h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||l==null||h==null)throw new _d;let d=s<<2|a>>4;if(i.push(d),l!==64){let f=a<<4&240|l>>2;if(i.push(f),h!==64){let R=l<<6&192|h;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},_d=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},LS=function(t){let e=yv(t);return vv.encodeByteArray(e,!0)},to=function(t){return LS(t).replace(/\./g,"")},vd=function(t){try{return vv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function no(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!jS(n)||(t[n]=no(t[n],e[n]));return t}function jS(t){return t!=="__proto__"}function US(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var BS=()=>US().__FIREBASE_DEFAULTS__,$S=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&vd(t[1]);return e&&JSON.parse(e)},wc=()=>{try{return BS()||$S()||zS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ev=t=>{var e,n;return(n=(e=wc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wv=t=>{let e=Ev(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Ed=()=>{var t;return(t=wc())===null||t===void 0?void 0:t.config},Iv=t=>{var e;return(e=wc())===null||e===void 0?void 0:e[`_${t}`]};var Ec=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function bv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[to(JSON.stringify(n)),to(JSON.stringify(o)),""].join(".")}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function qS(){var t;let e=(t=wc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Av(){return typeof self=="object"&&self.self===self}function Cv(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rv(){return!qS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ic(){try{return typeof indexedDB=="object"}catch{return!1}}function Dv(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var GS="FirebaseError",ht=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=GS,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}},It=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?WS(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ht(r,a,i)}};function WS(t,e){return t.replace(HS,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var HS=/\{\$([^}]+)}/g;function wd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vr(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(_v(s)&&_v(o)){if(!vr(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function _v(t){return t!==null&&typeof t=="object"}function Id(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function bc(t,e){let n=new yd(t,e);return n.subscribe.bind(n)}var yd=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");KS(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=gd),r.error===void 0&&(r.error=gd),r.complete===void 0&&(r.complete=gd);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function KS(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gd(){}var pL=4*60*60*1e3;function bt(t){return t&&t._delegate?t._delegate:t}var st=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fi="[DEFAULT]";var bd=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Ec;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QS(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:YS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function YS(t){return t===fi?void 0:t}function QS(t){return t.instantiationMode==="EAGER"}var Tc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new bd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Td=[],G=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(G||{}),Pv={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},XS=G.INFO,JS={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ZS=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=JS[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},jt=class{constructor(e){this.name=e,this._logLevel=XS,this._logHandler=ZS,this._userLogHandler=null,Td.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}};function xv(t){Td.forEach(e=>{e.setLogLevel(t)})}function Ov(t,e){for(let n of Td){let i=null;e&&e.level&&(i=Pv[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...o)=>{let a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(i??r.logLevel)&&t({level:G[s].toLowerCase(),message:a,args:o,type:r.name})}}}var eR=(t,e)=>e.some(n=>t instanceof n),kv,Nv;function tR(){return kv||(kv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nR(){return Nv||(Nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Mv=new WeakMap,Cd=new WeakMap,Fv=new WeakMap,Ad=new WeakMap,Rd=new WeakMap;function iR(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ut(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Mv.set(n,t)}).catch(()=>{}),Rd.set(e,t),e}function rR(t){if(Cd.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Cd.set(t,e)}var Sd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ut(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vv(t){Sd=t(Sd)}function sR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(Ac(this),e,...n);return Fv.set(i,e.sort?e.sort():[e]),Ut(i)}:nR().includes(t)?function(...e){return t.apply(Ac(this),e),Ut(Mv.get(this))}:function(...e){return Ut(t.apply(Ac(this),e))}}function oR(t){return typeof t=="function"?sR(t):(t instanceof IDBTransaction&&rR(t),eR(t,tR())?new Proxy(t,Sd):t)}function Ut(t){if(t instanceof IDBRequest)return iR(t);if(Ad.has(t))return Ad.get(t);let e=oR(t);return e!==t&&(Ad.set(t,e),Rd.set(e,t)),e}var Ac=t=>Rd.get(t);function jv(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),a=Ut(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Ut(o.result),c.oldVersion,c.newVersion,Ut(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var aR=["get","getKey","getAll","getAllKeys","count"],cR=["put","add","delete","clear"],Dd=new Map;function Lv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=cR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||aR.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),r&&c.done]))[0]})};return Dd.set(e,s),s}Vv(t=>D(m({},t),{get:(e,n,i)=>Lv(e,n)||t.get(e,n,i),has:(e,n)=>!!Lv(e,n)||t.has(e,n)}));var xd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lR(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function lR(t){let e=t.getComponent();return e?.type==="VERSION"}var Od="@firebase/app",Uv="0.9.29";var pi=new jt("@firebase/app"),uR="@firebase/app-compat",hR="@firebase/analytics-compat",dR="@firebase/analytics",fR="@firebase/app-check-compat",pR="@firebase/app-check",mR="@firebase/auth",gR="@firebase/auth-compat",_R="@firebase/database",yR="@firebase/database-compat",vR="@firebase/functions",ER="@firebase/functions-compat",wR="@firebase/installations",IR="@firebase/installations-compat",bR="@firebase/messaging",TR="@firebase/messaging-compat",AR="@firebase/performance",CR="@firebase/performance-compat",SR="@firebase/remote-config",RR="@firebase/remote-config-compat",DR="@firebase/storage",PR="@firebase/storage-compat",xR="@firebase/firestore",OR="@firebase/firestore-compat",kR="firebase",NR="10.9.0";var Bt="[DEFAULT]",MR={[Od]:"fire-core",[uR]:"fire-core-compat",[dR]:"fire-analytics",[hR]:"fire-analytics-compat",[pR]:"fire-app-check",[fR]:"fire-app-check-compat",[mR]:"fire-auth",[gR]:"fire-auth-compat",[_R]:"fire-rtdb",[yR]:"fire-rtdb-compat",[vR]:"fire-fn",[ER]:"fire-fn-compat",[wR]:"fire-iid",[IR]:"fire-iid-compat",[bR]:"fire-fcm",[TR]:"fire-fcm-compat",[AR]:"fire-perf",[CR]:"fire-perf-compat",[SR]:"fire-rc",[RR]:"fire-rc-compat",[DR]:"fire-gcs",[PR]:"fire-gcs-compat",[xR]:"fire-fst",[OR]:"fire-fst-compat","fire-js":"fire-js",[kR]:"fire-js-all"};var Ln=new Map,io=new Map;function so(t,e){try{t.container.addComponent(e)}catch(n){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fd(t,e){t.container.addOrOverwriteComponent(e)}function St(t){let e=t.name;if(io.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;io.set(e,t);for(let n of Ln.values())so(n,t);return!0}function oo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qv(t,e,n=Bt){oo(t,e).clearInstance(n)}function FR(){io.clear()}var VR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fn=new It("app","Firebase",VR);var kd=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new st("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}};var pn=NR;function Er(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw fn.create("bad-app-name",{appName:String(r)});if(n||(n=Ed()),!n)throw fn.create("no-options");let s=Ln.get(r);if(s){if(vr(n,s.options)&&vr(i,s.config))return s;throw fn.create("duplicate-app",{appName:r})}let o=new Tc(r);for(let c of io.values())o.addComponent(c);let a=new kd(n,i,o);return Ln.set(r,a),a}function wr(t=Bt){let e=Ln.get(t);if(!e&&t===Bt&&Ed())return Er();if(!e)throw fn.create("no-app",{appName:t});return e}function ao(){return Array.from(Ln.values())}function Cc(t){return p(this,null,function*(){let e=t.name;Ln.has(e)&&(Ln.delete(e),yield Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)})}function me(t,e,n){var i;let r=(i=MR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(a.join(" "));return}St(new st(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Sc(t,e){if(t!==null&&typeof t!="function")throw fn.create("invalid-log-argument");Ov(t,e)}function Rc(t){xv(t)}var LR="firebase-heartbeat-database",jR=1,ro="firebase-heartbeat-store",Pd=null;function Gv(){return Pd||(Pd=jv(LR,jR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw fn.create("idb-open",{originalErrorMessage:t.message})})),Pd}function UR(t){return p(this,null,function*(){try{let n=(yield Gv()).transaction(ro),i=yield n.objectStore(ro).get(Wv(t));return yield n.done,i}catch(e){if(e instanceof ht)pi.warn(e.message);else{let n=fn.create("idb-get",{originalErrorMessage:e?.message});pi.warn(n.message)}}})}function Bv(t,e){return p(this,null,function*(){try{let i=(yield Gv()).transaction(ro,"readwrite");yield i.objectStore(ro).put(e,Wv(t)),yield i.done}catch(n){if(n instanceof ht)pi.warn(n.message);else{let i=fn.create("idb-set",{originalErrorMessage:n?.message});pi.warn(i.message)}}})}function Wv(t){return`${t.name}!${t.options.appId}`}var BR=1024,$R=30*24*60*60*1e3,Nd=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Md(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$v();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=$R}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=$v(),{heartbeatsToSend:i,unsentEntries:r}=zR(this._heartbeatsCache.heartbeats),s=to(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function $v(){return new Date().toISOString().substring(0,10)}function zR(t,e=BR){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),zv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var Md=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Ic()?Dv().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield UR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function zv(t){return to(JSON.stringify({version:2,heartbeats:t})).length}function qR(t){St(new st("platform-logger",e=>new xd(e),"PRIVATE")),St(new st("heartbeat",e=>new Nd(e),"PRIVATE")),me(Od,Uv,t),me(Od,Uv,"esm2017"),me("fire-js","")}qR("");var GR="firebase",WR="10.9.0";me(GR,WR,"app");var mn=new ds("ANGULARFIRE2_VERSION");function jd(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var lo=(t,e)=>{let n=e?[e]:ao(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},co=class{constructor(){return lo(HR)}},HR="app-check";function Ir(){}var Dc=class{zone;delegate;constructor(e,n=ua){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},Ld=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir)),n.pipe(de({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},uo=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Dc(Zone.current)),this.insideAngular=n.run(()=>new Dc(Zone.current,wg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(g(z))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function KR(t){return Pc().ngZone.runOutsideAngular(()=>t())}function mi(t){return Pc().ngZone.run(()=>t())}function YR(t){return QR(Pc())(t)}function QR(t){return function(n){return n=n.lift(new Ld(t.ngZone)),n.pipe(bu(t.outsideAngular),ss(t.insideAngular))}}var XR=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),mi(()=>t.apply(void 0,i))},Rt=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=mi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir))),i[s]=XR(i[s],n));let r=KR(()=>t.apply(this,i));if(!e)if(r instanceof nt){let s=Pc();return r.pipe(bu(s.outsideAngular),ss(s.insideAngular))}else return mi(()=>r);return r instanceof nt?r.pipe(YR):r instanceof Promise?mi(()=>new Promise((s,o)=>r.then(a=>mi(()=>s(a)),a=>mi(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:mi(()=>r)};var Ud=class{constructor(e,n){this._delegate=e,this.firebase=n,so(e,new st("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Cc(this._delegate)))}_getService(e,n=Bt){var i;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Bt){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){so(this._delegate,e)}_addOrOverwriteComponent(e){Fd(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var JR={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Hv=new It("app-compat","Firebase",JR);function ZR(t){let e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:me,setLogLevel:Rc,onLog:Sc,apps:null,SDK_VERSION:pn,INTERNAL:{registerComponent:a,removeApp:i,useAsService:c,modularAPIs:Vd}};n.default=n,Object.defineProperty(n,"apps",{get:o});function i(l){delete e[l]}function r(l){if(l=l||Bt,!wd(e,l))throw Hv.create("no-app",{appName:l});return e[l]}r.App=t;function s(l,u={}){let h=Er(l,u);if(wd(e,h.name))return e[h.name];let d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(l=>e[l])}function a(l){let u=l.name,h=u.replace("-compat","");if(St(l)&&l.type==="PUBLIC"){let d=(f=r())=>{if(typeof f[h]!="function")throw Hv.create("invalid-app-argument",{appName:u});return f[h]()};l.serviceProps!==void 0&&no(d,l.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,u).apply(this,l.multipleInstances?f:[])}}return l.type==="PUBLIC"?n[h]:null}function c(l,u){return u==="serverAuth"?null:u}return n}function Yv(){let t=ZR(Ud);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Yv,extendNamespace:e,createSubscribe:bc,ErrorFactory:It,deepExtend:no});function e(n){no(t,n)}return t}var eD=Yv();var Kv=new jt("@firebase/app-compat"),tD="@firebase/app-compat",nD="0.2.29";function iD(t){me(tD,nD,t)}if(Av()&&self.firebase!==void 0){Kv.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Kv.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var gn=eD;iD();var rD="firebase",sD="10.9.0";gn.registerVersion(rD,sD,"app-compat");var xc=class{constructor(e){return e}},Qv=new I("angularfire2.app.options"),Xv=new I("angularfire2.app.name");function oD(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let o=gn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>gn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;aD("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new xc(o)}var aD=(t,...e)=>{ps()&&typeof console<"u"&&console[t](...e)},cD={provide:xc,useFactory:oD,deps:[Qv,z,[new ct,Xv]]},Jv=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:Qv,useValue:n},{provide:Xv,useValue:i}]}}constructor(n){gn.registerVersion("angularfire",mn.full,"core"),gn.registerVersion("angularfire",mn.full,"app-compat"),gn.registerVersion("angular",Ea.full,n.toString())}static \u0275fac=function(i){return new(i||t)(g(At))};static \u0275mod=ue({type:t});static \u0275inj=he({providers:[cD]})}return t})();var ZL=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];var gi=class{constructor(e){return e}},ho=class{constructor(){return ao()}};function lD(t){return t&&t.length===1?t[0]:new gi(wr())}var Bd=new I("angularfire2._apps"),uD={provide:gi,useFactory:lD,deps:[[new ct,Bd]]},hD={provide:ho,deps:[[new ct,Bd]]};function dD(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new gi(i)}}var fD=(()=>{class t{constructor(n){me("angularfire",mn.full,"core"),me("angularfire",mn.full,"app"),me("angular",Ea.full,n.toString())}static \u0275fac=function(i){return new(i||t)(g(At))};static \u0275mod=ue({type:t});static \u0275inj=he({providers:[uD,hD]})}return t})();function Zv(t,...e){return{ngModule:fD,providers:[{provide:Bd,useFactory:dD(t),multi:!0,deps:[z,Ae,uo,...e]}]}}var eE=Rt(Er,!0);function aE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var cE=aE,lE=new It("auth","Firebase",aE());var Nc=new jt("@firebase/auth");function mD(t,...e){Nc.logLevel<=G.WARN&&Nc.warn(`Auth (${pn}): ${t}`,...e)}function kc(t,...e){Nc.logLevel<=G.ERROR&&Nc.error(`Auth (${pn}): ${t}`,...e)}function tE(t,...e){throw Zd(t,...e)}function Jd(t,...e){return Zd(t,...e)}function gD(t,e,n){let i=Object.assign(Object.assign({},cE()),{[e]:n});return new It("auth","Firebase",i).create(e,{appName:t.name})}function Zd(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return lE.create(t,...e)}function ne(t,e,...n){if(!t)throw Zd(e,...n)}function fo(t){let e="INTERNAL ASSERTION FAILED: "+t;throw kc(e),new Error(e)}function Mc(t,e){t||fo(e)}function _D(){return nE()==="http:"||nE()==="https:"}function nE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function yD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_D()||Cv()||"connection"in navigator)?navigator.onLine:!0}function vD(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var yi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mc(n>e,"Short delay should be less than long delay!"),this.isMobile=Tv()||Sv()}get(){return yD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ED(t,e){Mc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Fc=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var wD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ID=new yi(3e4,6e4);function uE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function zc(s,o,a,c){return p(this,arguments,function*(t,e,n,i,r={}){return hE(t,r,()=>p(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let h=Id(Object.assign({key:t.config.apiKey},u)).slice(1),d=yield t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),Fc.fetch()(dE(t,t.config.apiHost,n,h),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},l))}))})}function hE(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},wD),e);try{let r=new qd(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Oc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Oc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Oc(t,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw gD(t,u,l);tE(t,u)}}catch(r){if(r instanceof ht)throw r;tE(t,"network-request-failed",{message:String(r)})}})}function dE(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?ED(t.config,r):`${t.config.apiScheme}://${r}`}var qd=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Jd(this.auth,"network-request-failed")),ID.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Oc(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=Jd(t,e,i);return r.customData._tokenResponse=n,r}function bD(t,e){return p(this,null,function*(){return zc(t,"POST","/v1/accounts:delete",e)})}function TD(t,e){return p(this,null,function*(){return zc(t,"POST","/v1/accounts:lookup",e)})}function po(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ef(t,e=!1){return p(this,null,function*(){let n=bt(t),i=yield n.getIdToken(e),r=fE(i);ne(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:po($d(r.auth_time)),issuedAtTime:po($d(r.iat)),expirationTime:po($d(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function $d(t){return Number(t)*1e3}function fE(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return kc("JWT malformed, contained fewer than 3 sections"),null;try{let r=vd(n);return r?JSON.parse(r):(kc("Failed to decode base64 JWT payload"),null)}catch(r){return kc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function AD(t){let e=fE(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gd(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof ht&&CD(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function CD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Wd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=po(this.lastLoginAt),this.creationTime=po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Lc(t){return p(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Gd(t,TD(n,{idToken:i}));ne(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?RD(s.providerUserInfo):[],a=SD(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)})}function tf(t){return p(this,null,function*(){let e=bt(t);yield Lc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function SD(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function RD(t){return t.map(e=>{var{providerId:n}=e,i=Iu(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function DD(t,e){return p(this,null,function*(){let n=yield hE(t,{},()=>p(this,null,function*(){let i=Id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=dE(t,r,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Fc.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function PD(t,e){return p(this,null,function*(){return zc(t,"POST","/v2/accounts:revokeToken",uE(t,e))})}var jc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return ne(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield DD(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(ne(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ne(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return fo("not implemented")}};function jn(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Uc=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Iu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield Gd(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ef(this,e)}reload(){return tf(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Lc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield Gd(this,bD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,c,l,u;let h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,O=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,q=(l=n.createdAt)!==null&&l!==void 0?l:void 0,re=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:Ee,emailVerified:Ge,isAnonymous:Nt,providerData:xe,stsTokenManager:en}=n;ne(Ee&&en,e,"internal-error");let Li=jc.fromJSON(this.name,en);ne(typeof Ee=="string",e,"internal-error"),jn(h,e.name),jn(d,e.name),ne(typeof Ge=="boolean",e,"internal-error"),ne(typeof Nt=="boolean",e,"internal-error"),jn(f,e.name),jn(R,e.name),jn(O,e.name),jn(x,e.name),jn(q,e.name),jn(re,e.name);let rs=new t({uid:Ee,auth:e,email:d,emailVerified:Ge,displayName:h,isAnonymous:Nt,photoURL:R,phoneNumber:f,tenantId:O,stsTokenManager:Li,createdAt:q,lastLoginAt:re});return xe&&Array.isArray(xe)&&(rs.providerData=xe.map(la=>Object.assign({},la))),x&&(rs._redirectEventId=x),rs}static _fromIdTokenResponse(e,n,i=!1){return p(this,null,function*(){let r=new jc;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Lc(s),s})}};var iE=new Map;function _i(t){Mc(t instanceof Function,"Expected a class definition");let e=iE.get(t);return e?(Mc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iE.set(t,e),e)}var xD=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,i){return p(this,null,function*(){this.storage[n]=i})}_get(n){return p(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),Hd=xD;function zd(t,e,n){return`firebase:${t}:${e}:${n}`}var Bc=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=zd(this.userKey,r.apiKey,s),this.fullPersistenceKey=zd("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Uc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return p(this,null,function*(){if(!n.length)return new t(_i(Hd),e,i);let r=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||_i(Hd),o=zd(i,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let h=Uc._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,i))})}};function rE(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VD(e))return"Blackberry";if(LD(e))return"Webos";if(kD(e))return"Safari";if((e.includes("chrome/")||ND(e))&&!e.includes("edge/"))return"Chrome";if(FD(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function OD(t=Ke()){return/firefox\//i.test(t)}function kD(t=Ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ND(t=Ke()){return/crios\//i.test(t)}function MD(t=Ke()){return/iemobile/i.test(t)}function FD(t=Ke()){return/android/i.test(t)}function VD(t=Ke()){return/blackberry/i.test(t)}function LD(t=Ke()){return/webos/i.test(t)}function pE(t,e=[]){let n;switch(t){case"Browser":n=rE(Ke());break;case"Worker":n=`${rE(Ke())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pn}/${i}`}var Kd=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function jD(n){return p(this,arguments,function*(t,e={}){return zc(t,"GET","/v2/passwordPolicy",uE(t,e))})}var UD=6,Yd=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:UD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Qd=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $c(this),this.idTokenSubscription=new $c(this),this.beforeStateQueue=new Kd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_i(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Bc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Lc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=vD()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?bt(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(_i(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield jD(this),n=new Yd(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new It("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield PD(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&_i(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=yield Bc.create(this,[_i(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&mD(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function BD(t){return bt(t)}var $c=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=bc(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $D={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zD(t){$D=t}function qD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function GD(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(_i);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}var _j=qD("rcb"),yj=new yi(3e4,6e4);var vj=new yi(2e3,1e4);var Ej=10*60*1e3;var wj=new yi(3e4,6e4);var Ij=new yi(5e3,15e3);var bj=encodeURIComponent("fac");var sE="@firebase/auth",oE="1.6.2";var Xd=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function WD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HD(t){St(new st("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pE(t)},l=new Qd(i,r,s,c);return GD(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),St(new st("auth-internal",e=>{let n=BD(e.getProvider("auth").getImmediate());return(i=>new Xd(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),me(sE,oE,WD(t)),me(sE,oE,"esm2017")}var KD=5*60,Tj=Iv("authIdTokenMaxAge")||KD;function YD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zD({loadJS(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=Jd("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",YD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HD("Browser");var KP="auth";var qc=class{constructor(){return lo(KP)}};var YP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pt={},A,Tf=Tf||{},L=YP||self;function rl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ro(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function QP(t){return Object.prototype.hasOwnProperty.call(t,nf)&&t[nf]||(t[nf]=++XP)}var nf="closure_uid_"+(1e9*Math.random()>>>0),XP=0;function JP(t,e,n){return t.call.apply(t.bind,arguments)}function ZP(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Ye(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ye=JP:Ye=ZP,Ye.apply(null,arguments)}function Gc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Ve(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Un(){this.s=this.s,this.o=this.o}var ex=0;Un.prototype.s=!1;Un.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ex!=0)&&QP(this)};Un.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var SE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Af(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function mE(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(rl(i)){let r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function Qe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var tx=function(){if(!L.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};L.addEventListener("test",n,e),L.removeEventListener("test",n,e)}catch{}return t}();function Eo(t){return/^[\s\xa0]*$/.test(t)}function sl(){var t=L.navigator;return t&&(t=t.userAgent)?t:""}function $t(t){return sl().indexOf(t)!=-1}function Cf(t){return Cf[" "](t),t}Cf[" "]=function(){};function nx(t,e){var n=qx;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var ix=$t("Opera"),Cr=$t("Trident")||$t("MSIE"),RE=$t("Edge"),cf=RE||Cr,DE=$t("Gecko")&&!(sl().toLowerCase().indexOf("webkit")!=-1&&!$t("Edge"))&&!($t("Trident")||$t("MSIE"))&&!$t("Edge"),rx=sl().toLowerCase().indexOf("webkit")!=-1&&!$t("Edge");function PE(){var t=L.document;return t?t.documentMode:void 0}var lf;e:{if(Wc="",Hc=function(){var t=sl();if(DE)return/rv:([^\);]+)(\)|;)/.exec(t);if(RE)return/Edge\/([\d\.]+)/.exec(t);if(Cr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(rx)return/WebKit\/(\S+)/.exec(t);if(ix)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Hc&&(Wc=Hc?Hc[1]:""),Cr&&(Kc=PE(),Kc!=null&&Kc>parseFloat(Wc))){lf=String(Kc);break e}lf=Wc}var Wc,Hc,Kc,uf;L.document&&Cr?(rf=PE(),uf=rf||parseInt(lf,10)||void 0):uf=void 0;var rf,sx=uf;function wo(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(DE){e:{try{Cf(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ox[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&wo.$.h.call(this)}}Ve(wo,Qe);var ox={2:"touch",3:"pen",4:"mouse"};wo.prototype.h=function(){wo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Do="closure_listenable_"+(1e6*Math.random()|0),ax=0;function cx(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++ax,this.fa=this.ia=!1}function ol(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Sf(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function lx(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function xE(t){let e={};for(let n in t)e[n]=t[n];return e}var gE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function OE(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<gE.length;s++)n=gE[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function al(t){this.src=t,this.g={},this.h=0}al.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=df(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new cx(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function hf(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=SE(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(ol(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function df(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var Rf="closure_lm_"+(1e6*Math.random()|0),sf={};function kE(t,e,n,i,r){if(i&&i.once)return ME(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kE(t,e[s],n,i,r);return null}return n=xf(n),t&&t[Do]?t.O(e,n,Ro(i)?!!i.capture:!!i,r):NE(t,e,n,!1,i,r)}function NE(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Ro(r)?!!r.capture:!!r,a=Pf(t);if(a||(t[Rf]=a=new al(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=ux(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)tx||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(VE(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function ux(){function t(n){return e.call(t.src,t.listener,n)}let e=hx;return t}function ME(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ME(t,e[s],n,i,r);return null}return n=xf(n),t&&t[Do]?t.P(e,n,Ro(i)?!!i.capture:!!i,r):NE(t,e,n,!0,i,r)}function FE(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)FE(t,e[s],n,i,r);else i=Ro(i)?!!i.capture:!!i,n=xf(n),t&&t[Do]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=df(s,n,i,r),-1<n&&(ol(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Pf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=df(e,n,i,r)),(n=-1<t?e[t]:null)&&Df(n))}function Df(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Do])hf(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(VE(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Pf(e))?(hf(n,t),n.h==0&&(n.src=null,e[Rf]=null)):ol(t)}}}function VE(t){return t in sf?sf[t]:sf[t]="on"+t}function hx(t,e){if(t.fa)t=!0;else{e=new wo(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Df(t),t=n.call(i,e)}return t}function Pf(t){return t=t[Rf],t instanceof al?t:null}var of="__closure_events_fn_"+(1e9*Math.random()>>>0);function xf(t){return typeof t=="function"?t:(t[of]||(t[of]=function(e){return t.handleEvent(e)}),t[of])}function Fe(){Un.call(this),this.i=new al(this),this.S=this,this.J=null}Ve(Fe,Un);Fe.prototype[Do]=!0;Fe.prototype.removeEventListener=function(t,e,n,i){FE(this,t,e,n,i)};function ze(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Qe(e,t);else if(e instanceof Qe)e.target=e.target||t;else{var r=e;e=new Qe(i,t),OE(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Yc(o,i,!0,e)&&r}if(o=e.g=t,r=Yc(o,i,!0,e)&&r,r=Yc(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Yc(o,i,!1,e)&&r}Fe.prototype.N=function(){if(Fe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)ol(n[i]);delete t.g[e],t.h--}}this.J=null};Fe.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Fe.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Yc(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&hf(t.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Of=L.JSON.stringify,ff=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function dx(){var t=kf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var pf=class{constructor(){this.h=this.g=null}add(e,n){let i=LE.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},LE=new ff(()=>new mf,t=>t.reset()),mf=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function fx(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function px(t){L.setTimeout(()=>{throw t},0)}var Io,bo=!1,kf=new pf,jE=()=>{let t=L.Promise.resolve(void 0);Io=()=>{t.then(mx)}},mx=()=>{for(var t;t=dx();){try{t.h.call(t.g)}catch(n){px(n)}var e=LE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}bo=!1};function cl(t,e){Fe.call(this),this.h=t||1,this.g=e||L,this.j=Ye(this.qb,this),this.l=Date.now()}Ve(cl,Fe);A=cl.prototype;A.ga=!1;A.T=null;A.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ze(this,"tick"),this.ga&&(Nf(this),this.start()))}};A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Nf(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}A.N=function(){cl.$.N.call(this),Nf(this),delete this.g};function Mf(t,e,n){if(typeof t=="function")n&&(t=Ye(t,n));else if(t&&typeof t.handleEvent=="function")t=Ye(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:L.setTimeout(t,e||0)}function UE(t){t.g=Mf(()=>{t.g=null,t.i&&(t.i=!1,UE(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var gf=class extends Un{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:UE(this)}N(){super.N(),this.g&&(L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function To(t){Un.call(this),this.h=t,this.g={}}Ve(To,Un);var _E=[];function BE(t,e,n,i){Array.isArray(n)||(n&&(_E[0]=n.toString()),n=_E);for(var r=0;r<n.length;r++){var s=kE(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function $E(t){Sf(t.g,function(e,n){this.g.hasOwnProperty(n)&&Df(e)},t),t.g={}}To.prototype.N=function(){To.$.N.call(this),$E(this)};To.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ll(){this.g=!0}ll.prototype.Ea=function(){this.g=!1};function gx(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function _x(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function Tr(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+vx(t,n)+(i?" "+i:"")})}function yx(t,e){t.info(function(){return"TIMEOUT: "+e})}ll.prototype.info=function(){};function vx(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Of(n)}catch{return e}}var Ii={},yE=null;function ul(){return yE=yE||new Fe}Ii.Ta="serverreachability";function zE(t){Qe.call(this,Ii.Ta,t)}Ve(zE,Qe);function Ao(t){let e=ul();ze(e,new zE(e))}Ii.STAT_EVENT="statevent";function qE(t,e){Qe.call(this,Ii.STAT_EVENT,t),this.stat=e}Ve(qE,Qe);function et(t){let e=ul();ze(e,new qE(e,t))}Ii.Ua="timingevent";function GE(t,e){Qe.call(this,Ii.Ua,t),this.size=e}Ve(GE,Qe);function Po(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return L.setTimeout(function(){t()},e)}var hl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},WE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ff(){}Ff.prototype.h=null;function vE(t){return t.h||(t.h=t.i())}function HE(){}var xo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Vf(){Qe.call(this,"d")}Ve(Vf,Qe);function Lf(){Qe.call(this,"c")}Ve(Lf,Qe);var _f;function dl(){}Ve(dl,Ff);dl.prototype.g=function(){return new XMLHttpRequest};dl.prototype.i=function(){return{}};_f=new dl;function Oo(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new To(this),this.P=Ex,t=cf?125:void 0,this.V=new cl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new KE}function KE(){this.i=null,this.g="",this.h=!1}var Ex=45e3,YE={},yf={};A=Oo.prototype;A.setTimeout=function(t){this.P=t};function vf(t,e,n){t.L=1,t.A=pl(yn(e)),t.u=n,t.S=!0,QE(t,null)}function QE(t,e){t.G=Date.now(),ko(t),t.B=yn(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),rw(n.i,"t",i),t.o=0,n=t.l.J,t.h=new KE,t.g=Aw(t.l,n?e:null,!t.u),0<t.O&&(t.M=new gf(Ye(t.Pa,t,t.g),t.O)),BE(t.U,t.g,"readystatechange",t.nb),e=t.I?xE(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ao(),gx(t.j,t.v,t.B,t.m,t.W,t.u)}A.nb=function(t){t=t.target;let e=this.M;e&&zt(t)==3?e.l():this.Pa(t)};A.Pa=function(t){try{if(t==this.g)e:{let u=zt(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>u)&&(u!=3||cf||this.g&&(this.h.h||this.g.ja()||bE(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Ao(3):Ao(2)),fl(this);var n=this.g.da();this.ca=n;t:if(XE(this)){var i=bE(this.g);t="";var r=i.length,s=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),vo(this);var o="";break t}this.h.i=new L.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,_x(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Eo(a)){var l=a;break t}}l=null}if(n=l)Tr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ef(this,n);else{this.i=!1,this.s=3,et(12),vi(this),vo(this);break e}}this.S?(JE(this,u,o),cf&&this.i&&u==3&&(BE(this.U,this.V,"tick",this.mb),this.V.start())):(Tr(this.j,this.m,o,null),Ef(this,o)),u==4&&vi(this),this.i&&!this.J&&(u==4?ww(this.l,this):(this.i=!1,ko(this)))}else Bx(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),vi(this),vo(this)}}}catch{}finally{}};function XE(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function JE(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=wx(t,n),r==yf){e==4&&(t.s=4,et(14),i=!1),Tr(t.j,t.m,null,"[Incomplete Response]");break}else if(r==YE){t.s=4,et(15),Tr(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Tr(t.j,t.m,r,null),Ef(t,r);XE(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,et(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),qf(e),e.M=!0,et(11))):(Tr(t.j,t.m,n,"[Invalid Chunked Response]"),vi(t),vo(t))}A.mb=function(){if(this.g){var t=zt(this.g),e=this.g.ja();this.o<e.length&&(fl(this),JE(this,t,e),this.i&&t!=4&&ko(this))}};function wx(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?yf:(n=Number(e.substring(n,i)),isNaN(n)?YE:(i+=1,i+n>e.length?yf:(e=e.slice(i,i+n),t.o=i+n,e)))}A.cancel=function(){this.J=!0,vi(this)};function ko(t){t.Y=Date.now()+t.P,ZE(t,t.P)}function ZE(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Po(Ye(t.lb,t),e)}function fl(t){t.C&&(L.clearTimeout(t.C),t.C=null)}A.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(yx(this.j,this.B),this.L!=2&&(Ao(),et(17)),vi(this),this.s=2,vo(this)):ZE(this,this.Y-t)};function vo(t){t.l.H==0||t.J||ww(t.l,t)}function vi(t){fl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Nf(t.V),$E(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ef(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||wf(n.i,t))){if(!t.K&&wf(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)el(n),_l(n);else break e;zf(n),et(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=Po(Ye(n.ib,n),6e3));if(1>=aw(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ei(n,11)}else if((t.K||n.g==t)&&el(n),!Eo(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let d=l[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let R=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(R){var s=i.i;s.g||R.indexOf("spdy")==-1&&R.indexOf("quic")==-1&&R.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(jf(s,s.h),s.h=null))}if(i.F){let O=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;O&&(i.Da=O,ce(i.I,i.F,O))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=Tw(i,i.J?i.pa:null,i.Y),o.K){cw(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(fl(a),ko(a)),i.g=o}else vw(i);0<n.j.length&&yl(n)}else l[0]!="stop"&&l[0]!="close"||Ei(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Ei(n,7):$f(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Ao(4)}catch{}}function Ix(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(rl(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function bx(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(rl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function ew(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(rl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=bx(t),i=Ix(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var tw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tx(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function wi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof wi){this.h=t.h,Jc(this,t.j),this.s=t.s,this.g=t.g,Zc(this,t.m),this.l=t.l;var e=t.i,n=new Co;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),EE(this,n),this.o=t.o}else t&&(e=String(t).match(tw))?(this.h=!1,Jc(this,e[1]||"",!0),this.s=_o(e[2]||""),this.g=_o(e[3]||"",!0),Zc(this,e[4]),this.l=_o(e[5]||"",!0),EE(this,e[6]||"",!0),this.o=_o(e[7]||"")):(this.h=!1,this.i=new Co(null,this.h))}wi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(yo(e,wE,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(yo(e,wE,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(yo(n,n.charAt(0)=="/"?Sx:Cx,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",yo(n,Dx)),t.join("")};function yn(t){return new wi(t)}function Jc(t,e,n){t.j=n?_o(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Zc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function EE(t,e,n){e instanceof Co?(t.i=e,Px(t.i,t.h)):(n||(e=yo(e,Rx)),t.i=new Co(e,t.h))}function ce(t,e,n){t.i.set(e,n)}function pl(t){return ce(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function _o(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Ax),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ax(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var wE=/[#\/\?@]/g,Cx=/[#\?:]/g,Sx=/[#\?]/g,Rx=/[#\?@]/g,Dx=/#/g;function Co(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bn(t){t.g||(t.g=new Map,t.h=0,t.i&&Tx(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}A=Co.prototype;A.add=function(t,e){Bn(this),this.i=null,t=Sr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nw(t,e){Bn(t),e=Sr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function iw(t,e){return Bn(t),e=Sr(t,e),t.g.has(e)}A.forEach=function(t,e){Bn(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};A.ta=function(){Bn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};A.Z=function(t){Bn(this);let e=[];if(typeof t=="string")iw(this,t)&&(e=e.concat(this.g.get(Sr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};A.set=function(t,e){return Bn(this),this.i=null,t=Sr(this,t),iw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};A.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function rw(t,e,n){nw(t,e),0<n.length&&(t.i=null,t.g.set(Sr(t,e),Af(n)),t.h+=n.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function Sr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Px(t,e){e&&!t.j&&(Bn(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(nw(this,i),rw(this,r,n))},t)),t.j=e}var xx=class{constructor(t,e){this.g=t,this.map=e}};function sw(t){this.l=t||Ox,L.PerformanceNavigationTiming?(t=L.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(L.g&&L.g.Ka&&L.g.Ka()&&L.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ox=10;function ow(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function aw(t){return t.h?1:t.g?t.g.size:0}function wf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function jf(t,e){t.g?t.g.add(e):t.h=e}function cw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sw.prototype.cancel=function(){if(this.i=lw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function lw(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Af(t.i)}var kx=class{stringify(t){return L.JSON.stringify(t,void 0)}parse(t){return L.JSON.parse(t,void 0)}};function Nx(){this.g=new kx}function Mx(t,e,n){let i=n||"";try{ew(t,function(r,s){let o=r;Ro(r)&&(o=Of(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Fx(t,e){let n=new ll;if(L.Image){let i=new Image;i.onload=Gc(Qc,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Gc(Qc,n,i,"TestLoadImage: error",!1,e),i.onabort=Gc(Qc,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Gc(Qc,n,i,"TestLoadImage: timeout",!1,e),L.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Qc(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function No(t){this.l=t.ec||null,this.j=t.ob||!1}Ve(No,Ff);No.prototype.g=function(){return new ml(this.l,this.j)};No.prototype.i=function(t){return function(){return t}}({});function ml(t,e){Fe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Uf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ve(ml,Fe);var Uf=0;A=ml.prototype;A.open=function(t,e){if(this.readyState!=Uf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,So(this)};A.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||L).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=Uf};A.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,So(this)),this.g&&(this.readyState=3,So(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof L.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uw(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function uw(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}A.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Mo(this):So(this),this.readyState==3&&uw(this)}};A.Za=function(t){this.g&&(this.response=this.responseText=t,Mo(this))};A.Ya=function(t){this.g&&(this.response=t,Mo(this))};A.ka=function(){this.g&&Mo(this)};function Mo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,So(t)}A.setRequestHeader=function(t,e){this.v.append(t,e)};A.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function So(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Vx=L.JSON.parse;function ge(t){Fe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hw,this.L=this.M=!1}Ve(ge,Fe);var hw="",Lx=/^https?$/i,jx=["POST","PUT"];A=ge.prototype;A.Oa=function(t){this.M=t};A.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_f.g(),this.C=this.u?vE(this.u):vE(_f),this.g.onreadystatechange=Ye(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){IE(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=L.FormData&&t instanceof L.FormData,!(0<=SE(jx,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{pw(this),0<this.B&&((this.L=Ux(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ye(this.ua,this)):this.A=Mf(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){IE(this,s)}};function Ux(t){return Cr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}A.ua=function(){typeof Tf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ze(this,"timeout"),this.abort(8))};function IE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,dw(t),gl(t)}function dw(t){t.F||(t.F=!0,ze(t,"complete"),ze(t,"error"))}A.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ze(this,"complete"),ze(this,"abort"),gl(this))};A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gl(this,!0)),ge.$.N.call(this)};A.La=function(){this.s||(this.G||this.v||this.l?fw(this):this.kb())};A.kb=function(){fw(this)};function fw(t){if(t.h&&typeof Tf<"u"&&(!t.C[1]||zt(t)!=4||t.da()!=2)){if(t.v&&zt(t)==4)Mf(t.La,0,t);else if(ze(t,"readystatechange"),zt(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(tw)[1]||null;!r&&L.self&&L.self.location&&(r=L.self.location.protocol.slice(0,-1)),i=!Lx.test(r?r.toLowerCase():"")}n=i}if(n)ze(t,"complete"),ze(t,"success");else{t.m=6;try{var s=2<zt(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",dw(t)}}finally{gl(t)}}}}function gl(t,e){if(t.g){pw(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ze(t,"ready");try{n.onreadystatechange=i}catch{}}}function pw(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(L.clearTimeout(t.A),t.A=null)}A.isActive=function(){return!!this.g};function zt(t){return t.g?t.g.readyState:0}A.da=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}};A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Vx(e)}};function bE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case hw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Bx(t){let e={};t=(t.g&&2<=zt(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Eo(t[i]))continue;var n=fx(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[r]||[];e[r]=s,s.push(n)}lx(e,function(i){return i.join(", ")})}A.Ia=function(){return this.m};A.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function mw(t){let e="";return Sf(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Bf(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=mw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ce(t,e,n))}function mo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gw(t){this.Ga=0,this.j=[],this.l=new ll,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=mo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=mo("baseRetryDelayMs",5e3,t),this.hb=mo("retryDelaySeedMs",1e4,t),this.eb=mo("forwardChannelMaxRetries",2,t),this.xa=mo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new sw(t&&t.concurrentRequestLimit),this.Ja=new Nx,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}A=gw.prototype;A.ra=8;A.H=1;function $f(t){if(_w(t),t.H==3){var e=t.W++,n=yn(t.I);if(ce(n,"SID",t.K),ce(n,"RID",e),ce(n,"TYPE","terminate"),Fo(t,n),e=new Oo(t,t.l,e),e.L=2,e.A=pl(yn(n)),n=!1,L.navigator&&L.navigator.sendBeacon)try{n=L.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&L.Image&&(new Image().src=e.A,n=!0),n||(e.g=Aw(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ko(e)}bw(t)}function _l(t){t.g&&(qf(t),t.g.cancel(),t.g=null)}function _w(t){_l(t),t.u&&(L.clearTimeout(t.u),t.u=null),el(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&L.clearTimeout(t.m),t.m=null)}function yl(t){if(!ow(t.i)&&!t.m){t.m=!0;var e=t.Na;Io||jE(),bo||(Io(),bo=!0),kf.add(e,t),t.C=0}}function $x(t,e){return aw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Po(Ye(t.Na,t,e),Iw(t,t.C)),t.C++,!0)}A.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new Oo(this,this.l,t),s=this.s;if(this.U&&(s?(s=xE(s),OE(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=yw(this,r,e),n=yn(this.I),ce(n,"RID",t),ce(n,"CVER",22),this.F&&ce(n,"X-HTTP-Session-Id",this.F),Fo(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(mw(s)))+"&"+e:this.o&&Bf(n,this.o,s)),jf(this.i,r),this.bb&&ce(n,"TYPE","init"),this.P?(ce(n,"$req",e),ce(n,"SID","null"),r.aa=!0,vf(r,n,null)):vf(r,n,e),this.H=2}}else this.H==3&&(t?TE(this,t):this.j.length==0||ow(this.i)||TE(this))};function TE(t,e){var n;e?n=e.m:n=t.W++;let i=yn(t.I);ce(i,"SID",t.K),ce(i,"RID",n),ce(i,"AID",t.V),Fo(t,i),t.o&&t.s&&Bf(i,t.o,t.s),n=new Oo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=yw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),jf(t.i,n),vf(n,i,e)}function Fo(t,e){t.na&&Sf(t.na,function(n,i){ce(e,i,n)}),t.h&&ew({},function(n,i){ce(e,i,n)})}function yw(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Ye(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{Mx(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function vw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Io||jE(),bo||(Io(),bo=!0),kf.add(e,t),t.A=0}}function zf(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Po(Ye(t.Ma,t),Iw(t,t.A)),t.A++,!0)}A.Ma=function(){if(this.u=null,Ew(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Po(Ye(this.jb,this),t)}};A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,et(10),_l(this),Ew(this))};function qf(t){t.B!=null&&(L.clearTimeout(t.B),t.B=null)}function Ew(t){t.g=new Oo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=yn(t.wa);ce(e,"RID","rpc"),ce(e,"SID",t.K),ce(e,"AID",t.V),ce(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ce(e,"TO",t.qa),ce(e,"TYPE","xmlhttp"),Fo(t,e),t.o&&t.s&&Bf(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=pl(yn(e)),n.u=null,n.S=!0,QE(n,t)}A.ib=function(){this.v!=null&&(this.v=null,_l(this),zf(this),et(19))};function el(t){t.v!=null&&(L.clearTimeout(t.v),t.v=null)}function ww(t,e){var n=null;if(t.g==e){el(t),qf(t),t.g=null;var i=2}else if(wf(t.i,e))n=e.F,cw(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=ul(),ze(i,new GE(i,n)),yl(t)}else vw(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&$x(t,e)||i==2&&zf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ei(t,5);break;case 4:Ei(t,10);break;case 3:Ei(t,6);break;default:Ei(t,2)}}}function Iw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ei(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Ye(t.pb,t);n||(n=new wi("//www.google.com/images/cleardot.gif"),L.location&&L.location.protocol=="http"||Jc(n,"https"),pl(n)),Fx(n.toString(),i)}else et(2);t.H=0,t.h&&t.h.za(e),bw(t),_w(t)}A.pb=function(t){t?(this.l.info("Successfully pinged google.com"),et(2)):(this.l.info("Failed to ping google.com"),et(1))};function bw(t){if(t.H=0,t.ma=[],t.h){let e=lw(t.i);(e.length!=0||t.j.length!=0)&&(mE(t.ma,e),mE(t.ma,t.j),t.i.i.length=0,Af(t.j),t.j.length=0),t.h.ya()}}function Tw(t,e,n){var i=n instanceof wi?yn(n):new wi(n);if(i.g!="")e&&(i.g=e+"."+i.g),Zc(i,i.m);else{var r=L.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new wi(null);i&&Jc(s,i),e&&(s.g=e),r&&Zc(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&ce(i,n,e),ce(i,"VER",t.ra),Fo(t,i),i}function Aw(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new ge(new No({ob:n})):new ge(t.va),e.Oa(t.J),e}A.isActive=function(){return!!this.h&&this.h.isActive(this)};function Cw(){}A=Cw.prototype;A.Ba=function(){};A.Aa=function(){};A.za=function(){};A.ya=function(){};A.isActive=function(){return!0};A.Va=function(){};function tl(){if(Cr&&!(10<=Number(sx)))throw Error("Environmental error: no available transport.")}tl.prototype.g=function(t,e){return new dt(t,e)};function dt(t,e){Fe.call(this),this.g=new gw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Eo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Eo(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Rr(this)}Ve(dt,Fe);dt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;et(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Tw(t,null,t.Y),yl(t)};dt.prototype.close=function(){$f(this.g)};dt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Of(t),t=n);e.j.push(new xx(e.fb++,t)),e.H==3&&yl(e)};dt.prototype.N=function(){this.g.h=null,delete this.j,$f(this.g),delete this.g,dt.$.N.call(this)};function Sw(t){Vf.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ve(Sw,Vf);function Rw(){Lf.call(this),this.status=1}Ve(Rw,Lf);function Rr(t){this.g=t}Ve(Rr,Cw);Rr.prototype.Ba=function(){ze(this.g,"a")};Rr.prototype.Aa=function(t){ze(this.g,new Sw(t))};Rr.prototype.za=function(t){ze(this.g,new Rw)};Rr.prototype.ya=function(){ze(this.g,"b")};function zx(){this.blockSize=-1}function Dt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ve(Dt,zx);Dt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function af(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Dt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)af(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){af(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){af(this,i),r=0;break}}this.h=r,this.i+=e};Dt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function ie(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var qx={};function Gf(t){return-128<=t&&128>t?nx(t,function(e){return new ie([e|0],0>e?-1:0)}):new ie([t|0],0>t?-1:0)}function qt(t){if(isNaN(t)||!isFinite(t))return Ar;if(0>t)return $e(qt(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=If;return new ie(e,0)}function Dw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return $e(Dw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=qt(Math.pow(e,8)),i=Ar,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=qt(Math.pow(e,s)),i=i.R(s).add(qt(o))):(i=i.R(n),i=i.add(qt(o)))}return i}var If=4294967296,Ar=Gf(0),bf=Gf(1),AE=Gf(16777216);A=ie.prototype;A.ea=function(){if(Tt(this))return-$e(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:If+i)*e,e*=If}return t};A.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(_n(this))return"0";if(Tt(this))return"-"+$e(this).toString(t);for(var e=qt(Math.pow(t,6)),n=this,i="";;){var r=il(n,e).g;n=nl(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,_n(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};A.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function _n(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Tt(t){return t.h==-1}A.X=function(t){return t=nl(this,t),Tt(t)?-1:_n(t)?0:1};function $e(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new ie(n,~t.h).add(bf)}A.abs=function(){return Tt(this)?$e(this):this};A.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new ie(n,n[n.length-1]&-2147483648?-1:0)};function nl(t,e){return t.add($e(e))}A.R=function(t){if(_n(this)||_n(t))return Ar;if(Tt(this))return Tt(t)?$e(this).R($e(t)):$e($e(this).R(t));if(Tt(t))return $e(this.R($e(t)));if(0>this.X(AE)&&0>t.X(AE))return qt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=o*c,Xc(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Xc(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Xc(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Xc(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new ie(n,0)};function Xc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function go(t,e){this.g=t,this.h=e}function il(t,e){if(_n(e))throw Error("division by zero");if(_n(t))return new go(Ar,Ar);if(Tt(t))return e=il($e(t),e),new go($e(e.g),$e(e.h));if(Tt(e))return e=il(t,$e(e)),new go($e(e.g),e.h);if(30<t.g.length){if(Tt(t)||Tt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=bf,i=e;0>=i.X(t);)n=CE(n),i=CE(i);var r=br(n,1),s=br(i,1);for(i=br(i,2),n=br(n,2);!_n(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=br(i,1),n=br(n,1)}return e=nl(t,r.R(e)),new go(r,e)}for(r=Ar;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=qt(n),o=s.R(e);Tt(o)||0<o.X(t);)n-=i,s=qt(n),o=s.R(e);_n(s)&&(s=bf),r=r.add(s),t=nl(t,o)}return new go(r,t)}A.gb=function(t){return il(this,t).h};A.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new ie(n,this.h&t.h)};A.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new ie(n,this.h|t.h)};A.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new ie(n,this.h^t.h)};function CE(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new ie(n,t.h)}function br(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ie(r,t.h)}tl.prototype.createWebChannel=tl.prototype.g;dt.prototype.send=dt.prototype.u;dt.prototype.open=dt.prototype.m;dt.prototype.close=dt.prototype.close;hl.NO_ERROR=0;hl.TIMEOUT=8;hl.HTTP_ERROR=6;WE.COMPLETE="complete";HE.EventType=xo;xo.OPEN="a";xo.CLOSE="b";xo.ERROR="c";xo.MESSAGE="d";Fe.prototype.listen=Fe.prototype.O;ge.prototype.listenOnce=ge.prototype.P;ge.prototype.getLastError=ge.prototype.Sa;ge.prototype.getLastErrorCode=ge.prototype.Ia;ge.prototype.getStatus=ge.prototype.da;ge.prototype.getResponseJson=ge.prototype.Wa;ge.prototype.getResponseText=ge.prototype.ja;ge.prototype.send=ge.prototype.ha;ge.prototype.setWithCredentials=ge.prototype.Oa;Dt.prototype.digest=Dt.prototype.l;Dt.prototype.reset=Dt.prototype.reset;Dt.prototype.update=Dt.prototype.j;ie.prototype.add=ie.prototype.add;ie.prototype.multiply=ie.prototype.R;ie.prototype.modulo=ie.prototype.gb;ie.prototype.compare=ie.prototype.X;ie.prototype.toNumber=ie.prototype.ea;ie.prototype.toString=ie.prototype.toString;ie.prototype.getBits=ie.prototype.D;ie.fromNumber=qt;ie.fromString=Dw;var Pw=Pt.createWebChannelTransport=function(){return new tl},xw=Pt.getStatEventTarget=function(){return ul()},vl=Pt.ErrorCode=hl,Ow=Pt.EventType=WE,kw=Pt.Event=Ii,Wf=Pt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},pU=Pt.FetchXmlHttpFactory=No,Vo=Pt.WebChannel=HE,Nw=Pt.XhrIo=ge,Mw=Pt.Md5=Dt,bi=Pt.Integer=ie;var Fw="@firebase/firestore";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var Kr="10.9.0";var Di=new jt("@firebase/firestore");function Lo(){return Di.logLevel}function C(t,...e){if(Di.logLevel<=G.DEBUG){let n=e.map(Pm);Di.debug(`Firestore (${Kr}): ${t}`,...n)}}function Qt(t,...e){if(Di.logLevel<=G.ERROR){let n=e.map(Pm);Di.error(`Firestore (${Kr}): ${t}`,...n)}}function Mr(t,...e){if(Di.logLevel<=G.WARN){let n=e.map(Pm);Di.warn(`Firestore (${Kr}): ${t}`,...n)}}function Pm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function V(t="Unexpected state"){let e=`FIRESTORE (${Kr}) INTERNAL ASSERTION FAILED: `+t;throw Qt(e),new Error(e)}function ae(t,e){t||V()}function j(t,e){return t}var y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends ht{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ot=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Tl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Xf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Le.UNAUTHENTICATED))}shutdown(){}},Jf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Zf=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),s=new Ot;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ot,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ot)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ae(typeof i.accessToken=="string"),new Tl(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new Le(e)}},ep=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},tp=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new ep(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},np=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ip=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&C("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,C("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string"),this.R=n.token,new np(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Gx(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Al=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Gx(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function Z(t,e){return t<e?-1:t>e?1:0}function Fr(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}var qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var B=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new qe(0,0))}static max(){return new t(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cl=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&V(),i===void 0?i=e.length-n:i>e.length-n&&V(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ye=class t extends Cl{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new k(y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},Wx=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ft=class t extends Cl{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return Wx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new k(y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new k(y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new k(y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var M=class t{constructor(e){this.path=e}static fromPath(e){return new t(ye.fromString(e))}static fromName(e){return new t(ye.fromString(e).popFirst(5))}static empty(){return new t(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ye(e.slice()))}};var rp=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};rp.UNKNOWN_ID=-1;function Hx(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=B.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new Pi(r,M.empty(),e)}function Kx(t){return new Pi(t.readTime,t.key,-1)}var Pi=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(B.min(),M.empty(),-1)}static max(){return new t(B.max(),M.empty(),-1)}};function Yx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}var Qx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ea(t){return p(this,null,function*(){if(t.code!==y.FAILED_PRECONDITION||t.message!==Qx)throw t;C("LocalStore","Unexpectedly lost primary lease")})}var v=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};var op=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ot,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ri(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=xm(i.target.error);this.V.reject(new Ri(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(s){throw new Ri(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(C("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new cp(n)}},Sl=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Ke())===12.2&&Qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return C("SimpleDb","Removing database:",e),Ti(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ic())return!1;if(t.C())return!0;let e=Ke(),n=t.S(e),i=0<n&&n<10,r=t.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return p(this,null,function*(){return this.db||(C("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;n(o)},r.onblocked=()=>{i(new Ri(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new k(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new k(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new Ri(e,o))},r.onupgradeneeded=s=>{C("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{C("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=op.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),v.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(C("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},ap=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ti(this.k.delete())}},Ri=class extends k{constructor(e,n){super(y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ta(t){return t.name==="IndexedDbTransactionError"}var cp=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(C("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(C("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ti(i)}add(e){return C("SimpleDb","ADD",this.store.name,e,e),Ti(this.store.add(e))}get(e){return Ti(this.store.get(e)).next(n=>(n===void 0&&(n=null),C("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return C("SimpleDb","DELETE",this.store.name,e),Ti(this.store.delete(e))}count(){return C("SimpleDb","COUNT",this.store.name),Ti(this.store.count())}W(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new v((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(i),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new v((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,n){C("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.J=!1;let r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.G(r,n)}Z(e){let n=this.cursor({});return new v((i,r)=>{n.onerror=s=>{let o=xm(s.target.error);r(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,n){let i=[];return new v((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let c=new ap(a),l=n(a.primaryKey,a.value,c);if(l instanceof v){let u=l.catch(h=>(c.done(),v.reject(h)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>v.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ti(t){return new v((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=xm(i.target.error);n(r)}})}var Vw=!1;function xm(t){let e=Sl.S(Ke());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vw||(Vw=!0,setTimeout(()=>{throw i},0)),i}}return t}var dI=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function ru(t){return t==null}function qo(t){return t===0&&1/t==-1/0}function Xx(t){return typeof t=="number"&&Number.isInteger(t)&&!qo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Jx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bU=[...Jx,"documentOverlays"],Zx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eO=Zx,TU=[...eO,"indexConfiguration","indexState","indexEntries"];function Lw(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fI(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ve=class t{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Or(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Or(this.root,e,this.comparator,!1)}getReverseIterator(){return new Or(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Or(this.root,e,this.comparator,!0)}},Or=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ht=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();let e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}};Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class t{constructor(e){this.comparator=e,this.data=new ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rl(this.data.getIterator())}getIteratorFrom(e){return new Rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Rl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wt=class t{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new t([])}unionWith(e){let n=new Je(ft.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Dl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var tt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};tt.EMPTY_BYTE_STRING=new tt("");var tO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(t){if(ae(!!t),typeof t=="string"){let e=0,n=tO.exec(t);if(ae(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gn(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}function Om(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function km(t){let e=t.mapValue.fields.__previous_value__;return Om(e)?km(e):e}function Go(t){let e=qn(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var lp=class{constructor(e,n,i,r,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Pl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var El={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:pI(t)?9007199254740991:10:V()}function Xt(t,e){if(t===e)return!0;let n=xi(t);if(n!==xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Go(t).isEqual(Go(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=qn(r.timestampValue),a=qn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Gn(r.bytesValue).isEqual(Gn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return _e(r.geoPointValue.latitude)===_e(s.geoPointValue.latitude)&&_e(r.geoPointValue.longitude)===_e(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return _e(r.integerValue)===_e(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=_e(r.doubleValue),a=_e(s.doubleValue);return o===a?qo(o)===qo(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Fr(t.arrayValue.values||[],e.arrayValue.values||[],Xt);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Lw(o)!==Lw(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Xt(o[c],a[c])))return!1;return!0}(t,e);default:return V()}}function Wo(t,e){return(t.values||[]).find(n=>Xt(n,e))!==void 0}function Vr(t,e){if(t===e)return 0;let n=xi(t),i=xi(e);if(n!==i)return Z(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=_e(s.integerValue||s.doubleValue),c=_e(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return jw(t.timestampValue,e.timestampValue);case 4:return jw(Go(t),Go(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Gn(s),c=Gn(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Z(a[l],c[l]);if(u!==0)return u}return Z(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Z(_e(s.latitude),_e(o.latitude));return a!==0?a:Z(_e(s.longitude),_e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Vr(a[l],c[l]);if(u)return u}return Z(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===El.mapValue&&o===El.mapValue)return 0;if(s===El.mapValue)return 1;if(o===El.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let d=Z(c[h],u[h]);if(d!==0)return d;let f=Vr(a[c[h]],l[u[h]]);if(f!==0)return f}return Z(c.length,u.length)}(t.mapValue,e.mapValue);default:throw V()}}function jw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=qn(t),i=qn(e),r=Z(n.seconds,i.seconds);return r!==0?r:Z(n.nanos,i.nanos)}function Lr(t){return up(t)}function up(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=qn(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return M.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=up(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${up(n.fields[o])}`;return r+"}"}(t.mapValue):V()}function hp(t){return!!t&&"integerValue"in t}function Nm(t){return!!t&&"arrayValue"in t}function Uw(t){return!!t&&"nullValue"in t}function Bw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Il(t){return!!t&&"mapValue"in t}function Uo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Yr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Uo(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var xt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Il(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uo(n)}setAll(e){let n=ft.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Uo(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());Il(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Il(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Yr(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(Uo(this.value))}};function mI(t){let e=[];return Yr(t.fields,(n,i)=>{let r=new ft([n]);if(Il(i)){let s=mI(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Wt(e)}var kt=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,B.min(),B.min(),B.min(),xt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,B.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,B.min(),B.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,B.min(),B.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var jr=class{constructor(e,n){this.position=e,this.inclusive=n}};function $w(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=M.comparator(M.fromName(o.referenceValue),n.key):i=Vr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function zw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xt(t.position[n],e.position[n]))return!1;return!0}var Ur=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function nO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var xl=class{},Pe=class t extends xl{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new fp(e,n,i):n==="array-contains"?new gp(e,i):n==="in"?new _p(e,i):n==="not-in"?new yp(e,i):n==="array-contains-any"?new vp(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new pp(e,i):new mp(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vr(n,this.value)):n!==null&&xi(this.value)===xi(n)&&this.matchesComparison(Vr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Jt=class t extends xl{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return gI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function gI(t){return t.op==="and"}function _I(t){return iO(t)&&gI(t)}function iO(t){for(let e of t.filters)if(e instanceof Jt)return!1;return!0}function dp(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+Lr(t.value);if(_I(t))return t.filters.map(e=>dp(e)).join(",");{let e=t.filters.map(n=>dp(n)).join(",");return`${t.op}(${e})`}}function yI(t,e){return t instanceof Pe?function(i,r){return r instanceof Pe&&i.op===r.op&&i.field.isEqual(r.field)&&Xt(i.value,r.value)}(t,e):t instanceof Jt?function(i,r){return r instanceof Jt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&yI(o,r.filters[a]),!0):!1}(t,e):void V()}function vI(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${Lr(n.value)}`}(t):t instanceof Jt?function(n){return n.op.toString()+" {"+n.getFilters().map(vI).join(" ,")+"}"}(t):"Filter"}var fp=class extends Pe{constructor(e,n,i){super(e,n,i),this.key=M.fromName(i.referenceValue)}matches(e){let n=M.comparator(e.key,this.key);return this.matchesComparison(n)}},pp=class extends Pe{constructor(e,n){super(e,"in",n),this.keys=EI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},mp=class extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=EI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function EI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>M.fromName(i.referenceValue))}var gp=class extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Nm(n)&&Wo(n.arrayValue,this.value)}},_p=class extends Pe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Wo(this.value.arrayValue,n)}},yp=class extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Wo(this.value.arrayValue,n)}},vp=class extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Wo(this.value.arrayValue,i))}};var Ep=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function qw(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Ep(t,e,n,i,r,s,o)}function Mm(t){let e=j(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>dp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Lr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Lr(i)).join(",")),e.ce=n}return e.ce}function Fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zw(t.startAt,e.startAt)&&zw(t.endAt,e.endAt)}function wp(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Br=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function rO(t,e,n,i,r,s,o,a){return new Br(t,e,n,i,r,s,o,a)}function su(t){return new Br(t)}function Gw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sO(t){return t.collectionGroup!==null}function Bo(t){let e=j(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Je(ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ur(s,i))}),n.has(ft.keyField().canonicalString())||e.le.push(new Ur(ft.keyField(),i))}return e.le}function Kt(t){let e=j(t);return e.he||(e.he=oO(e,Bo(t))),e.he}function oO(t,e){if(t.limitType==="F")return qw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Ur(r.field,s)});let n=t.endAt?new jr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new jr(t.startAt.position,t.startAt.inclusive):null;return qw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ip(t,e,n){return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ou(t,e){return Fm(Kt(t),Kt(e))&&t.limitType===e.limitType}function wI(t){return`${Mm(Kt(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>vI(r)).join(", ")}]`),ru(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Lr(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Lr(r)).join(",")),`Target(${i})`}(Kt(t))}; limitType=${t.limitType})`}function au(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):M.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of Bo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=$w(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,Bo(i),r)||i.endAt&&!function(o,a,c){let l=$w(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,Bo(i),r))}(t,e)}function aO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function II(t){return(e,n)=>{let i=!1;for(let r of Bo(t)){let s=cO(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function cO(t,e,n){let i=t.field.isKeyField()?M.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Vr(c,l):V()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return V()}}var Wn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}};var lO=new ve(M.comparator);function En(){return lO}var bI=new ve(M.comparator);function jo(...t){let e=bI;for(let n of t)e=e.insert(n.key,n);return e}function TI(t){let e=bI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ai(){return $o()}function AI(){return $o()}function $o(){return new Wn(t=>t.toString(),(t,e)=>t.isEqual(e))}var uO=new ve(M.comparator),hO=new Je(M.comparator);function K(...t){let e=hO;for(let n of t)e=e.add(n);return e}var dO=new Je(Z);function fO(){return dO}function CI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qo(e)?"-0":e}}function SI(t){return{integerValue:""+t}}function pO(t,e){return Xx(e)?SI(e):CI(t,e)}var $r=class{constructor(){this._=void 0}};function mO(t,e,n){return t instanceof zr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Om(s)&&(s=km(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Oi?DI(t,e):t instanceof ki?PI(t,e):function(r,s){let o=RI(r,s),a=Ww(o)+Ww(r.Ie);return hp(o)&&hp(r.Ie)?SI(a):CI(r.serializer,a)}(t,e)}function gO(t,e,n){return t instanceof Oi?DI(t,e):t instanceof ki?PI(t,e):n}function RI(t,e){return t instanceof qr?function(i){return hp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var zr=class extends $r{},Oi=class extends $r{constructor(e){super(),this.elements=e}};function DI(t,e){let n=xI(e);for(let i of t.elements)n.some(r=>Xt(r,i))||n.push(i);return{arrayValue:{values:n}}}var ki=class extends $r{constructor(e){super(),this.elements=e}};function PI(t,e){let n=xI(e);for(let i of t.elements)n=n.filter(r=>!Xt(r,i));return{arrayValue:{values:n}}}var qr=class extends $r{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function Ww(t){return _e(t.integerValue||t.doubleValue)}function xI(t){return Nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _O(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Oi&&r instanceof Oi||i instanceof ki&&r instanceof ki?Fr(i.elements,r.elements,Xt):i instanceof qr&&r instanceof qr?Xt(i.Ie,r.Ie):i instanceof zr&&r instanceof zr}(t.transform,e.transform)}var bp=class{constructor(e,n){this.version=e,this.transformResults=n}},$n=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Gr=class{};function OI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ol(t.key,$n.none()):new Ni(t.key,t.data,$n.none());{let n=t.data,i=xt.empty(),r=new Je(ft.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new wn(t.key,i,new Wt(r.toArray()),$n.none())}}function yO(t,e,n){t instanceof Ni?function(r,s,o){let a=r.value.clone(),c=Kw(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wn?function(r,s,o){if(!bl(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Kw(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(kI(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zo(t,e,n,i){return t instanceof Ni?function(s,o,a,c){if(!bl(s.precondition,o))return a;let l=s.value.clone(),u=Yw(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof wn?function(s,o,a,c){if(!bl(s.precondition,o))return a;let l=Yw(s.fieldTransforms,c,o),u=o.data;return u.setAll(kI(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,i):function(s,o,a){return bl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function vO(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=RI(i.transform,r||null);s!=null&&(n===null&&(n=xt.empty()),n.set(i.field,s))}return n||null}function Hw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Fr(i,r,(s,o)=>_O(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ni=class extends Gr{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},wn=class extends Gr{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function kI(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function Kw(t,e,n){let i=new Map;ae(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,gO(o,a,n[r]))}return i}function Yw(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,mO(s,o,e))}return i}var Ol=class extends Gr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Tp=class extends Gr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ap=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&yO(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=zo(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=zo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=AI();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let c=OI(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(B.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),K())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,(n,i)=>Hw(n,i))&&Fr(this.baseMutations,e.baseMutations,(n,i)=>Hw(n,i))}},Cp=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ae(e.mutations.length===i.length);let r=function(){return uO}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var Sp=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Rp=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Se,X;function EO(t){switch(t){default:return V();case y.CANCELLED:case y.UNKNOWN:case y.DEADLINE_EXCEEDED:case y.RESOURCE_EXHAUSTED:case y.INTERNAL:case y.UNAVAILABLE:case y.UNAUTHENTICATED:return!1;case y.INVALID_ARGUMENT:case y.NOT_FOUND:case y.ALREADY_EXISTS:case y.PERMISSION_DENIED:case y.FAILED_PRECONDITION:case y.ABORTED:case y.OUT_OF_RANGE:case y.UNIMPLEMENTED:case y.DATA_LOSS:return!0}}function NI(t){if(t===void 0)return Qt("GRPC error has no .code"),y.UNKNOWN;switch(t){case Se.OK:return y.OK;case Se.CANCELLED:return y.CANCELLED;case Se.UNKNOWN:return y.UNKNOWN;case Se.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case Se.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case Se.INTERNAL:return y.INTERNAL;case Se.UNAVAILABLE:return y.UNAVAILABLE;case Se.UNAUTHENTICATED:return y.UNAUTHENTICATED;case Se.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case Se.NOT_FOUND:return y.NOT_FOUND;case Se.ALREADY_EXISTS:return y.ALREADY_EXISTS;case Se.PERMISSION_DENIED:return y.PERMISSION_DENIED;case Se.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case Se.ABORTED:return y.ABORTED;case Se.OUT_OF_RANGE:return y.OUT_OF_RANGE;case Se.UNIMPLEMENTED:return y.UNIMPLEMENTED;case Se.DATA_LOSS:return y.DATA_LOSS;default:return V()}}(X=Se||(Se={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var Qw=null;function wO(){return new TextEncoder}var IO=new bi([4294967295,4294967295],0);function Xw(t){let e=wO().encode(t),n=new Mw;return n.update(e),new Uint8Array(n.digest())}function Jw(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new bi([n,i],0),new bi([r,s],0)]}var Dp=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ci(`Invalid padding: ${n}`);if(i<0)throw new Ci(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ci(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ci(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=bi.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(bi.fromNumber(i)));return r.compare(IO)===1&&(r=new bi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=Xw(e),[i,r]=Jw(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=Xw(e),[i,r]=Jw(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Ci=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var kl=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Ho.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(B.min(),r,new ve(Z),En(),K())}},Ho=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,K(),K(),K())}};var kr=class{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}},Nl=class{constructor(e,n){this.targetId=e,this.fe=n}},Ml=class{constructor(e,n,i=tt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Fl=class{constructor(){this.ge=0,this.pe=eI(),this.ye=tt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=K(),n=K(),i=K();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:V()}}),new Ho(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=eI()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ae(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},Pp=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=En(),this.Qe=Zw(),this.Ke=new ve(Z)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){let n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){let s=r.target;if(wp(s))if(i===0){let o=new M(s.path);this.We(n,o,kt.newNoDocument(o,B.min()))}else ae(i===1);else{let o=this.Ze(n);if(o!==i){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}Qw?.tt(function(u,h,d,f,R){var O,x,q,re,Ee,Ge;let Nt={localCacheCount:u,existenceFilterCount:h.count,databaseId:d.database,projectId:d.projectId},xe=h.unchangedNames;return xe&&(Nt.bloomFilter={applied:R===0,hashCount:(O=xe?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(re=(q=(x=xe?.bits)===null||x===void 0?void 0:x.bitmap)===null||q===void 0?void 0:q.length)!==null&&re!==void 0?re:0,padding:(Ge=(Ee=xe?.bits)===null||Ee===void 0?void 0:Ee.padding)!==null&&Ge!==void 0?Ge:0,mightContain:en=>{var Li;return(Li=f?.mightContain(en))!==null&&Li!==void 0&&Li}}),Nt}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,a;try{o=Gn(i).toUint8Array()}catch(c){if(c instanceof Dl)return Mr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Dp(o,r,s)}catch(c){return Mr(c instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){let i=this.Be.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),r++)}),r}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&wp(a.target)){let c=new M(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,kt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let i=K();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let r=new kl(e,n,this.Ke,this.qe,i);return this.qe=En(),this.Qe=Zw(),this.Ke=new ve(Z),r}Ue(e,n){if(!this.je(e))return;let i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Fl,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Je(Z),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||C("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Fl),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function Zw(){return new ve(M.comparator)}function eI(){return new ve(M.comparator)}var bO={asc:"ASCENDING",desc:"DESCENDING"},TO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AO={and:"AND",or:"OR"},xp=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Op(t,e){return t.useProto3Json||ru(e)?e:{value:e}}function Vl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CO(t,e){return Vl(t,e.toTimestamp())}function Yt(t){return ae(!!t),B.fromTimestamp(function(n){let i=qn(n);return new qe(i.seconds,i.nanos)}(t))}function Vm(t,e){return kp(t,e).canonicalString()}function kp(t,e){let n=function(r){return new ye(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FI(t){let e=ye.fromString(t);return ae(BI(e)),e}function Np(t,e){return Vm(t.databaseId,e.path)}function Hf(t,e){let n=FI(e);if(n.get(1)!==t.databaseId.projectId)throw new k(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(LI(n))}function VI(t,e){return Vm(t.databaseId,e)}function SO(t){let e=FI(t);return e.length===4?ye.emptyPath():LI(e)}function Mp(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LI(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tI(t,e,n){return{name:Np(t,e),fields:n.value.mapValue.fields}}function RO(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(ae(u===void 0||typeof u=="string"),tt.fromBase64String(u||"")):(ae(u===void 0||u instanceof Uint8Array),tt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?y.UNKNOWN:NI(l.code);return new k(u,l.message||"")}(o);n=new Ml(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Hf(t,i.document.name),s=Yt(i.document.updateTime),o=i.document.createTime?Yt(i.document.createTime):B.min(),a=new xt({mapValue:{fields:i.document.fields}}),c=kt.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new kr(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Hf(t,i.document),s=i.readTime?Yt(i.readTime):B.min(),o=kt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new kr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Hf(t,i.document),s=i.removedTargetIds||[];n=new kr([],s,r,null)}else{if(!("filter"in e))return V();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Rp(r,s),a=i.targetId;n=new Nl(a,o)}}return n}function DO(t,e){let n;if(e instanceof Ni)n={update:tI(t,e.key,e.value)};else if(e instanceof Ol)n={delete:Np(t,e.key)};else if(e instanceof wn)n={update:tI(t,e.key,e.data),updateMask:LO(e.fieldMask)};else{if(!(e instanceof Tp))return V();n={verify:Np(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof zr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ki)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qr)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw V()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:CO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:V()}(t,e.precondition)),n}function PO(t,e){return t&&t.length>0?(ae(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Yt(r.updateTime):Yt(s);return o.isEqual(B.min())&&(o=Yt(s)),new bp(o,r.transformResults||[])}(n,e))):[]}function xO(t,e){return{documents:[VI(t,e.path)]}}function OO(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VI(t,r);let s=function(l){if(l.length!==0)return UI(Jt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:Pr(d.field),direction:MO(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Op(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:r}}function kO(t){let e=SO(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ae(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){let d=jI(h);return d instanceof Jt&&_I(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(R){return new Ur(xr(R.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,ru(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){let d=!!h.before,f=h.values||[];return new jr(f,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){let d=!h.before,f=h.values||[];return new jr(f,d)}(n.endAt)),rO(e,r,o,s,a,"F",c,l)}function NO(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=xr(n.unaryFilter.field);return Pe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=xr(n.unaryFilter.field);return Pe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=xr(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=xr(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(xr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jt.create(n.compositeFilter.filters.map(i=>jI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return V()}}(n.compositeFilter.op))}(t):V()}function MO(t){return bO[t]}function FO(t){return TO[t]}function VO(t){return AO[t]}function Pr(t){return{fieldPath:t.canonicalString()}}function xr(t){return ft.fromServerFormat(t.fieldPath)}function UI(t){return t instanceof Pe?function(n){if(n.op==="=="){if(Bw(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NAN"}};if(Uw(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bw(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NOT_NAN"}};if(Uw(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pr(n.field),op:FO(n.op),value:n.value}}}(t):t instanceof Jt?function(n){let i=n.getFilters().map(r=>UI(r));return i.length===1?i[0]:{compositeFilter:{op:VO(n.op),filters:i}}}(t):V()}function LO(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ko=class t{constructor(e,n,i,r,s=B.min(),o=B.min(),a=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Fp=class{constructor(e){this.ct=e}};function jO(t){let e=kO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ip(e,e.limit,"L"):e}var Ll=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(_e(e.integerValue));else if("doubleValue"in e){let i=_e(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),qo(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"?n.At(i):(n.At(`${i.seconds||""}`),n.dt(i.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Gn(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?pI(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):V()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),M.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ll.bt=new Ll;var Vp=class{constructor(){this._n=new Lp}addToCollectionParentIndex(e,n){return this._n.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}deleteAllFieldIndexes(e){return v.resolve()}createTargetIndexes(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(Pi.min())}updateCollectionGroup(e,n,i){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}},Lp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Je(ye.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Je(ye.comparator)).toArray()}};var CU=new Uint8Array(0);var Gt=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(41943040,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);var Yo=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var jp=class{constructor(){this.changes=new Wn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?v.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Up=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Bp=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&zo(i.mutation,r,Wt.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,K()).next(()=>i))}getLocalViewOfDocuments(e,n,i=K()){let r=Ai();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=jo();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Ai();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,K()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=En(),o=$o(),a=function(){return $o()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof wn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),zo(u.mutation,l,u.mutation.getFieldMask(),qe.now())):o.set(l.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new Up(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let i=$o(),r=new ve((o,a)=>o-a),s=K();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||Wt.empty();u=a.applyToLocalView(l,u),i.set(c,u);let h=(r.get(a.batchId)||K()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=AI();u.forEach(d=>{if(!s.has(d)){let f=OI(n.get(d),i.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return v.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return M.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):v.resolve(Ai()),a=-1,c=s;return o.next(l=>v.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?v.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,K())).next(u=>({batchId:a,changes:TI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(i=>{let r=jo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=jo();return this.indexManager.getCollectionParents(e,s).next(a=>v.forEach(a,c=>{let l=function(h,d){return new Br(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,kt.newInvalidDocument(u)))});let a=jo();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&zo(u.mutation,l,Wt.empty(),qe.now()),au(n,l)&&(a=a.insert(c,l))}),a})}};var $p=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return v.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Yt(r.createTime)}}(n)),v.resolve()}getNamedQuery(e,n){return v.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:jO(r.bundledQuery),readTime:Yt(r.readTime)}}(n)),v.resolve()}};var zp=class{constructor(){this.overlays=new ve(M.comparator),this.hr=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Ai();return v.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),v.resolve()}getOverlaysForCollection(e,n,i){let r=Ai(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return v.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new ve((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Ai(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ai(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return v.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Sp(n,i));let s=this.hr.get(n);s===void 0&&(s=K(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var Qo=class{constructor(){this.Pr=new Je(Re.Ir),this.Tr=new Je(Re.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new Re(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new Re(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new M(new ye([])),i=new Re(n,e),r=new Re(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new M(new ye([])),i=new Re(n,e),r=new Re(n,e+1),s=K();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Re(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},Re=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return M.comparator(e.key,n.key)||Z(e.pr,n.pr)}static Er(e,n){return Z(e.pr,n.pr)||M.comparator(e.key,n.key)}};var qp=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Je(Re.Ir)}checkEmpty(e){return v.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ap(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.wr=this.wr.add(new Re(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new Re(n,0),r=new Re(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let a=this.Sr(o.pr);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Je(Z);return n.forEach(r=>{let s=new Re(r,0),o=new Re(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),v.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;M.isDocumentKey(s)||(s=s.child(""));let o=new Re(new M(s),0),a=new Je(Z);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},o),v.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ae(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return v.forEach(n.mutations,r=>{let s=new Re(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new Re(n,0),r=this.wr.firstAfterOrEqual(i);return v.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,v.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Gp=class{constructor(e){this.vr=e,this.docs=function(){return new ve(M.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return v.resolve(i?i.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let i=En();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():kt.newInvalidDocument(r))}),v.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=En(),o=n.path,a=new M(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Yx(Kx(u),i)<=0||(r.has(u.key)||au(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return v.resolve(s)}getAllFromCollectionGroup(e,n,i,r){V()}Fr(e,n){return v.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Wp(this)}getSize(e){return v.resolve(this.size)}},Wp=class extends jp{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),v.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Hp=class{constructor(e){this.persistence=e,this.Mr=new Wn(n=>Mm(n),Fm),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qo,this.targetCount=0,this.Lr=Yo.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),v.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.qn(n),v.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),v.waitFor(s).next(()=>r)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return v.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),v.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),v.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return v.resolve(i)}containsKey(e,n){return v.resolve(this.Nr.containsKey(n))}};var Kp=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new dI(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Hp(this),this.indexManager=new Vp,this.remoteDocumentCache=function(r){return new Gp(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Fp(n),this.$r=new $p(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new qp(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){C("MemoryPersistence","Starting transaction:",e);let r=new Yp(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return v.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},Yp=class extends sp{constructor(e){super(),this.currentSequenceNumber=e}},Qp=class t{constructor(e){this.persistence=e,this.zr=new Qo,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw V()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),v.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),v.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Jr,i=>{let r=M.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,B.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return v.or([()=>v.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Xp=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=K(),r=K();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var Jp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zp=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Rv()?8:Sl.v(Ke())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Jp;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Lo()<=G.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),v.resolve()):(Lo()<=G.DEBUG&&C("QueryEngine","Query:",Dr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Lo()<=G.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(n))):v.resolve())}ji(e,n){if(Gw(n))return v.resolve(null);let i=Kt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ip(n,null,"F"),i=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=K(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Ip(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,i,r){return Gw(n)||r.isEqual(B.min())?v.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?v.resolve(null):(Lo()<=G.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dr(n)),this.es(e,o,n,Hx(r,-1)).next(a=>a))})}Zi(e,n){let i=new Je(II(e));return n.forEach((r,s)=>{au(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Lo()<=G.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.zi.getDocumentsMatchingQuery(e,n,Pi.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var em=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new ve(Z),this.rs=new Wn(s=>Mm(s),Fm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function UO(t,e,n,i){return new em(t,e,n,i)}function $I(t,e){return p(this,null,function*(){let n=j(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=K();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function BO(t,e){let n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let h=l.batch,d=h.keys(),f=v.resolve();return d.forEach(R=>{f=f.next(()=>u.getEntry(c,R)).next(O=>{let x=l.docVersions.get(R);ae(x!==null),O.version.compareTo(x)<0&&(h.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),u.addEntry(O)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=K();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function zI(t){let e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function $O(t,e){let n=j(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((u,h)=>{let d=r.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(tt.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(h,f),function(O,x,q){return O.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=En(),l=K();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(zO(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!i.isEqual(B.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=r,s))}function zO(t,e,n){let i=K(),r=K();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=En();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(B.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):C("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:r}})}function qO(t,e){let n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function GO(t,e){let n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,v.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new Ko(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function tm(t,e,n){return p(this,null,function*(){let i=j(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!ta(o))throw o;C("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function nI(t,e,n){let i=j(t),r=B.min(),s=K();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let h=j(c),d=h.rs.get(u);return d!==void 0?v.resolve(h.ns.get(d)):h.Qr.getTargetData(l,u)}(i,o,Kt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:B.min(),n?s:K())).next(a=>(WO(i,aO(e),a),{documents:a,hs:s})))}function WO(t,e,n){let i=t.ss.get(e)||B.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}var jl=class{constructor(){this.activeTargetIds=fO()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var nm=class{constructor(){this.no=new jl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new jl,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var im=class{io(e){}shutdown(){}};var Ul=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){C("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){C("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wl=null;function Kf(){return wl===null?wl=function(){return 268435456+Math.round(2147483648*Math.random())}():wl++,"0x"+wl.toString(16)}var HO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var rm=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Xe="WebChannelConnection",sm=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+n.host,this.po=`projects/${r}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get wo(){return!1}So(n,i,r,s,o){let a=Kf(),c=this.bo(n,i.toUriEncodedString());C("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,r).then(u=>(C("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Mr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}vo(n,i,r,s,o,a){return this.So(n,i,r,s,o)}Do(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}bo(n,i){let r=HO[n];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,i,r){let s=Kf();return new Promise((o,a)=>{let c=new Nw;c.setWithCredentials(!0),c.listenOnce(Ow.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case vl.NO_ERROR:let u=c.getResponseJson();C(Xe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case vl.TIMEOUT:C(Xe,`RPC '${e}' ${s} timed out`),a(new k(y.DEADLINE_EXCEEDED,"Request time out"));break;case vl.HTTP_ERROR:let h=c.getStatus();if(C(Xe,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);let f=d?.error;if(f&&f.status&&f.message){let R=function(x){let q=x.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(q)>=0?q:y.UNKNOWN}(f.status);a(new k(R,f.message))}else a(new k(y.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(y.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{C(Xe,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);C(Xe,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",l,i,15)})}Fo(e,n,i){let r=Kf(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Pw(),a=xw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=s.join("");C(Xe,`Creating RPC '${e}' stream ${r}: ${u}`,c);let h=o.createWebChannel(u,c),d=!1,f=!1,R=new rm({lo:x=>{f?C(Xe,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(d||(C(Xe,`Opening RPC '${e}' stream ${r} transport.`),h.open(),d=!0),C(Xe,`RPC '${e}' stream ${r} sending:`,x),h.send(x))},ho:()=>h.close()}),O=(x,q,re)=>{x.listen(q,Ee=>{try{re(Ee)}catch(Ge){setTimeout(()=>{throw Ge},0)}})};return O(h,Vo.EventType.OPEN,()=>{f||C(Xe,`RPC '${e}' stream ${r} transport opened.`)}),O(h,Vo.EventType.CLOSE,()=>{f||(f=!0,C(Xe,`RPC '${e}' stream ${r} transport closed`),R.Vo())}),O(h,Vo.EventType.ERROR,x=>{f||(f=!0,Mr(Xe,`RPC '${e}' stream ${r} transport errored:`,x),R.Vo(new k(y.UNAVAILABLE,"The operation could not be completed")))}),O(h,Vo.EventType.MESSAGE,x=>{var q;if(!f){let re=x.data[0];ae(!!re);let Ee=re,Ge=Ee.error||((q=Ee[0])===null||q===void 0?void 0:q.error);if(Ge){C(Xe,`RPC '${e}' stream ${r} received error:`,Ge);let Nt=Ge.status,xe=function(rs){let la=Se[rs];if(la!==void 0)return NI(la)}(Nt),en=Ge.message;xe===void 0&&(xe=y.INTERNAL,en="Unknown error status: "+Nt+" with message "+Ge.message),f=!0,R.Vo(new k(xe,en)),h.close()}else C(Xe,`RPC '${e}' stream ${r} received:`,re),R.mo(re)}}),O(a,kw.STAT_EVENT,x=>{x.stat===Wf.PROXY?C(Xe,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===Wf.NOPROXY&&C(Xe,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.Ro()},0),R}};function Yf(){return typeof document<"u"?document:null}function cu(t){return new xp(t,!0)}var Bl=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&C("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var $l=class{constructor(e,n,i,r,s,o,a,c){this.oi=e,this.$o=i,this.Uo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Bl(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===y.RESOURCE_EXHAUSTED?(Qt(n.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===n&&this.o_(i,r)},i=>{e(()=>{let r=new k(y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(e,n){let i=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return C("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(C("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},om=class extends $l{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=RO(this.serializer,e),i=function(s){if(!("targetChange"in s))return B.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?B.min():o.readTime?Yt(o.readTime):B.min()}(e);return this.listener.u_(n,i)}c_(e){let n={};n.database=Mp(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=wp(c)?{documents:xO(s,c)}:{query:OO(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=MI(s,o.resumeToken);let l=Op(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(B.min())>0){a.readTime=Vl(s,o.snapshotVersion.toTimestamp());let l=Op(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=NO(this.serializer,e);i&&(n.labels=i),this.t_(n)}l_(e){let n={};n.database=Mp(this.serializer),n.removeTarget=e,this.t_(n)}},am=class extends $l{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=PO(e.writeResults,e.commitTime),i=Yt(e.commitTime);return this.listener.T_(i,n)}return ae(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Mp(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>DO(this.serializer,i))};this.t_(n)}};var cm=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new k(y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,kp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(y.UNKNOWN,s.toString())})}vo(e,n,i,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,kp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(y.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var lm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Qt(n),this.g_=!1):C("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var um=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{i.enqueueAndForget(()=>p(this,null,function*(){Mi(this)&&(C("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=j(c);l.v_.add(4),yield na(l),l.x_.set("Unknown"),l.v_.delete(4),yield lu(l)})}(this))}))}),this.x_=new lm(i,r)}};function lu(t){return p(this,null,function*(){if(Mi(t))for(let e of t.F_)yield e(!0)})}function na(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function qI(t,e){let n=j(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Bm(n)?Um(n):Qr(n).Jo()&&jm(n,e))}function Lm(t,e){let n=j(t),i=Qr(n);n.C_.delete(e),i.Jo()&&GI(n,e),n.C_.size===0&&(i.Jo()?i.Xo():Mi(n)&&n.x_.set("Unknown"))}function jm(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(B.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qr(t).c_(e)}function GI(t,e){t.O_.Oe(e),Qr(t).l_(e)}function Um(t){t.O_=new Pp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Qr(t).start(),t.x_.p_()}function Bm(t){return Mi(t)&&!Qr(t).Ho()&&t.C_.size>0}function Mi(t){return j(t).v_.size===0}function WI(t){t.O_=void 0}function KO(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{jm(t,e)})})}function YO(t,e){return p(this,null,function*(){WI(t),Bm(t)?(t.x_.S_(e),Um(t)):t.x_.set("Unknown")})}function QO(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof Ml&&e.state===2&&e.cause)try{yield function(r,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))})}(t,e)}catch(i){C("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield zl(t,i)}else if(e instanceof kr?t.O_.$e(e):e instanceof Nl?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(B.min()))try{let i=yield zI(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(tt.EMPTY_BYTE_STRING,u.snapshotVersion)),GI(s,c);let h=new Ko(u.target,c,l,u.sequenceNumber);jm(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){C("RemoteStore","Failed to raise snapshot:",i),yield zl(t,i)}})}function zl(t,e,n){return p(this,null,function*(){if(!ta(e))throw e;t.v_.add(1),yield na(t),t.x_.set("Offline"),n||(n=()=>zI(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){C("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield lu(t)}))})}function HI(t,e){return e().catch(n=>zl(t,n,e))}function uu(t){return p(this,null,function*(){let e=j(t),n=Hn(e),i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;XO(e);)try{let r=yield qO(e.localStore,i);if(r===null){e.D_.length===0&&n.Xo();break}i=r.batchId,JO(e,r)}catch(r){yield zl(e,r)}KI(e)&&YI(e)})}function XO(t){return Mi(t)&&t.D_.length<10}function JO(t,e){t.D_.push(e);let n=Hn(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function KI(t){return Mi(t)&&!Hn(t).Ho()&&t.D_.length>0}function YI(t){Hn(t).start()}function ZO(t){return p(this,null,function*(){Hn(t).d_()})}function ek(t){return p(this,null,function*(){let e=Hn(t);for(let n of t.D_)e.I_(n.mutations)})}function tk(t,e,n){return p(this,null,function*(){let i=t.D_.shift(),r=Cp.from(i,e,n);yield HI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield uu(t)})}function nk(t,e){return p(this,null,function*(){e&&Hn(t).P_&&(yield function(i,r){return p(this,null,function*(){if(function(o){return EO(o)&&o!==y.ABORTED}(r.code)){let s=i.D_.shift();Hn(i).Zo(),yield HI(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield uu(i)}})}(t,e)),KI(t)&&YI(t)})}function iI(t,e){return p(this,null,function*(){let n=j(t);n.asyncQueue.verifyOperationInProgress(),C("RemoteStore","RemoteStore received new credentials");let i=Mi(n);n.v_.add(3),yield na(n),i&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield lu(n)})}function ik(t,e){return p(this,null,function*(){let n=j(t);e?(n.v_.delete(2),yield lu(n)):e||(n.v_.add(2),yield na(n),n.x_.set("Unknown"))})}function Qr(t){return t.N_||(t.N_=function(n,i,r){let s=j(n);return s.R_(),new om(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:KO.bind(null,t),To:YO.bind(null,t),u_:QO.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),Bm(t)?Um(t):t.x_.set("Unknown")):(yield t.N_.stop(),WI(t))}))),t.N_}function Hn(t){return t.L_||(t.L_=function(n,i,r){let s=j(n);return s.R_(),new am(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:ZO.bind(null,t),To:nk.bind(null,t),E_:ek.bind(null,t),T_:tk.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.L_.Zo(),yield uu(t)):(yield t.L_.stop(),t.D_.length>0&&(C("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var hm=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ot,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function $m(t,e){if(Qt("AsyncQueue",`${e}: ${t}`),ta(t))return new k(y.UNAVAILABLE,`${e}: ${t}`);throw t}var ql=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||M.comparator(n.key,i.key):(n,i)=>M.comparator(n.key,i.key),this.keyedMap=jo(),this.sortedSet=new ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Gl=class{constructor(){this.B_=new ve(M.comparator)}track(e){let n=e.doc.key,i=this.B_.get(n);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(n,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(n):e.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):V():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,i)=>{e.push(i)}),e}},Wr=class t{constructor(e,n,i,r,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ql.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var dm=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},fm=class{constructor(){this.queries=new Wn(e=>wI(e),ou),this.onlineState="Unknown",this.W_=new Set}};function QI(t,e){return p(this,null,function*(){let n=j(t),i=3,r=e.query,s=n.queries.get(r);s?!s.K_()&&e.U_()&&(i=2):(s=new dm,i=e.U_()?0:1);try{switch(i){case 0:s.q_=yield n.onListen(r,!0);break;case 1:s.q_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(o){let a=$m(o,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&zm(n)})}function XI(t,e){return p(this,null,function*(){let n=j(t),i=e.query,r=3,s=n.queries.get(i);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?r=e.U_()?0:1:!s.K_()&&e.U_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function rk(t,e){let n=j(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(r)&&(i=!0);o.q_=r}}i&&zm(n)}function sk(t,e,n){let i=j(t),r=i.queries.get(e);if(r)for(let s of r.Q_)s.onError(n);i.queries.delete(e)}function zm(t){t.W_.forEach(e=>{e.next()})}var pm,rI;(rI=pm||(pm={})).j_="default",rI.Cache="cache";var Wl=class{constructor(e,n,i){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=i||{}}z_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Wr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let i=n!=="Offline";return(!this.options.ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Wr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==pm.Cache}};var Hl=class{constructor(e){this.key=e}},Kl=class{constructor(e){this.key=e}},mm=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=K(),this.mutatedKeys=K(),this.ha=II(e),this.Pa=new ql(this.ha)}get Ia(){return this.ua}Ta(e,n){let i=n?n.Ea:new Gl,r=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{let d=r.get(u),f=au(this.query,h)?h:null,R=!!d&&this.mutatedKeys.has(d.key),O=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),x=!1;d&&f?d.data.isEqual(f.data)?R!==O&&(i.track({type:3,doc:f}),x=!0):this.da(d,f)||(i.track({type:2,doc:f}),x=!0,(c&&this.ha(f,c)>0||l&&this.ha(f,l)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),x=!0):d&&!f&&(i.track({type:1,doc:d}),x=!0,(c||l)&&(a=!0)),x&&(f?(o=o.add(f),s=O?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Pa:o,Ea:i,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((u,h)=>function(f,R){let O=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return O(f)-O(R)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(i),r=r!=null&&r;let a=n&&!r?this.Ra():[],c=this.la.size===0&&this.current&&!r?1:0,l=c!==this.ca;return this.ca=c,o.length!==0||l?{snapshot:new Wr(this.query,e.Pa,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Gl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=K(),this.Pa.forEach(i=>{this.ma(i.key)&&(this.la=this.la.add(i.key))});let n=[];return e.forEach(i=>{this.la.has(i)||n.push(new Kl(i))}),this.la.forEach(i=>{e.has(i)||n.push(new Hl(i))}),n}fa(e){this.ua=e.hs,this.la=K();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Wr.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},gm=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},_m=class{constructor(e){this.key=e,this.pa=!1}},ym=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Wn(a=>wI(a),ou),this.Sa=new Map,this.ba=new Set,this.Da=new ve(M.comparator),this.Ca=new Map,this.va=new Qo,this.Fa={},this.Ma=new Map,this.xa=Yo.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function ok(t,e,n=!0){return p(this,null,function*(){let i=i0(t),r,s=i.wa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ga()):r=yield JI(i,e,n,!0),r})}function ak(t,e){return p(this,null,function*(){let n=i0(t);yield JI(n,e,!0,!1)})}function JI(t,e,n,i){return p(this,null,function*(){let r=yield GO(t.localStore,Kt(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield ck(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&qI(t.remoteStore,r),a})}function ck(t,e,n,i,r){return p(this,null,function*(){t.Na=(h,d,f)=>function(O,x,q,re){return p(this,null,function*(){let Ee=x.view.Ta(q);Ee.Xi&&(Ee=yield nI(O.localStore,x.query,!1).then(({documents:en})=>x.view.Ta(en,Ee)));let Ge=re&&re.targetChanges.get(x.targetId),Nt=re&&re.targetMismatches.get(x.targetId)!=null,xe=x.view.applyChanges(Ee,O.isPrimaryClient,Ge,Nt);return oI(O,x.targetId,xe.Va),xe.snapshot})}(t,h,d,f);let s=yield nI(t.localStore,e,!0),o=new mm(e,s.hs),a=o.Ta(s.documents),c=Ho.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=o.applyChanges(a,t.isPrimaryClient,c);oI(t,n,l.Va);let u=new gm(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),l.snapshot})}function lk(t,e,n){return p(this,null,function*(){let i=j(t),r=i.wa.get(e),s=i.Sa.get(r.targetId);if(s.length>1)return i.Sa.set(r.targetId,s.filter(o=>!ou(o,e))),void i.wa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield tm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Lm(i.remoteStore,r.targetId),vm(i,r.targetId)}).catch(ea))):(vm(i,r.targetId),yield tm(i.localStore,r.targetId,!0))})}function uk(t,e){return p(this,null,function*(){let n=j(t),i=n.wa.get(e),r=n.Sa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Lm(n.remoteStore,i.targetId))})}function hk(t,e,n){return p(this,null,function*(){let i=yk(t);try{let r=yield function(o,a){let c=j(o),l=qe.now(),u=a.reduce((f,R)=>f.add(R.key),K()),h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let R=En(),O=K();return c.os.getEntries(f,u).next(x=>{R=x,R.forEach((q,re)=>{re.isValidDocument()||(O=O.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,R)).next(x=>{h=x;let q=[];for(let re of a){let Ee=vO(re,h.get(re.key).overlayedDocument);Ee!=null&&q.push(new wn(re.key,Ee,mI(Ee.value.mapValue),$n.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,q,a)}).next(x=>{d=x;let q=x.applyToLocalDocumentSet(h,O);return c.documentOverlayCache.saveOverlays(f,x.batchId,q)})}).then(()=>({batchId:d.batchId,changes:TI(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Fa[o.currentUser.toKey()];l||(l=new ve(Z)),l=l.insert(a,c),o.Fa[o.currentUser.toKey()]=l}(i,r.batchId,n),yield ia(i,r.changes),yield uu(i.remoteStore)}catch(r){let s=$m(r,"Failed to persist write");n.reject(s)}})}function ZI(t,e){return p(this,null,function*(){let n=j(t);try{let i=yield $O(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Ca.get(s);o&&(ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.pa=!0:r.modifiedDocuments.size>0?ae(o.pa):r.removedDocuments.size>0&&(ae(o.pa),o.pa=!1))}),yield ia(n,i,e)}catch(i){yield ea(i)}})}function sI(t,e,n){let i=j(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=j(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let d of h.Q_)d.G_(a)&&(l=!0)}),l&&zm(c)}(i.eventManager,e),r.length&&i.ya.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function dk(t,e,n){return p(this,null,function*(){let i=j(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Ca.get(e),s=r&&r.key;if(s){let o=new ve(M.comparator);o=o.insert(s,kt.newNoDocument(s,B.min()));let a=K().add(s),c=new kl(B.min(),new Map,new ve(Z),o,a);yield ZI(i,c),i.Da=i.Da.remove(s),i.Ca.delete(e),qm(i)}else yield tm(i.localStore,e,!1).then(()=>vm(i,e,n)).catch(ea)})}function fk(t,e){return p(this,null,function*(){let n=j(t),i=e.batch.batchId;try{let r=yield BO(n.localStore,e);t0(n,i,null),e0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield ia(n,r)}catch(r){yield ea(r)}})}function pk(t,e,n){return p(this,null,function*(){let i=j(t);try{let r=yield function(o,a){let c=j(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(ae(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);t0(i,e,n),e0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield ia(i,r)}catch(r){yield ea(r)}})}function e0(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function t0(t,e,n){let i=j(t),r=i.Fa[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Fa[i.currentUser.toKey()]=r}}function vm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Sa.get(e))t.wa.delete(i),n&&t.ya.La(i,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(i=>{t.va.containsKey(i)||n0(t,i)})}function n0(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(Lm(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),qm(t))}function oI(t,e,n){for(let i of n)i instanceof Hl?(t.va.addReference(i.key,e),mk(t,i)):i instanceof Kl?(C("SyncEngine","Document no longer in limbo: "+i.key),t.va.removeReference(i.key,e),t.va.containsKey(i.key)||n0(t,i.key)):V()}function mk(t,e){let n=e.key,i=n.path.canonicalString();t.Da.get(n)||t.ba.has(i)||(C("SyncEngine","New document in limbo: "+n),t.ba.add(i),qm(t))}function qm(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new M(ye.fromString(e)),i=t.xa.next();t.Ca.set(i,new _m(n)),t.Da=t.Da.insert(n,i),qI(t.remoteStore,new Ko(Kt(su(n.path)),i,"TargetPurposeLimboResolution",dI._e))}}function ia(t,e,n){return p(this,null,function*(){let i=j(t),r=[],s=[],o=[];i.wa.isEmpty()||(i.wa.forEach((a,c)=>{o.push(i.Na(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=Xp.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.ya.u_(r),yield function(c,l){return p(this,null,function*(){let u=j(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>v.forEach(l,d=>v.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>v.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!ta(h))throw h;C("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let d=h.targetId;if(!h.fromCache){let f=u.ns.get(d),R=f.snapshotVersion,O=f.withLastLimboFreeSnapshotVersion(R);u.ns=u.ns.insert(d,O)}}})}(i.localStore,s))})}function gk(t,e){return p(this,null,function*(){let n=j(t);if(!n.currentUser.isEqual(e)){C("SyncEngine","User change. New user:",e.toKey());let i=yield $I(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new k(y.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ia(n,i.us)}})}function _k(t,e){let n=j(t),i=n.Ca.get(e);if(i&&i.pa)return K().add(i.key);{let r=K(),s=n.Sa.get(e);if(!s)return r;for(let o of s){let a=n.wa.get(o);r=r.unionWith(a.view.Ia)}return r}}function i0(t){let e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_k.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dk.bind(null,e),e.ya.u_=rk.bind(null,e.eventManager),e.ya.La=sk.bind(null,e.eventManager),e}function yk(t){let e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pk.bind(null,e),e}var Yl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=cu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return UO(this.persistence,new Zp,e.initialUser,this.serializer)}createPersistence(e){return new Kp(Qp.Hr,this.serializer)}createSharedClientState(e){return new nm}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Em=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gk.bind(null,this.syncEngine),yield ik(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new fm}()}createDatastore(e){let n=cu(e.databaseInfo.databaseId),i=function(s){return new sm(s)}(e.databaseInfo);return function(s,o,a,c){return new cm(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new um(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>sI(this.syncEngine,n,0),function(){return Ul.D()?new Ul:new im}())}createSyncEngine(e,n){return function(r,s,o,a,c,l,u){let h=new ym(r,s,o,a,c,l);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(i){return p(this,null,function*(){let r=j(i);C("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield na(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Ql=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Qt("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var wm=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Le.UNAUTHENTICATED,this.clientId=Al.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>p(this,null,function*(){C("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(C("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ot;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=$m(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Qf(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),C("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>p(this,null,function*(){i.isEqual(r)||(yield $I(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function aI(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Ek(t);C("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>iI(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>iI(e.remoteStore,r)),t._onlineComponents=e})}function vk(t){return t.name==="FirebaseError"?t.code===y.FAILED_PRECONDITION||t.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Ek(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){C("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!vk(n))throw n;Mr("Error using user provided cache. Falling back to memory cache: "+n),yield Qf(t,new Yl)}}else C("FirestoreClient","Using default OfflineComponentProvider"),yield Qf(t,new Yl);return t._offlineComponents})}function r0(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(C("FirestoreClient","Using user provided OnlineComponentProvider"),yield aI(t,t._uninitializedComponentsProvider._online)):(C("FirestoreClient","Using default OnlineComponentProvider"),yield aI(t,new Em))),t._onlineComponents})}function wk(t){return r0(t).then(e=>e.syncEngine)}function Im(t){return p(this,null,function*(){let e=yield r0(t),n=e.eventManager;return n.onListen=ok.bind(null,e.syncEngine),n.onUnlisten=lk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ak.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uk.bind(null,e.syncEngine),n})}function Ik(t,e,n={}){let i=new Ot;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,l){let u=new Ql({next:d=>{o.enqueueAndForget(()=>XI(s,h));let f=d.docs.has(a);!f&&d.fromCache?l.reject(new k(y.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&c&&c.source==="server"?l.reject(new k(y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new Wl(su(a.path),u,{includeMetadataChanges:!0,ta:!0});return QI(s,h)}(yield Im(t),t.asyncQueue,e,n,i)})),i.promise}function s0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var cI=new Map;function o0(t,e,n){if(!n)throw new k(y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bk(t,e,n,i){if(e===!0&&i===!0)throw new k(y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lI(t){if(!M.isDocumentKey(t))throw new k(y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uI(t){if(M.isDocumentKey(t))throw new k(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Gm(t);throw new k(y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Xl=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new k(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Hr=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xl(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Xf;switch(i.type){case"firstParty":return new tp(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new k(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=cI.get(n);i&&(C("ComponentProvider","Removing Datastore"),cI.delete(n),i.terminate())}(this),Promise.resolve()}};function a0(t,e,n,i={}){var r;let s=(t=vn(t,Hr))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=Le.MOCK_USER;else{a=bv(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new k(y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Le(l)}t._authCredentials=new Jf(new Tl(a,c))}}var Jl=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ot=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},zn=class t extends Jl{constructor(e,n,i){super(e,n,su(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new M(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function c0(t,e,...n){if(t=bt(t),o0("collection","path",e),t instanceof Hr){let i=ye.fromString(e,...n);return uI(i),new zn(t,null,i)}{if(!(t instanceof ot||t instanceof zn))throw new k(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ye.fromString(e,...n));return uI(i),new zn(t.firestore,null,i)}}function Wm(t,e,...n){if(t=bt(t),arguments.length===1&&(e=Al.newId()),o0("doc","path",e),t instanceof Hr){let i=ye.fromString(e,...n);return lI(i),new ot(t,null,new M(i))}{if(!(t instanceof ot||t instanceof zn))throw new k(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ye.fromString(e,...n));return lI(i),new ot(t.firestore,t instanceof zn?t.converter:null,new M(i))}}var bm=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Bl(this,"async_queue_retry"),this.cu=()=>{let n=Yf();n&&C("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Yf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Yf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Ot;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!ta(e))throw e;C("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(i=>{this.ou=i,this._u=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Qt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this._u=!1,i))));return this.nu=n,n}enqueueAfterDelay(e,n,i){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let r=hm.createAndSchedule(this,e,n,i,s=>this.Iu(s));return this.su.push(r),r}lu(){this.ou&&V()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function hI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Kn=class extends Hr{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new bm}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||u0(this),this._firestoreClient.terminate()}};function l0(t,e){let n=typeof t=="object"?t:wr(),i=typeof t=="string"?t:e||"(default)",r=oo(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=wv("firestore");s&&a0(r,...s)}return r}function Hm(t){return t._firestoreClient||u0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function u0(t){var e,n,i;let r=t._freezeSettings(),s=function(a,c,l,u){return new lp(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,s0(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new wm(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Xo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(tt.fromBase64String(e))}catch(n){throw new k(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zl=class{constructor(e){this._methodName=e}};var Zo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}};var Tk=/^__.*__$/,Tm=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new wn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ni(e,this.data,n,this.fieldTransforms)}};function h0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}var Am=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.mu({path:i,gu:!1});return r.pu(e),r}yu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.mu({path:i,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return eu(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(h0(this.Vu)&&Tk.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},Cm=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||cu(e)}Cu(e,n,i,r=!1){return new Am({Vu:e,methodName:n,Du:i,path:ft.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function d0(t){let e=t._freezeSettings(),n=cu(t._databaseId);return new Cm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function f0(t,e,n,i,r,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,r);_0("Data must be an object, but it was:",o,i);let a=m0(i,o),c,l;if(s.merge)c=new Wt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let d=Ak(e,h,n);if(!o.contains(d))throw new k(y.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Sk(u,d)||u.push(d)}c=new Wt(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new Tm(new xt(a),c,l)}function p0(t,e){if(g0(t=bt(t)))return _0("Unsupported field value:",e,t),m0(t,e);if(t instanceof Zl)return function(i,r){if(!h0(r.Vu))throw r.Su(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Su(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=p0(a,r.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=bt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=qe.fromDate(i);return{timestampValue:Vl(r.serializer,s)}}if(i instanceof qe){let s=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vl(r.serializer,s)}}if(i instanceof Zo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xo)return{bytesValue:MI(r.serializer,i._byteString)};if(i instanceof ot){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vm(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Su(`Unsupported field value: ${Gm(i)}`)}(t,e)}function m0(t,e){let n={};return fI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(t,(i,r)=>{let s=p0(r,e.fu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function g0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Zo||t instanceof Xo||t instanceof ot||t instanceof Zl)}function _0(t,e,n){if(!g0(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=Gm(n);throw i==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+i)}}function Ak(t,e,n){if((e=bt(e))instanceof Jo)return e._internalPath;if(typeof e=="string")return y0(t,e);throw eu("Field path arguments must be of type string or ",t,!1,void 0,n)}var Ck=new RegExp("[~\\*/\\[\\]]");function y0(t,e,n){if(e.search(Ck)>=0)throw eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jo(...e.split("."))._internalPath}catch{throw eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eu(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new k(y.INVALID_ARGUMENT,a+t+c)}function Sk(t,e){return t.some(n=>n.isEqual(e))}var tu=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Sm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(v0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Sm=class extends tu{data(){return super.data()}};function v0(t,e){return typeof e=="string"?y0(t,e):e instanceof Jo?e._internalPath:e._delegate._internalPath}function Rk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rm=class{convertValue(e,n="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Yr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Zo(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=km(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Go(e));default:return null}}convertTimestamp(e){let n=qn(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=ye.fromString(e);ae(BI(i));let r=new Pl(i.get(1),i.get(3)),s=new M(i.popFirst(5));return r.isEqual(n)||Qt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function E0(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var Si=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nu=class extends tu{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Nr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(v0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Nr=class extends nu{data(e={}){return super.data(e)}},Dm=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Si(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Nr(this._firestore,this._userDataWriter,i.key,i,new Si(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new Nr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Si(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Nr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Si(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Dk(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Dk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}function w0(t){t=vn(t,ot);let e=vn(t.firestore,Kn);return Ik(Hm(e),t._key).then(n=>A0(e,t,n))}var iu=class extends Rm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}};function I0(t,e,n){t=vn(t,ot);let i=vn(t.firestore,Kn),r=E0(t.converter,e,n);return T0(i,[f0(d0(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,$n.none())])}function b0(t,e){let n=vn(t.firestore,Kn),i=Wm(t),r=E0(t.converter,e);return T0(n,[f0(d0(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,$n.exists(!1))]).then(()=>i)}function Km(t,...e){var n,i,r;t=bt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||hI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(hI(e[o])){let h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,l,u;if(t instanceof ot)l=vn(t.firestore,Kn),u=su(t._key.path),c={next:h=>{e[o]&&e[o](A0(l,t,h))},error:e[o+1],complete:e[o+2]};else{let h=vn(t,Jl);l=vn(h.firestore,Kn),u=h._query;let d=new iu(l);c={next:f=>{e[o]&&e[o](new Dm(l,d,h,f))},error:e[o+1],complete:e[o+2]},Rk(t._query)}return function(d,f,R,O){let x=new Ql(O),q=new Wl(f,x,R);return d.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return QI(yield Im(d),q)})),()=>{x.Qa(),d.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return XI(yield Im(d),q)}))}}(Hm(l),u,a,c)}function T0(t,e){return function(i,r){let s=new Ot;return i.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return hk(yield wk(i),r,s)})),s.promise}(Hm(t),e)}function A0(t,e,n){let i=n.docs.get(e._key),r=new iu(t);return new nu(t,r,e._key,i,new Si(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Kr=r})(pn),St(new st("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Kn(new Zf(i.getProvider("auth-internal")),new ip(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(l.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),me(Fw,"4.5.0",e),me(Fw,"4.5.0","esm2017")})();var hu=function(){return hu=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hu.apply(this,arguments)};var Ok={includeMetadataChanges:!1};function C0(t,e){return e===void 0&&(e=Ok),new nt(function(n){var i=Km(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function S0(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:hu(hu({},i),(n={},n[e.idField]=t.id,n))}function R0(t){return C0(t,{includeMetadataChanges:!0}).pipe(U(function(e){return e.docs}))}function D0(t,e){return e===void 0&&(e={}),R0(t).pipe(U(function(n){return n.map(function(i){return S0(i,e)})}))}var In=class{constructor(e){return e}},P0="firestore",Ym=class{constructor(){return lo(P0)}};var Qm=new I("angularfire2.firestore-instances");function kk(t,e){let n=jd(P0,t,e);return n&&new In(n)}function Nk(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new In(i)}}var Mk={provide:Ym,deps:[[new ct,Qm]]},Fk={provide:In,useFactory:kk,deps:[[new ct,Qm],gi]},Vk=(()=>{class t{constructor(){me("angularfire",mn.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ue({type:t});static \u0275inj=he({providers:[Fk,Mk]})}return t})();function x0(t,...e){return{ngModule:Vk,providers:[{provide:Qm,useFactory:Nk(t),multi:!0,deps:[z,Ae,uo,ho,[new ct,qc],[new ct,co],...e]}]}}var O0=Rt(D0,!0);var k0=Rt(b0,!0);var Xm=Rt(c0,!0);var Jm=Rt(Wm,!0);var N0=Rt(w0,!0);var M0=Rt(l0,!0);var F0=Rt(I0,!0);var Xr=(()=>{let e=class e{constructor(i){this.fireStore=i}saveProject(i){let r=Xm(this.fireStore,"projects");return k0(r,i)}getProjects(){let i=Xm(this.fireStore,"projects");return O0(i,{idField:"id"})}getProjectById(i){let r=Jm(this.fireStore,"projects",i);return N0(r)}updateProject(i,r){let s=Jm(this.fireStore,"projects",i);return F0(s,r)}};e.\u0275fac=function(r){return new(r||e)(g(In))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eg(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&$g(eg);let i=n?e?.injector?.get(ku)??w(ku):null,r;e?.requireSync?r=Ou({kind:0}):r=Ou({kind:1,value:e?.initialValue});let s=t.subscribe({next:o=>r.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;r.set({kind:2,error:o})}});return i?.onDestroy(s.unsubscribe.bind(s)),_a(()=>{let o=r();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new se(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var ig={};function Zt(t,e){if(ig[t]=(ig[t]||0)+1,typeof e=="function")return tg(t,(...i)=>D(m({},e(...i)),{type:t}));switch(e?e._as:"empty"){case"empty":return tg(t,()=>({type:t}));case"props":return tg(t,i=>D(m({},i),{type:t}));default:throw new Error("Unexpected config.")}}function Fi(){return{_as:"props",_p:void 0}}function tg(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}var Q0="@ngrx/store/init",Jr=(()=>{let e=class e extends Oe{constructor(){super({type:Q0})}next(i){if(typeof i=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof i>"u")throw new TypeError("Actions must be objects");if(typeof i.type>"u")throw new TypeError("Actions must have a type property");super.next(i)}complete(){}ngOnDestroy(){super.complete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Lk=[Jr],X0=new I("@ngrx/store Internal Root Guard"),L0=new I("@ngrx/store Internal Initial State"),cg=new I("@ngrx/store Initial State"),J0=new I("@ngrx/store Reducer Factory"),j0=new I("@ngrx/store Internal Reducer Factory Provider"),Z0=new I("@ngrx/store Initial Reducers"),ng=new I("@ngrx/store Internal Initial Reducers"),gB=new I("@ngrx/store Store Features"),U0=new I("@ngrx/store Internal Store Reducers"),_B=new I("@ngrx/store Internal Feature Reducers"),yB=new I("@ngrx/store Internal Feature Configs"),vB=new I("@ngrx/store Internal Store Features"),EB=new I("@ngrx/store Internal Feature Reducers Token"),wB=new I("@ngrx/store Feature Reducers"),B0=new I("@ngrx/store User Provided Meta Reducers"),du=new I("@ngrx/store Meta Reducers"),$0=new I("@ngrx/store Internal Resolved Meta Reducers"),z0=new I("@ngrx/store User Runtime Checks Config"),q0=new I("@ngrx/store Internal User Runtime Checks Config"),ra=new I("@ngrx/store Internal Runtime Checks"),eb=new I("@ngrx/store Check if Action types are unique"),fu=new I("@ngrx/store Root Store Provider"),tb=new I("@ngrx/store Feature State Provider");function jk(t,e={}){let n=Object.keys(t),i={};for(let s=0;s<n.length;s++){let o=n[s];typeof t[o]=="function"&&(i[o]=t[o])}let r=Object.keys(i);return function(o,a){o=o===void 0?e:o;let c=!1,l={};for(let u=0;u<r.length;u++){let h=r[u],d=i[h],f=o[h],R=d(f,a);l[h]=R,c=c||R!==f}return c?l:o}}function Uk(t,e){return Object.keys(t).filter(n=>n!==e).reduce((n,i)=>Object.assign(n,{[i]:t[i]}),{})}function nb(...t){return function(e){if(t.length===0)return e;let n=t[t.length-1];return t.slice(0,-1).reduceRight((r,s)=>s(r),n(e))}}function ib(t,e){return Array.isArray(e)&&e.length>0&&(t=nb.apply(null,[...e,t])),(n,i)=>{let r=t(n);return(s,o)=>(s=s===void 0?i:s,r(s,o))}}function Bk(t){let e=Array.isArray(t)&&t.length>0?nb(...t):n=>n;return(n,i)=>(n=e(n),(r,s)=>(r=r===void 0?i:r,n(r,s)))}var sa=class extends nt{},pu=class extends Jr{},$k="@ngrx/store/update-reducers",rg=(()=>{let e=class e extends Oe{get currentReducers(){return this.reducers}constructor(i,r,s,o){super(o(s,r)),this.dispatcher=i,this.initialState=r,this.reducers=s,this.reducerFactory=o}addFeature(i){this.addFeatures([i])}addFeatures(i){let r=i.reduce((s,{reducers:o,reducerFactory:a,metaReducers:c,initialState:l,key:u})=>{let h=typeof o=="function"?Bk(c)(o,l):ib(a,c)(o,l);return s[u]=h,s},{});this.addReducers(r)}removeFeature(i){this.removeFeatures([i])}removeFeatures(i){this.removeReducers(i.map(r=>r.key))}addReducer(i,r){this.addReducers({[i]:r})}addReducers(i){this.reducers=m(m({},this.reducers),i),this.updateReducers(Object.keys(i))}removeReducer(i){this.removeReducers([i])}removeReducers(i){i.forEach(r=>{this.reducers=Uk(this.reducers,r)}),this.updateReducers(i)}updateReducers(i){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:$k,features:i})}ngOnDestroy(){this.complete()}};e.\u0275fac=function(r){return new(r||e)(g(pu),g(cg),g(Z0),g(J0))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),zk=[rg,{provide:sa,useExisting:rg},{provide:pu,useExisting:Jr}],oa=(()=>{let e=class e extends J{ngOnDestroy(){this.complete()}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=lt(e)))(s||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),qk=[oa],mu=class extends nt{},G0=(()=>{let e=class e extends Oe{constructor(i,r,s,o){super(o);let c=i.pipe(ss(ua)).pipe(Ng(r)),l={state:o},u=c.pipe(as(Gk,l));this.stateSubscription=u.subscribe(({state:h,action:d})=>{this.next(h),s.next(d)}),this.state=eg(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}};e.INIT=Q0,e.\u0275fac=function(r){return new(r||e)(g(Jr),g(sa),g(oa),g(cg))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function Gk(t={state:void 0},[e,n]){let{state:i}=t;return{state:n(i,e),action:e}}var Wk=[G0,{provide:mu,useExisting:G0}],pt=(()=>{let e=class e extends nt{constructor(i,r,s){super(),this.actionsObserver=r,this.reducerManager=s,this.source=i,this.state=i.state}select(i,...r){return Kk.call(null,i,...r)(this)}selectSignal(i,r){return _a(()=>i(this.state()),r)}lift(i){let r=new e(this,this.actionsObserver,this.reducerManager);return r.operator=i,r}dispatch(i){this.actionsObserver.next(i)}next(i){this.actionsObserver.next(i)}error(i){this.actionsObserver.error(i)}complete(){this.actionsObserver.complete()}addReducer(i,r){this.reducerManager.addReducer(i,r)}removeReducer(i){this.reducerManager.removeReducer(i)}};e.\u0275fac=function(r){return new(r||e)(g(mu),g(Jr),g(rg))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Hk=[pt];function Kk(t,e,...n){return function(r){let s;if(typeof t=="string"){let o=[e,...n].filter(Boolean);s=r.pipe(Og(t,...o))}else if(typeof t=="function")s=r.pipe(U(o=>t(o,e)));else throw new TypeError(`Unexpected type '${typeof t}' in select operator, expected 'string' or 'function'`);return s.pipe(ji())}}var lg="https://ngrx.io/guide/store/configuration/runtime-checks";function W0(t){return t===void 0}function H0(t){return t===null}function rb(t){return Array.isArray(t)}function Yk(t){return typeof t=="string"}function Qk(t){return typeof t=="boolean"}function Xk(t){return typeof t=="number"}function sb(t){return typeof t=="object"&&t!==null}function Jk(t){return sb(t)&&!rb(t)}function Zk(t){if(!Jk(t))return!1;let e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}function sg(t){return typeof t=="function"}function eN(t){return sg(t)&&t.hasOwnProperty("\u0275cmp")}function tN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var nN=!1;function iN(){return nN}function K0(t,e){return t===e}function rN(t,e,n){for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!0;return!1}function ob(t,e=K0,n=K0){let i=null,r=null,s;function o(){i=null,r=null}function a(u=void 0){s={result:u}}function c(){s=void 0}function l(){if(s!==void 0)return s.result;if(!i)return r=t.apply(null,arguments),i=arguments,r;if(!rN(arguments,i,e))return r;let u=t.apply(null,arguments);return i=arguments,n(r,u)?r:(r=u,u)}return{memoized:l,reset:o,setResult:a,clearResult:c}}function Zr(...t){return oN(ob)(...t)}function sN(t,e,n,i){if(n===void 0){let s=e.map(o=>o(t));return i.memoized.apply(null,s)}let r=e.map(s=>s(t,n));return i.memoized.apply(null,[...r,n])}function oN(t,e={stateFn:sN}){return function(...n){let i=n;if(Array.isArray(i[0])){let[u,...h]=i;i=[...u,...h]}else i.length===1&&aN(i[0])&&(i=cN(i[0]));let r=i.slice(0,i.length-1),s=i[i.length-1],o=r.filter(u=>u.release&&typeof u.release=="function"),a=t(function(...u){return s.apply(null,u)}),c=ob(function(u,h){return e.stateFn.apply(null,[u,r,h,a])});function l(){c.reset(),a.reset(),o.forEach(u=>u.release())}return Object.assign(c.memoized,{release:l,projector:a.memoized,setResult:c.setResult,clearResult:c.clearResult})}}function ab(t){return Zr(e=>{let n=e[t];return!iN()&&ps()&&!(t in e)&&console.warn(`@ngrx/store: The feature name "${t}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${t}', ...) or StoreModule.forFeature('${t}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),n},e=>e)}function aN(t){return!!t&&typeof t=="object"&&Object.values(t).every(e=>typeof e=="function")}function cN(t){let e=Object.values(t),n=Object.keys(t),i=(...r)=>n.reduce((s,o,a)=>D(m({},s),{[o]:r[a]}),{});return[...e,i]}function lN(t){return t instanceof I?w(t):t}function uN(t){return typeof t=="function"?t():t}function hN(t,e){return t.concat(e)}function dN(){if(w(pt,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function fN(t,e){return function(n,i){let r=e.action(i)?og(i):i,s=t(n,r);return e.state()?og(s):s}}function og(t){Object.freeze(t);let e=sg(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(!n.startsWith("\u0275")&&tN(t,n)&&(!e||n!=="caller"&&n!=="callee"&&n!=="arguments")){let i=t[n];(sb(i)||sg(i))&&!Object.isFrozen(i)&&og(i)}}),t}function pN(t,e){return function(n,i){if(e.action(i)){let s=ag(i);Y0(s,"action")}let r=t(n,i);if(e.state()){let s=ag(r);Y0(s,"state")}return r}}function ag(t,e=[]){return(W0(t)||H0(t))&&e.length===0?{path:["root"],value:t}:Object.keys(t).reduce((i,r)=>{if(i)return i;let s=t[r];return eN(s)?i:W0(s)||H0(s)||Xk(s)||Qk(s)||Yk(s)||rb(s)?!1:Zk(s)?ag(s,[...e,r]):{path:[...e,r],value:s}},!1)}function Y0(t,e){if(t===!1)return;let n=t.path.join("."),i=new Error(`Detected unserializable ${e} at "${n}". ${lg}#strict${e}serializability`);throw i.value=t.value,i.unserializablePath=n,i}function mN(t,e){return function(n,i){if(e.action(i)&&!z.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${lg}#strictactionwithinngzone`);return t(n,i)}}function gN(t){return ps()?m({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},t):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function _N({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?pN(n,{action:i=>t&&!ug(i),state:()=>e}):n}function yN({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?fN(n,{action:i=>t&&!ug(i),state:()=>e}):n}function ug(t){return t.type.startsWith("@ngrx")}function vN({strictActionWithinNgZone:t}){return e=>t?mN(e,{action:n=>t&&!ug(n)}):e}function EN(t){return[{provide:q0,useValue:t},{provide:z0,useFactory:IN,deps:[q0]},{provide:ra,deps:[z0],useFactory:gN},{provide:du,multi:!0,deps:[ra],useFactory:yN},{provide:du,multi:!0,deps:[ra],useFactory:_N},{provide:du,multi:!0,deps:[ra],useFactory:vN}]}function wN(){return[{provide:eb,multi:!0,deps:[ra],useFactory:bN}]}function IN(t){return t}function bN(t){if(!t.strictActionTypeUniqueness)return;let e=Object.entries(ig).filter(([,n])=>n>1).map(([n])=>n);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(n=>`"${n}"`).join(", ")}. ${lg}#strictactiontypeuniqueness`)}function TN(t={},e={}){return[{provide:X0,useFactory:dN},{provide:L0,useValue:e.initialState},{provide:cg,useFactory:uN,deps:[L0]},{provide:ng,useValue:t},{provide:U0,useExisting:t instanceof I?t:ng},{provide:Z0,deps:[ng,[new fa(U0)]],useFactory:lN},{provide:B0,useValue:e.metaReducers?e.metaReducers:[]},{provide:$0,deps:[du,B0],useFactory:hN},{provide:j0,useValue:e.reducerFactory?e.reducerFactory:jk},{provide:J0,deps:[j0,$0],useFactory:ib},Lk,zk,qk,Wk,Hk,EN(e.runtimeChecks),wN()]}function AN(){w(Jr),w(sa),w(oa),w(pt),w(X0,{optional:!0}),w(eb,{optional:!0})}var CN=[{provide:fu,useFactory:AN},{provide:Bi,multi:!0,useFactory(){return()=>w(fu)}}];function cb(t,e){return rn([...TN(t,e),CN])}function Yn(...t){let e=t.pop(),n=t.map(i=>i.type);return{reducer:e,types:n}}function lb(t,...e){let n=new Map;for(let i of e)for(let r of i.types){let s=n.get(r);if(s){let o=(a,c)=>i.reducer(s(a,c),c);n.set(r,o)}else n.set(r,i.reducer)}return function(i=t,r){let s=n.get(r.type);return s?s(i,r):i}}function SN(t,e){if(t&1){let n=Ze();E(0,"tr",6),Q("click",function(){let s=Ie(n).$implicit,o=W();return be(o.redirectToProject((s==null?null:s.id)||""))}),E(1,"td"),T(2),_(),E(3,"td"),T(4),_()()}if(t&2){let n=e.$implicit;P(2),ke(" ",n.projectId," "),P(2),ke(" ",n.projectName," ")}}var ub=(()=>{let e=class e{constructor(i,r,s,o){this.projectFirebaseService=i,this.dialog=r,this.store=s,this.router=o,this.projects=[],this.projectFirebaseService.getProjects().subscribe(a=>{a&&(this.projects=a)})}openCreateProjectDialog(){this.dialog.open(gv,{}).afterClosed().subscribe(r=>p(this,null,function*(){if(r){let s=Date.now().toString(36),o;o={projectId:s,projectName:r.projectName,dateCreated:new Date,users:r.users.map((a,c)=>({id:c+1,name:a.name,amount:0})),expenses:[]},this.projectFirebaseService.saveProject(o).then(a=>{this.router.navigate(["project",a?.id])}).catch(a=>{console.log("Error",a)})}}))}redirectToProject(i){this.router.navigate(["project",i])}};e.\u0275fac=function(r){return new(r||e)(b(Xr),b(yc),b(pt),b(Et))},e.\u0275cmp=fe({type:e,selectors:[["app-project"]],standalone:!0,features:[pe],decls:13,vars:1,consts:[[1,"buttons-container","btn-toolbar"],["type","button",1,"btn","btn-primary","me-1",3,"click"],["id","projects"],[1,"table"],["scope","col"],["class","clickable",3,"click",4,"ngFor","ngForOf"],[1,"clickable",3,"click"]],template:function(r,s){r&1&&(E(0,"div",0)(1,"button",1),Q("click",function(){return s.openCreateProjectDialog()}),T(2,"Create New Project"),_()(),E(3,"div",2)(4,"table",3)(5,"thead")(6,"tr")(7,"th",4),T(8,"Project ID"),_(),E(9,"th",4),T(10,"Project Name"),_()()(),E(11,"tbody"),Y(12,SN,5,2,"tr",5),_()()()),r&2&&(P(12),F("ngForOf",s.projects))},dependencies:[Be,gt,Jv]});let t=e;return t})();function RN(t,e){t&1&&(E(0,"span",11),T(1," Settle"),_())}function DN(t,e){t&1&&(E(0,"span",12),T(1," Split Equally"),_())}function PN(t,e){t&1&&(E(0,"span",13),T(1," Owed Full Amount"),_())}function xN(t,e){if(t&1){let n=Ze();E(0,"tr")(1,"td"),T(2),_(),E(3,"td"),T(4),_(),E(5,"td"),Y(6,RN,2,0,"span",5)(7,DN,2,0,"span",6)(8,PN,2,0,"span",7),_(),E(9,"td"),T(10),_(),E(11,"td")(12,"span",8)(13,"i",9),Q("click",function(){let s=Ie(n).$implicit,o=W();return be(o.deleteExpense(s.id))}),_()(),E(14,"span",8)(15,"i",10),Q("click",function(){let s=Ie(n).$implicit,o=W();return be(o.editExpense(s.id))}),_()()()()}if(t&2){let n=e.$implicit;P(2),ke(" ",n.paidBy==null?null:n.paidBy.name," "),P(2),ke(" ",n.name," "),P(2),F("ngIf",n.transactionType=="SETTLE"),P(),F("ngIf",n.transactionType=="SPLIT_EQUALLY"),P(),F("ngIf",n.transactionType=="OWED_FULL_AMOUNT"),P(2),ke(" $ ",n.amountPaid," ")}}function ON(t,e){t&1&&(E(0,"tr")(1,"td",14),T(2,"No Data"),_()())}var hb=(()=>{let e=class e{constructor(){this.onDeleteExpense=new we,this.onEditExpense=new we}deleteExpense(i){this.onDeleteExpense.emit(i)}editExpense(i){this.onEditExpense.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["app-expenses"]],inputs:{data:"data"},outputs:{onDeleteExpense:"onDeleteExpense",onEditExpense:"onEditExpense"},standalone:!0,features:[pe],decls:17,vars:2,consts:[["id","expenses"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],["class","badge bg-warning text-dark",4,"ngIf"],[1,"mx-1"],[1,"bi","bi-trash-fill","clickable",3,"click"],[1,"bi","bi-pencil-square","clickable",3,"click"],[1,"badge","bg-success"],[1,"badge","bg-danger"],[1,"badge","bg-warning","text-dark"],["colspan","6",2,"text-align","center"]],template:function(r,s){r&1&&(E(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),T(5,"User"),_(),E(6,"th",2),T(7,"Transaction Name"),_(),E(8,"th",2),T(9,"Transaction Type"),_(),E(10,"th",2),T(11,"Amount"),_(),E(12,"th",2),T(13,"Actions"),_()()(),E(14,"tbody"),Y(15,xN,16,6,"tr",3)(16,ON,3,0,"tr",4),_()()()),r&2&&(P(15),F("ngForOf",s.data),P(),F("ngIf",(s.data==null?null:s.data.length)==0))},dependencies:[Be,gt,_t],styles:[".btn[_ngcontent-%COMP%]{line-height:1}"]});let t=e;return t})();var db=(()=>{let e=class e{transform(i,r){return Math.abs(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Mg({name:"abs",type:e,pure:!0,standalone:!0});let t=e;return t})();function kN(t,e){if(t&1&&(E(0,"span",7),T(1),on(2,"abs"),on(3,"abs"),_()),t&2){let n=W().$implicit;F("ngClass",n.amount>0?"text-success":"text-danger"),P(),ke(" ",n.amount>0?"is owed $"+ri(2,2,n.amount):"owes $"+ri(3,4,n.amount)," ")}}function NN(t,e){if(t&1&&(E(0,"div",8)(1,"label"),T(2," You owe "),E(3,"b"),T(4),on(5,"number"),on(6,"abs"),_(),T(7," to "),E(8,"b",9),T(9),_()()()),t&2){let n=e.$implicit;P(4),ke("$",Fu(5,2,ri(6,5,n.value),"1.2-2"),""),P(5),Ct(n.key)}}function MN(t,e){if(t&1&&(E(0,"div",8)(1,"label")(2,"b",10),T(3),_(),T(4," owes you "),E(5,"b"),T(6),on(7,"number"),on(8,"abs"),_()()()),t&2){let n=e.$implicit;P(3),Ct(n.key),P(3),ke("$",Fu(7,2,ri(8,5,n.value),"1.2-2"),"")}}function FN(t,e){if(t&1&&(E(0,"div",4)(1,"div")(2,"h5"),T(3),Y(4,kN,4,6,"span",5),_(),Y(5,NN,10,7,"div",6),on(6,"keyvalue"),Y(7,MN,9,7,"div",6),on(8,"keyvalue"),_()()),t&2){let n=e.$implicit;W();let i=Wi(5);P(3),ke("",n.name," "),P(),F("ngIf",n.amount!=0)("ngIfElse",i),P(),F("ngForOf",ri(6,5,n.debtsMap)),P(2),F("ngForOf",ri(8,7,n.isOwedMap))}}function VN(t,e){t&1&&(E(0,"span",10),T(1,"is all settled"),_())}var fb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["app-user-info"]],inputs:{project:"project"},standalone:!0,features:[pe],decls:6,vars:1,consts:[["id","information-panel"],[1,"flex"],["class","info-item",4,"ngFor","ngForOf"],["allSettled",""],[1,"info-item"],[3,"ngClass",4,"ngIf","ngIfElse"],["class","ms-2",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"ms-2"],[1,"text-danger"],[1,"text-success"]],template:function(r,s){r&1&&(E(0,"div",0)(1,"div",1),Y(2,FN,9,9,"div",2),Ue(3,"hr"),_()(),Y(4,VN,2,0,"ng-template",null,3,si)),r&2&&(P(2),F("ngForOf",s.project==null?null:s.project.users))},dependencies:[db,Be,r_,gt,_t,o_,s_],styles:["#information-panel[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}#information-panel[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{padding:1rem}.flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]});let t=e;return t})();function LN(t,e){if(t&1&&(E(0,"option",20),T(1),_()),t&2){let n=e.$implicit;F("value",n.id),P(),ke(" ",n.name," ")}}function jN(t,e){if(t&1&&(E(0,"option",20),T(1),_()),t&2){let n=e.$implicit;F("value",n.id),P(),ke(" ",n.name," ")}}function UN(t,e){t&1&&(E(0,"span",21),T(1," Invalid input "),_())}function BN(t,e){if(t&1){let n=Ze();Mt(0),E(1,"form",2)(2,"div",3)(3,"label",4),T(4,"Who paid?"),_(),E(5,"select",5),Y(6,LN,2,2,"option",6),_()(),E(7,"div",3)(8,"label",7),T(9,"Description"),_(),Ue(10,"input",8),_(),E(11,"div",3)(12,"label",9),T(13,"Type"),_(),E(14,"select",10),Y(15,jN,2,2,"option",6),_()(),E(16,"div",3)(17,"label",11),T(18,"Amount"),_(),E(19,"div",12)(20,"div",13)(21,"span",14),T(22,"$"),_()(),Ue(23,"input",15),_(),Y(24,UN,2,0,"span",16),_(),E(25,"div",17)(26,"button",18),Q("click",function(){Ie(n);let r=W();return be(r.close())}),T(27,"Close"),_(),E(28,"button",19),Q("click",function(){Ie(n);let r=W();return be(r.add())}),T(29,"Add"),_()()(),Ft()}if(t&2){let n=W();P(),F("formGroup",n.form),P(5),F("ngForOf",n.data.users),P(9),F("ngForOf",n.transactionTypes),P(9),F("ngIf",n.form.get("amountPaid").dirty&&n.form.get("amountPaid").hasError("min")),P(4),F("disabled",n.form.invalid)}}function $N(t,e){if(t&1){let n=Ze();Mt(0),E(1,"h6"),T(2),_(),E(3,"div",17)(4,"button",18),Q("click",function(){Ie(n);let r=W();return be(r.close())}),T(5,"Close"),_(),E(6,"button",22),Q("click",function(){Ie(n);let r=W();return be(r.close(!0))}),T(7,"Delete"),_()(),Ft()}if(t&2){let n=W();P(2),ke("Are you sure you want to delete expense",n.data.id,"?")}}var gu=(()=>{let e=class e{constructor(i,r,s){this.dialogRef=i,this.data=r,this.fb=s,this.title="New Expense";let o=r.users.length>0?r.users[0].id:null;this.title=this.getTitleByMode(r.mode),this.transactionTypes=r.transactionTypes;let a=r.expense;this.form=this.fb.group({userId:[a?.paidBy?.id??o,Me.required],name:[a?.name??"",Me.required],transactionType:[a?.transactionType??this.transactionTypes[0].id,Me.required],amountPaid:[a?.amountPaid??0,[Me.required,Me.min(1)]]})}ngOnInit(){}close(i=!1){this.dialogRef.close(i)}add(){this.dialogRef.close(this.form.value)}getTitleByMode(i){switch(i){case"ADD":return"New Expense";case"EDIT":return"Update Expense";case"DELETE":return"Delete Expense";default:return"New Expense"}}};e.\u0275fac=function(r){return new(r||e)(b(dn),b(di),b(ur))},e.\u0275cmp=fe({type:e,selectors:[["app-add-transaction-modal"]],standalone:!0,features:[pe],decls:5,vars:3,consts:[[1,"modal-container"],[4,"ngIf"],[3,"formGroup"],[1,"mb-3"],["for","userId",1,"form-label"],["formControlName","userId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","name",1,"form-label"],["id","name","formControlName","name","type","text",1,"form-control"],["for","transactionType",1,"form-label"],["formControlName","transactionType",1,"form-control"],["for","amountPaid",1,"form-label"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","formControlName","amountPaid","type","number","aria-label","Amount (to the nearest dollar)",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"flex-end"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"text-danger"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,s){r&1&&(E(0,"div",0)(1,"h3"),T(2),_(),Y(3,BN,30,5,"ng-container",1)(4,$N,8,1,"ng-container",1),_()),r&2&&(P(2),Ct(s.title),P(),F("ngIf",s.data.mode=="ADD"||s.data.mode=="EDIT"),P(),F("ngIf",s.data.mode=="DELETE"))},dependencies:[Be,gt,_t,hr,cr,ac,cc,Nn,Gs,lr,or,ar,dr,Mn,ci],styles:[".modal-container[_ngcontent-%COMP%]{padding:1rem;width:30rem}button[_ngcontent-%COMP%]{margin:.25rem}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}@media (max-width: 575.98px){.modal-container[_ngcontent-%COMP%]{padding:1rem;width:18rem}}"]});let t=e;return t})();var dg="SPLIT_EQUALLY",fg="OWED_FULL_AMOUNT",pg="SETTLE";function zN(t,e){if(t&1&&(E(0,"div")(1,"b"),T(2),_()()),t&2){let n=W();P(2),Ct(n.form.get("userName").value)}}function qN(t,e){if(t&1&&(E(0,"option",20),T(1),_()),t&2){let n=e.$implicit;F("value",n.id),P(),ke(" ",n.name," ")}}function GN(t,e){if(t&1){let n=Ze();E(0,"select",18),Q("change",function(r){Ie(n);let s=W();return be(s.onChangeWhoPaid(r))}),Y(1,qN,2,2,"option",19),_()}if(t&2){let n=W();P(),F("ngForOf",n.currentUsersState)}}function WN(t,e){t&1&&(Mt(0),E(1,"div")(2,"em"),T(3,"Please select who is paying"),_()(),Ft())}function HN(t,e){if(t&1&&(E(0,"div")(1,"b"),T(2),_()()),t&2){let n=W(2);P(2),Ct(n.form.get("settlementToName").value)}}function KN(t,e){if(t&1&&(E(0,"option",24),T(1),_()),t&2){let n=e.$implicit,i=W(3);F("value",n.id)("selected",n.id==i.form.get("settlementTo").value),P(),Yg(" ",n.name," ",n==null?null:n.debtInfo," ")}}function YN(t,e){if(t&1){let n=Ze();E(0,"select",22),Q("change",function(r){Ie(n);let s=W(2);return be(s.onChangeSettlementTo(r))}),Y(1,KN,2,4,"option",23),_()}if(t&2){let n=W(2);P(),F("ngForOf",n.form.get("settlementToList").value)}}function QN(t,e){if(t&1&&Y(0,HN,3,1,"div",4)(1,YN,2,1,"select",21),t&2){let n=W();F("ngIf",n.data.mode=="EDIT"),P(),F("ngIf",n.data.mode=="ADD")}}function XN(t,e){if(t&1&&(E(0,"p")(1,"em",25),T(2),_()()),t&2){let n=e.$implicit;P(2),Ct(n)}}var mg=(()=>{let e=class e{constructor(i,r,s){this.dialogRef=i,this.data=r,this.fb=s,this.title="Settle Payment",this.title=this.getTitleByMode(r.mode);let o=r.expense;o=D(m({},o),{settlementName:o?.settlementTo?this._findUserBy(o?.settlementTo)?.name:""}),this.form=this.fb.group({userId:[o?.paidBy?.id??"",Me.required],userName:[o?.paidBy?.name??""],settlementTo:[o?.settlementTo??"",Me.required],settlementToName:[o?.settlementName??""],settlementToList:[o?.paidBy?.id?this._initSettlementToListBySelectedUserId(o?.paidBy?.id):[]],amountPaid:[o?.amountPaid??0,[Me.required,Me.min(.1)]],debt:[]}),o?.settlementTo&&this.updateAmountPaidValidation(o?.settlementTo)}get previousUsersState(){return this.data.previousUsersState}get currentUsersState(){return this.data.currentUsersState}onChangeWhoPaid(i){let r=this._findUserBy(i.target.value);this.form.get("userName").setValue(r?.name),this.form.get("settlementTo").setValue(""),this.form.get("settlementToName").setValue(""),this._resetAmountPaidToZero(),this.form.get("settlementToList").setValue(this._initSettlementToListBySelectedUserId(i.target.value))}onChangeSettlementTo(i){let r=this._findUserBy(i.target.value);this.form.get("settlementToName").setValue(r?.name),this.updateAmountPaidValidation(i.target.value),this._resetAmountPaidToZero()}_resetAmountPaidToZero(){this.form.get("amountPaid").setValue(0),this.form.markAsPristine()}_initSettlementToListBySelectedUserId(i){return this.previousUsersState.filter(r=>r.id!=i).map(r=>D(m({},r),{debtInfo:`(is owed $${this.getDebt(i,r.id)})`}))}_findUserBy(i){return this.previousUsersState.find(r=>r.id==i)}updateAmountPaidValidation(i){this.form.get("debt").setValue(this.getDebt(this.form.get("userId").value,i)),this.form.get("amountPaid").setValidators([Me.required,Me.min(.1)]),this.form.get("amountPaid").updateValueAndValidity()}getUserDebtByUserid(i,r){let s=i?.debts.hasOwnProperty(r)?i.debts[r]:0;return Math.abs(+s)}getUserIsOwedByUserid(i,r){let s=i?.isOwed.hasOwnProperty(this.form.get("settlementTo").value)?i.isOwed[this.form.get("settlementTo").value]:0;return Math.abs(+s)}getInfoMessagesVariables(i){let r=i.find(l=>l.id==this.form.get("userId").value),s=this.getUserDebtByUserid(r,this.form.get("settlementTo").value),o=this.getUserIsOwedByUserid(r,this.form.get("settlementTo").value),a=this.form.get("settlementToName").value,c=+this.form.get("amountPaid").value;return{whoPaidUser:r,settlementToName:a,debt:s,owed:o,amountToPay:c}}get settlementInfoMessages(){let{whoPaidUser:i,settlementToName:r,debt:s,owed:o,amountToPay:a}=this.getInfoMessagesVariables(this.previousUsersState),c=[];if(this.data.mode=="ADD"&&r&&i){let l=Math.abs(a-s).toFixed(2);a>0&&(s>0&&a<s?c.push(`${i.name} owe ${r} $${l} debt`):a==s?c.push(`${i.name} is settling debt full amount to ${r}`):s==0?c.push(`${r} owes ${i.name} $${l}`):c.push(`Debt paid and ${r} now owes ${i.name} $${l}`))}return this.data.mode=="EDIT"&&(c=[...this.initEditModalInfoMessages()]),c}initEditModalInfoMessages(){let{whoPaidUser:i,settlementToName:r,debt:s,owed:o,amountToPay:a}=this.getInfoMessagesVariables(this.previousUsersState),c=[];if(i)if(s>0){let l=+(s-a).toFixed(2);l==0?c.push(`${i.name} is paying full debt to ${r}`):s>a?c.push(`${i.name} owes ${r} $${l}`):s<a&&c.push(`Debt paid and ${r} now owes ${i.name} $${Math.abs(l)}`)}else o>=0&&this._isOwedMessages(c);return c}_isOwedMessages(i){let{whoPaidUser:r,settlementToName:s,debt:o,owed:a,amountToPay:c}=this.getInfoMessagesVariables(this.currentUsersState),l=+(+this.data.expense?.amountPaid).toFixed(2),u=a-l+c;r&&c>0&&i.push(`${s} owes ${r.name} $${u}`)}getDebt(i,r){let s=this.previousUsersState.find(a=>a.id==i),o=s?.debts.hasOwnProperty(r)?s.debts[r]:0;return Math.abs(o)}ngOnInit(){}close(){this.dialogRef.close()}settle(){this.dialogRef.close(this.form.value)}getTitleByMode(i){switch(i){case"ADD":return"Settle Payment";case"EDIT":return"Edit Settle Payment";case"DELETE":return"Delete Settlement";default:return"Settle Payment"}}};e.\u0275fac=function(r){return new(r||e)(b(dn),b(di),b(ur))},e.\u0275cmp=fe({type:e,selectors:[["app-settle-payment-modal"]],standalone:!0,features:[pe],decls:30,vars:7,consts:[[1,"modal-container"],[3,"formGroup"],[1,"mb-3"],["for","userId",1,"form-label"],[4,"ngIf"],["class","form-control","formControlName","userId",3,"change",4,"ngIf"],["for","settlementTo",1,"form-label"],[4,"ngIf","ngIfElse"],["settlementToTemplate",""],["for","amountPaid",1,"form-label"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","formControlName","amountPaid","type","number","aria-label","Amount (to the nearest dollar)",1,"form-control"],[4,"ngFor","ngForOf"],[1,"flex-end"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],["formControlName","userId",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-control","formControlName","settlementTo",3,"change",4,"ngIf"],["formControlName","settlementTo",1,"form-control",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"ms-1","form-label"]],template:function(r,s){if(r&1&&(E(0,"div",0)(1,"h3"),T(2,"Settle Payment"),_(),E(3,"form",1)(4,"div",2)(5,"label",3),T(6,"Who paid?"),_(),Y(7,zN,3,1,"div",4)(8,GN,2,1,"select",5),_(),E(9,"div",2)(10,"label",6),T(11,"Payment To"),_(),Y(12,WN,4,0,"ng-container",7)(13,QN,2,2,"ng-template",null,8,si),_(),E(15,"div",2)(16,"label",9),T(17,"Amount"),_(),E(18,"div",10)(19,"div",11)(20,"span",12),T(21,"$"),_()(),Ue(22,"input",13),_(),E(23,"div"),Y(24,XN,3,1,"p",14),_()(),E(25,"div",15)(26,"button",16),Q("click",function(){return s.close()}),T(27,"Close"),_(),E(28,"button",17),Q("click",function(){return s.settle()}),T(29,"Settle Payment"),_()()()()),r&2){let o=Wi(14),a;P(3),F("formGroup",s.form),P(4),F("ngIf",s.data.mode=="EDIT"),P(),F("ngIf",s.data.mode=="ADD"),P(4),F("ngIf",!((a=s.form.get("userName"))!=null&&a.value))("ngIfElse",o),P(12),F("ngForOf",s.settlementInfoMessages),P(4),F("disabled",s.form.invalid)}},dependencies:[Be,gt,_t,hr,cr,ac,cc,Nn,Gs,lr,or,ar,dr,Mn,ci],styles:[".modal-container[_ngcontent-%COMP%]{padding:1rem;width:30rem}button[_ngcontent-%COMP%]{margin:.25rem}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}@media (max-width: 575.98px){.modal-container[_ngcontent-%COMP%]{padding:1rem;width:18rem}}"]});let t=e;return t})();var es=Zt("[Expense] Split Equally",Fi()),ts=Zt("[Expense] Owed Full Amount",Fi()),ns=Zt("[Expense] Settle Payment",Fi()),aa=Zt("[Expense] Load State",Fi()),is=Zt("[Expense] Delete Expense",Fi()),Vi=Zt("[Expense] Update Expense",Fi()),ca=Zt("[Expense] Push Changes");var _u=ab("expense"),pb=Zr(_u,t=>t.project),mb=Zr(_u,t=>t.previousProjectState),XB=Zr(_u,t=>t.project.expenses),JB=Zr(_u,t=>t.project.users);var Qn=t=>{JN(t),nM(t),iM(t),tM(t)},JN=t=>{eM(t),ZN(t)},ZN=t=>{let e=n=>t.users.reduce((r,s)=>{if(s&&s.id!=n.id&&s.debts&&s.debts[n.id]){let o=s.debts[n.id];return D(m({},r),{[s.id]:+((r[s.id]??0)+o).toFixed(2)})}return r},{});t.users=t.users.map(n=>D(m({},n),{isOwed:e(n)}))},eM=t=>{let e=n=>t.expenses.reduce((r,s)=>{if(s&&s.paidBy&&s.paidBy.id!=n.id){let o=s.paidBy.id,a=s.credit[n.id];return D(m({},r),{[o]:+((r[o]??0)+a).toFixed(2)})}return r},{});t.users=t.users.map(n=>D(m({},n),{debts:e(n)}))},tM=t=>{t.users=t.users.map(e=>{let n=e?.isOwed?Object.entries(e.isOwed).reduce((r,[s,o])=>r+Math.abs(o),0):0,i=e?.debts?Object.entries(e.debts).reduce((r,[s,o])=>r+Math.abs(o),0):0;return D(m({},e),{amount:+(n-i).toFixed(2)})})},nM=t=>{t.users.forEach(e=>{e.debts&&e.isOwed&&rM(e.debts,e.isOwed).forEach(i=>{let r=Math.abs(e.debts[i]),s=Math.abs(e.isOwed[i]),o=Math.min(r,s);e.debts[i]=+(r-o).toFixed(2)||0,e.isOwed[i]=+(s-o).toFixed(2)||0})}),t.users.forEach(e=>{if(e.debts)for(let[n,i]of Object.entries(e.debts)){let r=i;(!r||r==0)&&delete e.debts[n]}if(e.isOwed)for(let[n,i]of Object.entries(e.isOwed)){let r=i;(!r||r==0)&&delete e.isOwed[n]}})},iM=t=>{let e=[...t.users];t.users=t.users.map(n=>{let i={},r={};return n.debts&&Object.entries(n.debts).forEach(([s,o])=>{let a=e.find(c=>c.id==s);a&&(i[a.name]=o)}),n.isOwed&&Object.entries(n.isOwed).forEach(([s,o])=>{let a=e.find(c=>c.id==s);a&&(r[a.name]=o)}),D(m({},n),{debtsMap:i,isOwedMap:r})})},gb=(t,e)=>{switch(e.transactionType){case"SPLIT_EQUALLY":return _g(t,e);case"OWED_FULL_AMOUNT":return gg(t,e);case"SETTLE":return yg(t,e);default:return null}},gg=(t,e)=>{let n=+(+e.amountPaid/(t.length-1))*-1;return t.reduce((r,s)=>{let o=e.paidBy?.id==s.id?+e.amountPaid:n;return D(m({},r),{[s.id]:+o.toFixed(2)})},{})},_g=(t,e)=>{let n=t.length,i=+(+e.amountPaid*(n-1)/n),r=+(+e.amountPaid/n*-1);return t.reduce((o,a)=>{let c=e.paidBy?.id==a.id?i:r;return D(m({},o),{[a.id]:+c.toFixed(2)})},{})},yg=(t,e)=>{if(e&&e.paidBy&&e.paidBy.id&&e.settlementTo){let n={[e.paidBy.id]:e.amountPaid,[e.settlementTo]:-Math.abs(e.amountPaid)};return t.map(i=>i.id).reduce((i,r)=>D(m({},i),{[r]:n[r]?n[r]:0}),{})}return null},rM=(t,e)=>Object.keys(t).filter(n=>Object.hasOwn(e,n));function sM(t,e){t&1&&(E(0,"p"),T(1,"No Data"),_())}function oM(t,e){if(t&1){let n=Ze();E(0,"div",4)(1,"h2"),T(2),_(),Ue(3,"app-user-info",5),E(4,"div",6)(5,"button",7),Q("click",function(){Ie(n);let r=W(2);return be(r.onAddExpenseModal())}),T(6,"Add Expense"),_(),E(7,"button",8),Q("click",function(){Ie(n);let r=W(2);return be(r.onSettlePaymentModal())}),T(8,"Settle"),_()(),E(9,"app-expenses",9),Q("onEditExpense",function(r){Ie(n);let s=W(2);return be(s.onEditExpenseButtonClick(r))})("onDeleteExpense",function(r){Ie(n);let s=W(2);return be(s.deleteExpense(r))}),_(),Y(10,sM,2,0,"ng-template",null,10,si),_()}if(t&2){let n=W(2);P(2),Ct(n.currentProjectState==null?null:n.currentProjectState.projectName),P(),F("project",n.currentProjectState),P(4),F("disabled",(n.currentProjectState==null||n.currentProjectState.expenses==null?null:n.currentProjectState.expenses.length)==0),P(2),F("data",n.currentProjectState==null?null:n.currentProjectState.expenses)}}function aM(t,e){if(t&1){let n=Ze();Mt(0),Y(1,oM,12,4,"div",2),E(2,"button",3),Q("click",function(){Ie(n);let r=W();return be(r.goToHome())}),T(3,"Home"),_(),Ft()}if(t&2){let n=W();P(),F("ngIf",(n.currentProjectState==null||n.currentProjectState.users==null?null:n.currentProjectState.users.length)>0)}}function cM(t,e){t&1&&T(0,` Loading...
`)}var _b=(()=>{let e=class e{constructor(i){this.projectFirebaseService=i,this.dialog=w(yc),this.store=w(pt),this.router=w(Et),this.route=w(ln),this.isLoading=!1,this.isModal=!0,this.userData=[],this.currentProjectState={users:[],expenses:[]},this.previousProjectState={users:[],expenses:[]},this.projectFireBaseId="",this.transactionTypes=[{id:dg,name:"Split equally"},{id:fg,name:"Owed full amount"}]}ngOnInit(){this.route.paramMap.subscribe(i=>{let r=i.params.id;this.projectFireBaseId=r,this.initializeProjectDetailData(r)}),this.store.select(pb).subscribe(i=>{this.currentProjectState=i}),this.store.select(mb).subscribe(i=>{this.previousProjectState=i})}initializeProjectDetailData(i){this.isLoading=!0,this.projectFirebaseService.getProjectById(i).then(r=>{this.store.dispatch(aa({payload:r.data()})),this.store.dispatch(ca())}).finally(()=>{this.isLoading=!1})}_initializeExpense(i){let r=this.currentProjectState.users.find(o=>o.id==i.userId),s={id:new Date().getMilliseconds()+"",paidBy:r,dateCreated:new Date,dateUpdated:new Date,amountPaid:i.amountPaid,name:i.name,transactionType:i.transactionType};switch(s.transactionType){case dg:{this.initFirebaseProcess(()=>{this.store.dispatch(es({payload:s}))});break}case fg:{this.initFirebaseProcess(()=>{this.store.dispatch(ts({payload:s}))});break}case pg:{let o=m({},s),a=this.currentProjectState.users.find(c=>c.id==i.settlementTo);o.settlementTo=i.settlementTo,o.name=this.getSettlementExpenseName(a),this.initFirebaseProcess(()=>{this.store.dispatch(ns({payload:o}))});break}}}initFirebaseProcess(i){let r=m({},this.currentProjectState);i&&i(),this.projectFirebaseService.updateProject(this.projectFireBaseId,this.previousProjectState).then(s=>{console.log("Successfully saved"),this.store.dispatch(ca())}).catch(s=>{this.store.dispatch(aa({payload:r})),alert("Service is currently unavailable")})}onAddExpenseModal(){this.dialog.open(gu,{data:{users:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"ADD"}}).afterClosed().subscribe(r=>{r&&this._initializeExpense(r)})}onEditExpenseButtonClick(i){let r=this.currentProjectState.expenses.find(s=>s.id==i);switch(r.transactionType){case"SPLIT_EQUALLY":{this.openEditExpenseModal(r);break}case"OWED_FULL_AMOUNT":{this.openEditExpenseModal(r);break}case"SETTLE":{this._openEditSettleModal(r);break}}}openEditExpenseModal(i){i?this.dialog.open(gu,{data:{users:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"EDIT",expense:i}}).afterClosed().subscribe(s=>{if(s){let o=this.currentProjectState.users.find(c=>c.id==s.userId),a=D(m({},i),{paidBy:o,dateUpdated:new Date,amountPaid:+s.amountPaid,name:s.name,transactionType:s.transactionType});this.initFirebaseProcess(()=>{this.store.dispatch(Vi({payload:a}))})}}):console.error("User not found!")}_openEditSettleModal(i){if(i){let r=m({},this.currentProjectState);r=D(m({},r),{expenses:r.expenses.filter(o=>o.id!=i.id)}),Qn(r),this.dialog.open(mg,{data:{currentUsersState:m({},this.currentProjectState).users,previousUsersState:r.users,expense:i,mode:"EDIT"}}).afterClosed().subscribe(o=>{if(o){let a=this.currentProjectState.users.find(u=>u.id==o.userId),c=this.currentProjectState.users.find(u=>u.id==o.settlementTo),l={id:i.id,paidBy:a,dateUpdated:new Date,settlementTo:o.settlementTo,amountPaid:+o.amountPaid,transactionType:i.transactionType,name:this.getSettlementExpenseName(c)};this.initFirebaseProcess(()=>{this.store.dispatch(Vi({payload:l}))})}})}else console.error("User not found!")}onSettlePaymentModal(){this.dialog.open(mg,{data:{previousUsersState:this.currentProjectState.users,currentUsersState:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"ADD"}}).afterClosed().subscribe(r=>{r&&(r.transactionType=pg,this._initializeExpense(r))})}getSettlementExpenseName(i){return`Settle payment to user ${i?.name}`}deleteExpense(i){this.dialog.open(gu,{data:{users:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"DELETE"}}).afterClosed().subscribe(s=>{s&&this.initFirebaseProcess(()=>{this.store.dispatch(is({payload:i}))})})}goToHome(){this.router.navigate(["/"])}};e.\u0275fac=function(r){return new(r||e)(b(Xr))},e.\u0275cmp=fe({type:e,selectors:[["project-detail"]],standalone:!0,features:[pe],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["class","project-detail-container",4,"ngIf"],[3,"click"],[1,"project-detail-container"],[3,"project"],[1,"button-container","my-1"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"],[3,"data","onEditExpense","onDeleteExpense"],["noData",""]],template:function(r,s){if(r&1&&Y(0,aM,4,1,"ng-container",0)(1,cM,1,0,"ng-template",null,1,si),r&2){let o=Wi(2);F("ngIf",!s.isLoading)("ngIfElse",o)}},dependencies:[hb,fb,Be,_t],styles:[".flex[_ngcontent-%COMP%]{display:flex}.button-container[_ngcontent-%COMP%]{padding-top:2rem;display:flex;justify-content:flex-end}button[_ngcontent-%COMP%]{margin:.25rem}"]});let t=e;return t})();var yb=[{path:"",component:ub},{path:"project/:id",component:_b}];var lM="@",uM=(()=>{let e=class e{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=w(zg,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-UQACE7K6.js")).catch(r=>{throw new se(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new vg(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);o.use(c)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){pa()},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),vg=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(lM)}};function vb(t="animations"){return qg("NgAsyncAnimations"),rn([{provide:ga,useFactory:(e,n,i)=>new uM(e,n,i,t),deps:[H,Ca,z]},{provide:ti,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var hM={project:{users:[],expenses:[]},previousProjectState:{users:[],expenses:[]}};var Eb=lb(hM,Yn(aa,(t,e)=>D(m({},t),{previousProjectState:m({},e.payload)})),Yn(ts,(t,e)=>{let n=gg(t.previousProjectState.users,e.payload),i=D(m({},t.previousProjectState),{users:t.previousProjectState.users,expenses:[D(m({},e.payload),{credit:n}),...t.previousProjectState.expenses]});return Qn(i),D(m({},t),{previousProjectState:i})}),Yn(es,(t,e)=>{let n=_g(t.previousProjectState.users,e.payload),i=D(m({},t.previousProjectState),{users:t.previousProjectState.users,expenses:[D(m({},e.payload),{credit:n}),...t.previousProjectState.expenses]});return Qn(i),D(m({},t),{previousProjectState:i})}),Yn(ns,(t,e)=>{let n=yg(t.previousProjectState.users,e.payload),i=D(m({},t.previousProjectState),{users:t.previousProjectState.users,expenses:[D(m({},e.payload),{credit:n}),...t.previousProjectState.expenses]});return Qn(i),D(m({},t),{previousProjectState:i})}),Yn(is,(t,e)=>{let n=e.payload,i=D(m({},t.previousProjectState),{users:t.previousProjectState.users,expenses:t.previousProjectState.expenses.filter(r=>r.id!=n)});return Qn(i),D(m({},t),{previousProjectState:i})}),Yn(Vi,(t,e)=>{let n=dM(e.payload,t.previousProjectState);return Qn(n),D(m({},t),{previousProjectState:n})}),Yn(ca,t=>D(m({},t),{project:m({},t.previousProjectState)}))),dM=(t,e)=>{t=D(m({},t),{credit:gb(e.users,t)});let n=e.expenses.find(s=>s.id==t.id),i=e.expenses.findIndex(s=>s.id===t.id);t=m(m({},n),t);let r=[...e.expenses];return r[i]=t,D(m({},e),{expenses:r})};var fM={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},yu="__@ngrx/effects_create__";function wb(t,e={}){let n=e.functional?t:t(),i=m(m({},fM),e);return Object.defineProperty(n,yu,{value:i}),n}function pM(t){return Object.getOwnPropertyNames(t).filter(i=>t[i]&&t[i].hasOwnProperty(yu)?t[i][yu].hasOwnProperty("dispatch"):!1).map(i=>{let r=t[i][yu];return m({propertyName:i},r)})}function mM(t){return pM(t)}function Ib(t){return Object.getPrototypeOf(t)}function gM(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function bb(t){return typeof t=="function"}function _M(t){return t.filter(bb)}function yM(t,e,n){let i=Ib(t),s=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,o=mM(t).map(({propertyName:a,dispatch:c,useEffectsErrorHandler:l})=>{let u=typeof t[a]=="function"?t[a]():t[a],h=l?n(u,e):u;return c===!1?h.pipe(Cg()):h.pipe(xg()).pipe(U(f=>({effect:t[a],notification:f,propertyName:a,sourceName:s,sourceInstance:t})))});return Zn(...o)}var vM=10;function Tb(t,e,n=vM){return t.pipe(Tn(i=>(e&&e.handleError(i),n<=1?t:Tb(t,e,n-1))))}var Ab=(()=>{let e=class e extends nt{constructor(i){super(),i&&(this.source=i)}lift(i){let r=new e;return r.source=this,r.operator=i,r}};e.\u0275fac=function(r){return new(r||e)(g(oa))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Cb(...t){return le(e=>t.some(n=>typeof n=="string"?n===e.type:n.type===e.type))}var B$=new I("@ngrx/effects Internal Root Guard"),$$=new I("@ngrx/effects User Provided Effects"),z$=new I("@ngrx/effects Internal Root Effects"),q$=new I("@ngrx/effects Internal Root Effects Instances"),G$=new I("@ngrx/effects Internal Feature Effects"),W$=new I("@ngrx/effects Internal Feature Effects Instance Groups"),EM=new I("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Tb}),wM="@ngrx/effects/init",IM=Zt(wM);function bM(t,e){if(t.notification.kind==="N"){let n=t.notification.value;!TM(n)&&e.handleError(new Error(`Effect ${AM(t)} dispatched an invalid action: ${CM(n)}`))}}function TM(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function AM({propertyName:t,sourceInstance:e,sourceName:n}){let i=typeof e[t]=="function";return!!n?`"${n}.${String(t)}${i?"()":""}"`:`"${String(t)}()"`}function CM(t){try{return JSON.stringify(t)}catch{return t}}var SM="ngrxOnIdentifyEffects";function RM(t){return Eg(t,SM)}var DM="ngrxOnRunEffects";function PM(t){return Eg(t,DM)}var xM="ngrxOnInitEffects";function OM(t){return Eg(t,xM)}function Eg(t,e){return t&&e in t&&typeof t[e]=="function"}var Sb=(()=>{let e=class e extends J{constructor(i,r){super(),this.errorHandler=i,this.effectsErrorHandler=r}addEffects(i){this.next(i)}toActions(){return this.pipe(Ru(i=>gM(i)?Ib(i):i),We(i=>i.pipe(Ru(kM))),We(i=>{let r=i.pipe(Dg(o=>NM(this.errorHandler,this.effectsErrorHandler)(o)),U(o=>(bM(o,this.errorHandler),o.notification)),le(o=>o.kind==="N"&&o.value!=null),Rg()),s=i.pipe(He(1),le(OM),U(o=>o.ngrxOnInitEffects()));return Zn(r,s)}))}};e.\u0275fac=function(r){return new(r||e)(g(ls),g(EM))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kM(t){return RM(t)?t.ngrxOnIdentifyEffects():""}function NM(t,e){return n=>{let i=yM(n,t,e);return PM(n)?n.ngrxOnRunEffects(i):i}}var MM=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(i,r){this.effectSources=i,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(g(Sb),g(pt))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Rb(...t){let e=t.flat(),n=_M(e);return rn([n,{provide:Bi,multi:!0,useValue:()=>{w(fu),w(tb,{optional:!0});let i=w(MM),r=w(Sb),s=!i.isStarted;s&&i.start();for(let o of e){let a=bb(o)?w(o):o;r.addEffects(a)}s&&w(pt).dispatch(IM())}}])}var Db=(()=>{let e=class e{constructor(i,r,s){this.actions$=i,this.projectFirebaseService=r,this.store=s,this.log=wb(()=>this.actions$.pipe(Cb(ts,es,ns,is,Vi),de(o=>{console.log("Action",o)})),{dispatch:!1})}};e.\u0275fac=function(r){return new(r||e)(g(Ab),g(Xr),g(pt))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();var VM={apiKey:"AIzaSyDtzDGTgBgvdbj2IZPjjlTHlw--ihn4E4I",authDomain:"splitbillapp-c8f1f.firebaseapp.com",projectId:"splitbillapp-c8f1f",storageBucket:"splitbillapp-c8f1f.appspot.com",messagingSenderId:"842401796749",appId:"1:842401796749:web:f8522a221179940bc708c4",measurementId:"G-FWZW3K5H3C"},Pb={providers:[dy(yb),vb(),cb({expense:Eb}),Rb([Db]),Ug([x0(()=>M0()),Zv(()=>eE(VM))])]};var xb=(()=>{let e=class e{constructor(i){this.fireStore=i,this.title="Split Bill App",this.http=fa(__)}};e.\u0275fac=function(r){return new(r||e)(b(In))},e.\u0275cmp=fe({type:e,selectors:[["app-root"]],standalone:!0,features:[pe],decls:4,vars:0,consts:[[1,"display-1"],[1,"container"]],template:function(r,s){r&1&&(E(0,"span",0),T(1,"SplitBill"),_(),E(2,"div",1),Ue(3,"router-outlet"),_())},dependencies:[Nh,Be,_y],styles:[".container[_ngcontent-%COMP%]{padding:1rem}"]});let t=e;return t})();T_(xb,Pb).catch(t=>console.error(t));
