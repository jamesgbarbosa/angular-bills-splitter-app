import{$ as Et,$a as $g,$b as Hi,A as Ou,Aa as _,Ab as Ea,B as yg,Ba as b,Bb as wa,C as Cn,Ca as Ng,Cb as xn,D as vg,Da as ht,Db as E,E as Eg,Ea as Mg,Eb as st,F as ni,Fa as zi,Fb as ge,G as ye,Ga as cn,Gb as Ia,H as ku,Ha as Fg,Hb as Wg,I as Sn,Ia as Vg,Ib as wt,J as ii,Ja as ls,Jb as oe,K as Nu,Ka as Dn,Kb as Kg,L as Ke,La as Lg,Lb as ln,M as wg,Ma as Ut,Mb as ci,N as Ig,Na as ft,Nb as zu,O as bg,Oa as Ug,Ob as un,P as $i,Pa as Re,Pb as ps,Q as Tg,Qa as us,Qb as ba,R as os,Ra as jg,Rb as Ta,S as An,Sa as ds,Sb as Ca,T as Mu,Ta as I,Tb as qu,U as Fu,Ua as T,Ub as Gu,V as Cg,Va as ga,Vb as ms,W as Sg,Wa as hs,Wb as Sa,X as Ag,Xa as Bg,Xb as gs,Y as as,Ya as _a,Yb as Yg,Z as Rg,Za as ya,Zb as li,_ as Rn,_a as oi,_b as Qg,a as m,aa as ri,ab as va,ac as Xg,b as R,ba as ve,bb as Uu,bc as Zg,ca as Dg,cb as ai,cc as Y,d as Cb,da as ce,db as ju,dc as Jg,e as p,ea as Ee,eb as q,ec as _s,f as ei,fa as Vu,fb as zg,fc as e_,g as Su,ga as cs,gb as qi,gc as t_,h as dt,ha as Be,hb as De,hc as dn,i as Au,ia as re,ib as fs,ic as n_,j as Ru,ja as fe,jb as qg,jc as Aa,k as X,ka as se,kb as Bu,kc as ot,l as Me,la as Pg,lb as Gg,lc as at,m as gg,ma as de,mb as $,mc as i_,n as fa,na as he,nb as Pn,nc as r_,o as ti,oa as Ae,ob as O,oc as Oe,p as Du,pa as xg,pb as Gi,pc as s_,q as rs,qa as D,qb as y,qc as o_,r as Pu,ra as pe,rb as g,rc as Hu,s as He,sa as Og,sb as me,sc as a_,t as M,ta as C,tb as Ye,tc as c_,u as ss,ua as ma,ub as Qe,v as xu,va as kg,vb as nt,w as _g,wa as Rt,wb as Hg,x as H,xa as si,xb as W,y as pa,ya as Lu,yb as j,z as We,za as an,zb as $u}from"./chunk-WPSFNQQB.js";var Yu=class extends Zg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qu=class t extends Yu{static makeCurrent(){Xg(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Sb();return n==null?null:Ab(n)}resetBaseElement(){ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return n_(document.cookie,e)}},ys=null;function Sb(){return ys=ys||document.querySelector("base"),ys?ys.getAttribute("href"):null}function Ab(t){return new URL(t,document.baseURI).pathname}var Rb=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Xu=new C(""),d_=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new ce(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(_(Xu),_(q))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Ra=class{constructor(e){this._doc=e}},Wu="ng-app-id",h_=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Wu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Wu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Wu,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(_(Y),_(ma),_(Lu,8),_(Rt))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Ku={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ju=/%COMP%/g,f_="%COMP%",Db=`_nghost-${f_}`,Pb=`_ngcontent-${f_}`,xb=!0,Ob=new C("",{providedIn:"root",factory:()=>xb});function kb(t){return Pb.replace(Ju,t)}function Nb(t){return Db.replace(Ju,t)}function p_(t,e){return e.map(n=>n.replace(Ju,t))}var Da=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Hu(c),this.defaultRenderer=new vs(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cs.ShadowDom&&(r=R(m({},r),{encapsulation:cs.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Pa?s.applyToHost(i):s instanceof Es&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case cs.Emulated:o=new Pa(l,u,r,this.appId,d,a,c,h);break;case cs.ShadowDom:return new Zu(l,u,i,r,a,c,this.nonce,h);default:o=new Es(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(_(d_),_(h_),_(ma),_(Ob),_(Y),_(Rt),_(q),_(Lu))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),vs=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ku[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(l_(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(l_(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ce(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=Ku[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Ku[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ds.DashCase|ds.Important)?e.style.setProperty(n,i,r&ds.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ds.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Hi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function l_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Zu=class extends vs{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=p_(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Es=class extends vs{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?p_(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pa=class extends Es{constructor(e,n,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=kb(l),this.hostAttr=Nb(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},Mb=(()=>{let e=class e extends Ra{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(_(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),u_=["alt","control","meta","shift"],Fb={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vb={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Lb=(()=>{let e=class e extends Ra{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hi().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),u_.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=Fb[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),u_.forEach(a=>{if(a!==s){let c=Vb[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(_(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function m_(t,e){return Yg(m({rootComponent:t},Ub(e)))}function Ub(t){return{appProviders:[...qb,...t?.providers??[]],platformProviders:zb}}function jb(){Qu.makeCurrent()}function Bb(){return new us}function $b(){return xg(document),document}var zb=[{provide:Rt,useValue:s_},{provide:kg,useValue:jb,multi:!0},{provide:Y,useFactory:$b,deps:[]}];var qb=[{provide:Vg,useValue:"root"},{provide:us,useFactory:Bb,deps:[]},{provide:Xu,useClass:Mb,multi:!0,deps:[Y,q,Rt]},{provide:Xu,useClass:Lb,multi:!0,deps:[Y]},Da,h_,d_,{provide:ya,useExisting:Da},{provide:c_,useClass:Rb,deps:[]},[]];var g_=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(_(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var z="primary",Fs=Symbol("RouteTitle"),rd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Xi(t){return new rd(t)}function Hb(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Wb(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!jt(t[n],e[n]))return!1;return!0}function jt(t,e){let n=t?sd(t):void 0,i=e?sd(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!C_(t[r],e[r]))return!1;return!0}function sd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function C_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function S_(t){return t.length>0?t[t.length-1]:null}function Mn(t){return xu(t)?t:Ca(t)?He(Promise.resolve(t)):M(t)}var Kb={exact:R_,subset:D_},A_={exact:Yb,subset:Qb,ignored:()=>!0};function __(t,e,n){return Kb[n.paths](t.root,e.root,n.matrixParams)&&A_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Yb(t,e){return jt(t,e)}function R_(t,e,n){if(!di(t.segments,e.segments)||!ka(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!R_(t.children[i],e.children[i],n))return!1;return!0}function Qb(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>C_(t[n],e[n]))}function D_(t,e,n){return P_(t,e,e.segments,n)}function P_(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!di(r,n)||e.hasChildren()||!ka(r,n,i))}else if(t.segments.length===n.length){if(!di(t.segments,n)||!ka(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!D_(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!di(t.segments,r)||!ka(t.segments,r,i)||!t.children[z]?!1:P_(t.children[z],e,s,i)}}function ka(t,e,n){return e.every((i,r)=>A_[n](t[r].parameters,i.parameters))}var On=class{constructor(e=new te([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){return Jb.serialize(this)}},te=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Na(this)}},ui=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Xi(this.parameters),this._parameterMap}toString(){return O_(this)}};function Xb(t,e){return di(t,e)&&t.every((n,i)=>jt(n.parameters,e[i].parameters))}function di(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function Zb(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===z&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==z&&(n=n.concat(e(r,i)))}),n}var Vs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new As,providedIn:"root"});let t=e;return t})(),As=class{parse(e){let n=new ad(e);return new On(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ws(e.root,!0)}`,i=nT(e.queryParams),r=typeof e.fragment=="string"?`#${eT(e.fragment)}`:"";return`${n}${i}${r}`}},Jb=new As;function Na(t){return t.segments.map(e=>O_(e)).join("/")}function ws(t,e){if(!t.hasChildren())return Na(t);if(e){let n=t.children[z]?ws(t.children[z],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==z&&i.push(`${r}:${ws(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=Zb(t,(i,r)=>r===z?[ws(t.children[z],!1)]:[`${r}:${ws(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[z]!=null?`${Na(t)}/${n[0]}`:`${Na(t)}/(${n.join("//")})`}}function x_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xa(t){return x_(t).replace(/%3B/gi,";")}function eT(t){return encodeURI(t)}function od(t){return x_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ma(t){return decodeURIComponent(t)}function y_(t){return Ma(t.replace(/\+/g,"%20"))}function O_(t){return`${od(t.path)}${tT(t.parameters)}`}function tT(t){return Object.entries(t).map(([e,n])=>`;${od(e)}=${od(n)}`).join("")}function nT(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${xa(n)}=${xa(r)}`).join("&"):`${xa(n)}=${xa(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var iT=/^[^\/()?;#]+/;function ed(t){let e=t.match(iT);return e?e[0]:""}var rT=/^[^\/()?;=#]+/;function sT(t){let e=t.match(rT);return e?e[0]:""}var oT=/^[^=?&#]+/;function aT(t){let e=t.match(oT);return e?e[0]:""}var cT=/^[^&#]+/;function lT(t){let e=t.match(cT);return e?e[0]:""}var ad=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[z]=new te(e,n)),i}parseSegment(){let e=ed(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new ui(Ma(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=sT(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=ed(this.remaining);r&&(i=r,this.capture(i))}e[Ma(n)]=Ma(i)}parseQueryParam(e){let n=aT(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=lT(this.remaining);o&&(i=o,this.capture(i))}let r=y_(n),s=y_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=ed(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ce(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=z);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[z]:new te([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}};function k_(t){return t.segments.length>0?new te([],{[z]:t}):t}function N_(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=N_(r);if(i===z&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new te(t.segments,e);return uT(n)}function uT(t){if(t.numberOfChildren===1&&t.children[z]){let e=t.children[z];return new te(t.segments.concat(e.segments),e.children)}return t}function Zi(t){return t instanceof On}function dT(t,e,n=null,i=null){let r=M_(t);return F_(r,e,n,i)}function M_(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new te(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=k_(i);return e??r}function F_(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return td(r,r,r,n,i);let s=hT(e);if(s.toRoot())return td(r,r,new te([],{}),n,i);let o=fT(s,r,t),a=o.processChildren?Ts(o.segmentGroup,o.index,s.commands):L_(o.segmentGroup,o.index,s.commands);return td(r,o.segmentGroup,a,n,i)}function Fa(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Rs(t){return typeof t=="object"&&t!=null&&t.outlets}function td(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=V_(t,e,n);let a=k_(N_(o));return new On(a,s,r)}function V_(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=V_(s,e,n)}),new te(t.segments,i)}var Va=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Fa(i[0]))throw new ce(4003,!1);let r=i.find(Rs);if(r&&r!==S_(i))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hT(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Va(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Va(n,e,i)}var Yi=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function fT(t,e,n){if(t.isAbsolute)return new Yi(e,!0,0);if(!n)return new Yi(e,!1,NaN);if(n.parent===null)return new Yi(n,!0,0);let i=Fa(t.commands[0])?0:1,r=n.segments.length-1+i;return pT(n,r,t.numberOfDoubleDots)}function pT(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ce(4005,!1);r=i.segments.length}return new Yi(i,!1,r-s)}function mT(t){return Rs(t[0])?t[0].outlets:{[z]:t}}function L_(t,e,n){if(t??=new te([],{}),t.segments.length===0&&t.hasChildren())return Ts(t,e,n);let i=gT(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new te(t.segments.slice(0,i.pathIndex),{});return s.children[z]=new te(t.segments.slice(i.pathIndex),t.children),Ts(s,0,r)}else return i.match&&r.length===0?new te(t.segments,{}):i.match&&!t.hasChildren()?cd(t,e,n):i.match?Ts(t,0,r):cd(t,e,n)}function Ts(t,e,n){if(n.length===0)return new te(t.segments,{});{let i=mT(n),r={};if(Object.keys(i).some(s=>s!==z)&&t.children[z]&&t.numberOfChildren===1&&t.children[z].segments.length===0){let s=Ts(t.children[z],e,n);return new te(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=L_(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new te(t.segments,r)}}function gT(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(Rs(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!E_(c,l,o))return s;i+=2}else{if(!E_(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function cd(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(Rs(s)){let c=_T(s.outlets);return new te(i,c)}if(r===0&&Fa(n[0])){let c=t.segments[e];i.push(new ui(c.path,v_(n[0]))),r++;continue}let o=Rs(s)?s.outlets[z]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Fa(a)?(i.push(new ui(o,v_(a))),r+=2):(i.push(new ui(o,{})),r++)}return new te(i,{})}function _T(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=cd(new te([],{}),0,i))}),e}function v_(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function E_(t,e,n){return t==n.path&&jt(e,n.parameters)}var Cs="imperative",Fe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Fe||{}),bt=class{constructor(e,n){this.id=e,this.url=n}},Ji=class extends bt{constructor(e,n,i="imperative",r=null){super(e,n),this.type=Fe.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bt=class extends bt{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=Fe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},It=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(It||{}),La=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(La||{}),kn=class extends bt{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Fe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nn=class extends bt{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Fe.NavigationSkipped}},Ds=class extends bt{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=Fe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ua=class extends bt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Fe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ld=class extends bt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Fe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ud=class extends bt{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Fe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dd=class extends bt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Fe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hd=class extends bt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Fe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fd=class{constructor(e){this.route=e,this.type=Fe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pd=class{constructor(e){this.route=e,this.type=Fe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},md=class{constructor(e){this.snapshot=e,this.type=Fe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gd=class{constructor(e){this.snapshot=e,this.type=Fe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_d=class{constructor(e){this.snapshot=e,this.type=Fe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yd=class{constructor(e){this.snapshot=e,this.type=Fe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ja=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=Fe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ps=class{},xs=class{constructor(e){this.url=e}};var vd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ls,this.attachRef=null}},Ls=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new vd,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ba=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ed(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Ed(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return wd(e,this._root).map(n=>n.value)}};function Ed(t,e){if(t===e.value)return e;for(let n of e.children){let i=Ed(t,n);if(i)return i}return null}function wd(t,e){if(t===e.value)return[e];for(let n of e.children){let i=wd(t,n);if(i.length)return i.unshift(e),i}return[]}var pt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ki(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var $a=class extends Ba{constructor(e,n){super(e),this.snapshot=n,xd(this,e)}toString(){return this.snapshot.toString()}};function U_(t){let e=yT(t),n=new Me([new ui("",{})]),i=new Me({}),r=new Me({}),s=new Me({}),o=new Me(""),a=new $t(n,i,s,o,r,z,t,e.root);return a.snapshot=e.root,new $a(new pt(a,[]),e)}function yT(t){let e={},n={},i={},r="",s=new Os([],e,i,r,n,z,t,null,{});return new za("",new pt(s,[]))}var $t=class{constructor(e,n,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(H(l=>l[Fs]))??M(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(e=>Xi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(e=>Xi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pd(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:m(m({},e.params),t.params),data:m(m({},e.data),t.data),resolve:m(m(m(m({},t.data),e.data),r?.data),t._resolvedData)}:i={params:m({},t.params),data:m({},t.data),resolve:m(m({},t.data),t._resolvedData??{})},r&&B_(r)&&(i.resolve[Fs]=r.title),i}var Os=class{get title(){return this.data?.[Fs]}constructor(e,n,i,r,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},za=class extends Ba{constructor(e,n){super(n),this.url=e,xd(this,n)}toString(){return j_(this._root)}};function xd(t,e){e.value._routerState=t,e.children.forEach(n=>xd(t,n))}function j_(t){let e=t.children.length>0?` { ${t.children.map(j_).join(", ")} } `:"";return`${t.value}${e}`}function nd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,jt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),jt(e.params,n.params)||t.paramsSubject.next(n.params),Wb(e.url,n.url)||t.urlSubject.next(n.url),jt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Id(t,e){let n=jt(t.params,e.params)&&Xb(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Id(t.parent,e.parent))}function B_(t){return typeof t.title=="string"||t.title===null}var Od=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=z,this.activateEvents=new Ee,this.deactivateEvents=new Ee,this.attachEvents=new Ee,this.detachEvents=new Ee,this.parentContexts=b(Ls),this.location=b(qi),this.changeDetector=b(ai),this.environmentInjector=b(ls),this.inputBinder=b(Wa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new bd(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=se({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ut]});let t=e;return t})(),bd=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===$t?this.route:e===Ls?this.childContexts:this.parent.get(e,n)}},Wa=new C(""),w_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=pa([r.queryParams,r.params,r.data]).pipe(Et(([o,a,c],l)=>(c=m(m(m({},o),a),c),l===0?M(c):Promise.resolve(c)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=Qg(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function vT(t,e,n){let i=ks(t,e._root,n?n._root:void 0);return new $a(i,e)}function ks(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=ET(t,e,n);return new pt(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ks(t,a)),o}}let i=wT(e.value),r=e.children.map(s=>ks(t,s));return new pt(i,r)}}function ET(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return ks(t,i,r);return ks(t,i)})}function wT(t){return new $t(new Me(t.url),new Me(t.params),new Me(t.queryParams),new Me(t.fragment),new Me(t.data),t.outlet,t.component,t)}var $_="ngNavigationCancelingError";function z_(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Zi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=q_(!1,It.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function q_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[$_]=!0,n.cancellationCode=e,n}function IT(t){return G_(t)&&Zi(t.url)}function G_(t){return!!t&&t[$_]}var bT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=re({type:e,selectors:[["ng-component"]],standalone:!0,features:[oe],decls:1,vars:0,template:function(r,s){r&1&&me(0,"router-outlet")},dependencies:[Od],encapsulation:2});let t=e;return t})();function TT(t,e){return t.providers&&!t._injector&&(t._injector=Bu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function kd(t){let e=t.children&&t.children.map(kd),n=e?R(m({},t),{children:e}):m({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==z&&(n.component=bT),n}function zt(t){return t.outlet||z}function CT(t,e){let n=t.filter(i=>zt(i)===e);return n.push(...t.filter(i=>zt(i)!==e)),n}function Us(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ST=(t,e,n,i)=>H(r=>(new Td(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Td=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),nd(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Ki(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Ki(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Ki(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Ki(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new yd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gd(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(nd(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nd(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Us(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},qa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qi=class{constructor(e,n){this.component=e,this.route=n}};function AT(t,e,n){let i=t._root,r=e?e._root:null;return Is(i,r,n,[i.value])}function RT(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function tr(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!Og(t)?t:e.get(t):i}function Is(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ki(e);return t.children.forEach(o=>{DT(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ss(a,n.getContext(o),r)),r}function DT(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=PT(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new qa(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Is(t,e,a?a.children:null,i,r):Is(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Qi(a.outlet.component,o))}else o&&Ss(e,a,r),r.canActivateChecks.push(new qa(i)),s.component?Is(t,null,a?a.children:null,i,r):Is(t,null,n,i,r);return r}function PT(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!di(t.url,e.url);case"pathParamsOrQueryParamsChange":return!di(t.url,e.url)||!jt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Id(t,e)||!jt(t.queryParams,e.queryParams);case"paramsChange":default:return!Id(t,e)}}function Ss(t,e,n){let i=Ki(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Ss(o,e.children.getContext(s),n):Ss(o,null,n):Ss(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Qi(e.outlet.component,r)):n.canDeactivateChecks.push(new Qi(null,r)):n.canDeactivateChecks.push(new Qi(null,r))}function js(t){return typeof t=="function"}function xT(t){return typeof t=="boolean"}function OT(t){return t&&js(t.canLoad)}function kT(t){return t&&js(t.canActivate)}function NT(t){return t&&js(t.canActivateChild)}function MT(t){return t&&js(t.canDeactivate)}function FT(t){return t&&js(t.canMatch)}function H_(t){return t instanceof _g||t?.name==="EmptyError"}var Oa=Symbol("INITIAL_VALUE");function er(){return Et(t=>pa(t.map(e=>e.pipe(Ke(1),Rn(Oa)))).pipe(H(e=>{for(let n of e)if(n!==!0){if(n===Oa)return Oa;if(n===!1||n instanceof On)return n}return!0}),ye(e=>e!==Oa),Ke(1)))}function VT(t,e){return We(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?M(R(m({},n),{guardsResult:!0})):LT(o,i,r,t).pipe(We(a=>a&&xT(a)?UT(i,s,t,e):M(a)),H(a=>R(m({},n),{guardsResult:a})))})}function LT(t,e,n,i){return He(t).pipe(We(r=>qT(r.component,r.route,n,e,i)),An(r=>r!==!0,!0))}function UT(t,e,n,i){return He(e).pipe(ii(r=>yg(BT(r.route.parent,i),jT(r.route,i),zT(t,r.path,n),$T(t,r.route,n))),An(r=>r!==!0,!0))}function jT(t,e){return t!==null&&e&&e(new _d(t)),M(!0)}function BT(t,e){return t!==null&&e&&e(new md(t)),M(!0)}function $T(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return M(!0);let r=i.map(s=>Cn(()=>{let o=Us(e)??n,a=tr(s,o),c=kT(a)?a.canActivate(e,t):Dn(o,()=>a(e,t));return Mn(c).pipe(An())}));return M(r).pipe(er())}function zT(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>RT(o)).filter(o=>o!==null).map(o=>Cn(()=>{let a=o.guards.map(c=>{let l=Us(o.node)??n,u=tr(c,l),d=NT(u)?u.canActivateChild(i,t):Dn(l,()=>u(i,t));return Mn(d).pipe(An())});return M(a).pipe(er())}));return M(s).pipe(er())}function qT(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return M(!0);let o=s.map(a=>{let c=Us(e)??r,l=tr(a,c),u=MT(l)?l.canDeactivate(t,e,n,i):Dn(c,()=>l(t,e,n,i));return Mn(u).pipe(An())});return M(o).pipe(er())}function GT(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return M(!0);let s=r.map(o=>{let a=tr(o,t),c=OT(a)?a.canLoad(e,n):Dn(t,()=>a(e,n));return Mn(c)});return M(s).pipe(er(),W_(i))}function W_(t){return Su(ve(e=>{if(Zi(e))throw z_(t,e)}),H(e=>e===!0))}function HT(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return M(!0);let s=r.map(o=>{let a=tr(o,t),c=FT(a)?a.canMatch(e,n):Dn(t,()=>a(e,n));return Mn(c)});return M(s).pipe(er(),W_(i))}var Ns=class{constructor(e){this.segmentGroup=e||null}},Ga=class extends Error{constructor(e){super(),this.urlTree=e}};function Wi(t){return ss(new Ns(t))}function WT(t){return ss(new ce(4e3,!1))}function KT(t){return ss(q_(!1,It.GuardRejected))}var Cd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return M(i);if(r.numberOfChildren>1||!r.children[z])return WT(e.redirectTo);r=r.children[z]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Ga(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new On(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new te(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new ce(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Sd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function YT(t,e,n,i,r){let s=Nd(t,e,n);return s.matched?(i=TT(e,i),HT(i,e,n,r).pipe(H(o=>o===!0?s:m({},Sd)))):M(s)}function Nd(t,e,n){if(e.path==="**")return QT(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?m({},Sd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Hb)(n,t,e);if(!r)return m({},Sd);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?m(m({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function QT(t){return{matched:!0,parameters:t.length>0?S_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function I_(t,e,n,i){return n.length>0&&JT(t,n,i)?{segmentGroup:new te(e,ZT(i,new te(n,t.children))),slicedSegments:[]}:n.length===0&&eC(t,n,i)?{segmentGroup:new te(t.segments,XT(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new te(t.segments,t.children),slicedSegments:n}}function XT(t,e,n,i){let r={};for(let s of n)if(Ka(t,e,s)&&!i[zt(s)]){let o=new te([],{});r[zt(s)]=o}return m(m({},i),r)}function ZT(t,e){let n={};n[z]=e;for(let i of t)if(i.path===""&&zt(i)!==z){let r=new te([],{});n[zt(i)]=r}return n}function JT(t,e,n){return n.some(i=>Ka(t,e,i)&&zt(i)!==z)}function eC(t,e,n){return n.some(i=>Ka(t,e,i))}function Ka(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function tC(t,e,n,i){return zt(t)!==i&&(i===z||!Ka(e,n,t))?!1:Nd(e,t,n).matched}function nC(t,e,n){return e.length===0&&!t.children[n]}var Ad=class{};function iC(t,e,n,i,r,s,o="emptyOnly"){return new Rd(t,e,n,i,r,o,s).recognize()}var rC=31,Rd=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Cd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=I_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(H(n=>{let i=new Os([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,{},z,this.rootComponentType,null,{}),r=new pt(i,n),s=new za("",r),o=dT(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,z).pipe(Sn(i=>{if(i instanceof Ga)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ns?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Pd(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(H(s=>s instanceof pt?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return He(r).pipe(ii(s=>{let o=i.children[s],a=CT(n,s);return this.processSegmentGroup(e,a,o,s)}),as((s,o)=>(s.push(...o),s)),Nu(null),Cg(),We(s=>{if(s===null)return Wi(i);let o=K_(s);return sC(o),M(o)}))}processSegment(e,n,i,r,s,o){return He(n).pipe(ii(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(Sn(c=>{if(c instanceof Ns)return M(null);throw c}))),An(a=>!!a),Sn(a=>{if(H_(a))return nC(i,r,s)?M(new Ad):Wi(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return tC(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):Wi(r):Wi(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Nd(n,r,s);if(!a)return Wi(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rC&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(We(h=>this.processSegment(e,i,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=YT(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(Et(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Et(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Os(u,h,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,aC(i),zt(i),i.component??i._loadedComponent??null,i,cC(i)),{segmentGroup:P,slicedSegments:k}=I_(n,u,d,c);if(k.length===0&&P.hasChildren())return this.processChildren(l,c,P).pipe(H(G=>G===null?null:new pt(f,G)));if(c.length===0&&k.length===0)return M(new pt(f,[]));let x=zt(i)===s;return this.processSegment(l,c,P,k,x?z:s,!0).pipe(H(G=>new pt(f,G instanceof pt?[G]:[])))}))):Wi(n)))}getChildConfig(e,n,i){return n.children?M({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?M({routes:n._loadedRoutes,injector:n._loadedInjector}):GT(e,n,i,this.urlSerializer).pipe(We(r=>r?this.configLoader.loadChildren(e,n).pipe(ve(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):KT(n))):M({routes:[],injector:e})}};function sC(t){t.sort((e,n)=>e.value.outlet===z?-1:n.value.outlet===z?1:e.value.outlet.localeCompare(n.value.outlet))}function oC(t){let e=t.value.routeConfig;return e&&e.path===""}function K_(t){let e=[],n=new Set;for(let i of t){if(!oC(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=K_(i.children);e.push(new pt(i.value,r))}return e.filter(i=>!n.has(i))}function aC(t){return t.data||{}}function cC(t){return t.resolve||{}}function lC(t,e,n,i,r,s){return We(o=>iC(t,e,n,i,o.extractedUrl,r,s).pipe(H(({state:a,tree:c})=>R(m({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function uC(t,e){return We(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return M(n);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of Y_(c))o.add(l);let a=0;return He(o).pipe(ii(c=>s.has(c)?dC(c,i,t,e):(c.data=Pd(c,c.parent,t).resolve,M(void 0))),ve(()=>a++),Fu(1),We(c=>a===o.size?M(n):ti))})}function Y_(t){let e=t.children.map(n=>Y_(n)).flat();return[t,...e]}function dC(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!B_(r)&&(s[Fs]=r.title),hC(s,t,e,i).pipe(H(o=>(t._resolvedData=o,t.data=Pd(t,t.parent,n).resolve,null)))}function hC(t,e,n,i){let r=sd(t);if(r.length===0)return M({});let s={};return He(r).pipe(We(o=>fC(t[o],e,n,i).pipe(An(),ve(a=>{s[o]=a}))),Fu(1),Ig(s),Sn(o=>H_(o)?ti:ss(o)))}function fC(t,e,n,i){let r=Us(e)??i,s=tr(t,r),o=s.resolve?s.resolve(e,n):Dn(r,()=>s(e,n));return Mn(o)}function id(t){return Et(e=>{let n=t(e);return n?He(n).pipe(H(()=>e)):M(e)})}var Q_=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===z);return r}getResolvedTitleForRoute(i){return i.data[Fs]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>b(pC),providedIn:"root"});let t=e;return t})(),pC=(()=>{let e=class e extends Q_{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(_(g_))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bs=new C("",{providedIn:"root",factory:()=>({})}),Ms=new C(""),Md=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(Sa)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return M(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Mn(i.loadComponent()).pipe(H(X_),ve(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),os(()=>{this.componentLoaders.delete(i)})),s=new Ru(r,()=>new X).pipe(Au());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return M({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=mC(r,this.compiler,i,this.onLoadEndListener).pipe(os(()=>{this.childrenLoaders.delete(r)})),a=new Ru(o,()=>new X).pipe(Au());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mC(t,e,n,i){return Mn(t.loadChildren()).pipe(H(X_),We(r=>r instanceof qg||Array.isArray(r)?M(r):He(e.compileModuleAsync(r))),H(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(Ms,[],{optional:!0,self:!0}).flat()),{routes:o.map(kd),injector:s}}))}function gC(t){return t&&typeof t=="object"&&"default"in t}function X_(t){return gC(t)?t.default:t}var Fd=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>b(_C),providedIn:"root"});let t=e;return t})(),_C=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Z_=new C(""),J_=new C("");function yC(t,e,n){let i=t.get(J_),r=t.get(Y);return t.get(q).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),vC(t))),{onViewTransitionCreated:c}=i;return c&&Dn(t,()=>c({transition:a,from:e,to:n})),o})}function vC(t){return new Promise(e=>{zg(e,{injector:t})})}var Vd=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new X,this.transitionAbortSubject=new X,this.configLoader=b(Md),this.environmentInjector=b(ls),this.urlSerializer=b(Vs),this.rootContexts=b(Ls),this.location=b(dn),this.inputBindingEnabled=b(Wa,{optional:!0})!==null,this.titleStrategy=b(Q_),this.options=b(Bs,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(Fd),this.createViewTransition=b(Z_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>M(void 0),this.rootComponentType=null;let i=s=>this.events.next(new fd(s)),r=s=>this.events.next(new pd(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(R(m(m({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Me({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Cs,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ye(o=>o.id!==0),H(o=>R(m({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Et(o=>{this.currentTransition=o;let a=!1,c=!1;return M(o).pipe(ve(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?R(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Et(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Nn(l.id,this.urlSerializer.serialize(l.rawUrl),h,La.IgnoredSameUrlNavigation)),l.resolve(null),ti}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return M(l).pipe(Et(h=>{let f=this.transitions?.getValue();return this.events.next(new Ji(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ti:Promise.resolve(h)}),lC(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ve(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=R(m({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Ua(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:P,restoredState:k,extras:x}=l,G=new Ji(h,this.urlSerializer.serialize(f),P,k);this.events.next(G);let ae=U_(this.rootComponentType).snapshot;return this.currentTransition=o=R(m({},l),{targetSnapshot:ae,urlAfterRedirects:f,extras:R(m({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,M(o)}else{let h="";return this.events.next(new Nn(l.id,this.urlSerializer.serialize(l.extractedUrl),h,La.IgnoredByUrlHandlingStrategy)),l.resolve(null),ti}}),ve(l=>{let u=new ld(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),H(l=>(this.currentTransition=o=R(m({},l),{guards:AT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),VT(this.environmentInjector,l=>this.events.next(l)),ve(l=>{if(o.guardsResult=l.guardsResult,Zi(l.guardsResult))throw z_(this.urlSerializer,l.guardsResult);let u=new ud(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),ye(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",It.GuardRejected),!1)),id(l=>{if(l.guards.canActivateChecks.length)return M(l).pipe(ve(u=>{let d=new dd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Et(u=>{let d=!1;return M(u).pipe(uC(this.paramsInheritanceStrategy,this.environmentInjector),ve({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",It.NoDataFromResolver)}}))}),ve(u=>{let d=new hd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),id(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ve(f=>{d.component=f}),H(()=>{})));for(let f of d.children)h.push(...u(f));return h};return pa(u(l.targetSnapshot.root)).pipe(Nu(null),Ke(1))}),id(()=>this.afterPreactivation()),Et(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?He(d).pipe(H(()=>o)):M(o)}),H(l=>{let u=vT(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=R(m({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ve(()=>{this.events.next(new Ps)}),ST(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ke(1),ve({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Bt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ri(this.transitionAbortSubject.pipe(ve(l=>{throw l}))),os(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",It.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sn(l=>{if(c=!0,G_(l))this.events.next(new kn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),IT(l)?this.events.next(new xs(l.url)):o.resolve(!1);else{this.events.next(new Ds(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return ti}))}))}cancelNavigationTransition(i,r,s){let o=new kn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EC(t){return t!==Cs}var wC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>b(IC),providedIn:"root"});let t=e;return t})(),Dd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},IC=(()=>{let e=class e extends Dd{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ey=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>b(bC),providedIn:"root"});let t=e;return t})(),bC=(()=>{let e=class e extends ey{constructor(){super(...arguments),this.location=b(dn),this.urlSerializer=b(Vs),this.options=b(Bs,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(Fd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new On,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=U_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Ji)this.stateMemento=this.createStateMemento();else if(i instanceof Nn)this.rawUrlTree=r.initialUrl;else if(i instanceof Ua){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Ps?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof kn&&(i.code===It.GuardRejected||i.code===It.NoDataFromResolver)?this.restoreHistory(r):i instanceof Ds?this.restoreHistory(r,!0):i instanceof Bt&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=m(m({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=m(m({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bs=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(bs||{});function ty(t,e){t.events.pipe(ye(n=>n instanceof Bt||n instanceof kn||n instanceof Ds||n instanceof Nn),H(n=>n instanceof Bt||n instanceof Nn?bs.COMPLETE:(n instanceof kn?n.code===It.Redirect||n.code===It.SupersededByNewNavigation:!1)?bs.REDIRECTING:bs.FAILED),ye(n=>n!==bs.REDIRECTING),Ke(1)).subscribe(()=>{e()})}function TC(t){throw t}var CC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(Ta),this.stateManager=b(ey),this.options=b(Bs,{optional:!0})||{},this.pendingTasks=b(Gg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(Vd),this.urlSerializer=b(Vs),this.location=b(dn),this.urlHandlingStrategy=b(Fd),this._events=new X,this.errorHandler=this.options.errorHandler||TC,this.navigated=!1,this.routeReuseStrategy=b(wC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(Ms,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(Wa,{optional:!0}),this.eventsSubscription=new ei,this.isNgZoneEnabled=b(q)instanceof q&&q.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof kn&&r.code!==It.Redirect&&r.code!==It.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bt)this.navigated=!0;else if(r instanceof xs){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||EC(s.source)};this.scheduleNavigation(a,Cs,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}RC(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=m({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(kd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=M_(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return F_(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Zi(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Cs,null,r)}navigate(i,r={skipLocationChange:!1}){return AC(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=m({},CC):r===!1?s=m({},SC):s=r,Zi(i))return __(this.currentUrlTree,i,s);let o=this.parseUrl(i);return __(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return ty(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AC(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ce(4008,!1)}function RC(t){return!(t instanceof Ps)&&!(t instanceof xs)}var ny=(()=>{let e=class e{constructor(i,r,s,o,a,c){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new X,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof Bt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:jg(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(T(mt),T($t),Ug("tabindex"),T(oi),T(Ae),T(_s))},e.\u0275dir=se({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&W("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Pn("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Be.HasDecoratorInputTransform,"preserveFragment","preserveFragment",li],skipLocationChange:[Be.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",li],replaceUrl:[Be.HasDecoratorInputTransform,"replaceUrl","replaceUrl",li],routerLink:"routerLink"},standalone:!0,features:[fs,Ut]});let t=e;return t})();var Ha=class{};var DC=(()=>{let e=class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ye(i=>i instanceof Bt),ii(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Bu(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return He(s).pipe(Ou())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=M(null);let o=s.pipe(We(a=>a===null?M(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return He([o,a]).pipe(Ou())}else return o})}};e.\u0275fac=function(r){return new(r||e)(_(mt),_(Sa),_(ls),_(Ha),_(Md))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iy=new C(""),PC=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Bt?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Nn&&i.code===La.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ja&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ja(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){ga()},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function ry(t,...e){return cn([{provide:Ms,multi:!0,useValue:t},[],{provide:$t,useFactory:sy,deps:[mt]},{provide:Gu,multi:!0,useFactory:oy},e.map(n=>n.\u0275providers)])}function sy(t){return t.routerState.root}function $s(t,e){return{\u0275kind:t,\u0275providers:e}}function oy(){let t=b(Re);return e=>{let n=t.get(ms);if(e!==n.components[0])return;let i=t.get(mt),r=t.get(ay);t.get(Ld)===1&&i.initialNavigation(),t.get(cy,null,Vu.Optional)?.setUpPreloading(),t.get(iy,null,Vu.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var ay=new C("",{factory:()=>new X}),Ld=new C("",{providedIn:"root",factory:()=>1});function xC(){return $s(2,[{provide:Ld,useValue:0},{provide:qu,multi:!0,deps:[Re],useFactory:e=>{let n=e.get(Jg,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(mt),s=e.get(ay);ty(r,()=>{i(!0)}),e.get(Vd).afterPreactivation=()=>(i(!0),s.closed?M(void 0):s),r.initialNavigation()}))}}])}function OC(){return $s(3,[{provide:qu,multi:!0,useFactory:()=>{let e=b(mt);return()=>{e.setUpLocationChangeListener()}}},{provide:Ld,useValue:2}])}var cy=new C("");function kC(t){return $s(0,[{provide:cy,useExisting:DC},{provide:Ha,useExisting:t}])}function NC(){return $s(8,[w_,{provide:Wa,useExisting:w_}])}function MC(t){let e=[{provide:Z_,useValue:yC},{provide:J_,useValue:m({skipNextTransition:!!t?.skipInitialTransition},t)}];return $s(9,e)}var b_=new C("ROUTER_FORROOT_GUARD"),FC=[dn,{provide:Vs,useClass:As},mt,Ls,{provide:$t,useFactory:sy,deps:[mt]},Md,[]],Ya=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[FC,[],{provide:Ms,multi:!0,useValue:i},{provide:b_,useFactory:jC,deps:[[mt,new ht,new Mg]]},{provide:Bs,useValue:r||{}},r?.useHash?LC():UC(),VC(),r?.preloadingStrategy?kC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?BC(r):[],r?.bindToComponentInputs?NC().\u0275providers:[],r?.enableViewTransitions?MC().\u0275providers:[],$C()]}}static forChild(i){return{ngModule:e,providers:[{provide:Ms,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(_(b_,8))},e.\u0275mod=fe({type:e}),e.\u0275inj=pe({});let t=e;return t})();function VC(){return{provide:iy,useFactory:()=>{let t=b(a_),e=b(q),n=b(Bs),i=b(Vd),r=b(Vs);return n.scrollOffset&&t.setOffset(n.scrollOffset),new PC(r,i,t,e,n)}}}function LC(){return{provide:_s,useClass:t_}}function UC(){return{provide:_s,useClass:e_}}function jC(t){return"guarded"}function BC(t){return[t.initialNavigation==="disabled"?OC().\u0275providers:[],t.initialNavigation==="enabledBlocking"?xC().\u0275providers:[]]}var T_=new C("");function $C(){return[{provide:T_,useFactory:oy},{provide:Gu,multi:!0,useExisting:T_}]}var vy=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(T(oi),T(Ae))},e.\u0275dir=se({type:e});let t=e;return t})(),rc=(()=>{let e=class e extends vy{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275dir=se({type:e,features:[De]});let t=e;return t})(),Hs=new C("");var zC={provide:Hs,useExisting:an(()=>Vn),multi:!0};function qC(){let t=Hi()?Hi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var GC=new C(""),Vn=(()=>{let e=class e extends vy{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!qC())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(T(oi),T(Ae),T(GC,8))},e.\u0275dir=se({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&W("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[wt([zC]),De]});let t=e;return t})();function Fn(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Ey(t){return t!=null&&typeof t.length=="number"}var sc=new C(""),oc=new C(""),HC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ve=class{static min(e){return WC(e)}static max(e){return KC(e)}static required(e){return YC(e)}static requiredTrue(e){return QC(e)}static email(e){return XC(e)}static minLength(e){return ZC(e)}static maxLength(e){return JC(e)}static pattern(e){return eS(e)}static nullValidator(e){return wy(e)}static compose(e){return Ay(e)}static composeAsync(e){return Dy(e)}};function WC(t){return e=>{if(Fn(e.value)||Fn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function KC(t){return e=>{if(Fn(e.value)||Fn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function YC(t){return Fn(t.value)?{required:!0}:null}function QC(t){return t.value===!0?null:{required:!0}}function XC(t){return Fn(t.value)||HC.test(t.value)?null:{email:!0}}function ZC(t){return e=>Fn(e.value)||!Ey(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function JC(t){return e=>Ey(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function eS(t){if(!t)return wy;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Fn(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function wy(t){return null}function Iy(t){return t!=null}function by(t){return Ca(t)?He(t):t}function Ty(t){let e={};return t.forEach(n=>{e=n!=null?m(m({},e),n):e}),Object.keys(e).length===0?null:e}function Cy(t,e){return e.map(n=>n(t))}function tS(t){return!t.validate}function Sy(t){return t.map(e=>tS(e)?e:n=>e.validate(n))}function Ay(t){if(!t)return null;let e=t.filter(Iy);return e.length==0?null:function(n){return Ty(Cy(n,e))}}function Ry(t){return t!=null?Ay(Sy(t)):null}function Dy(t){if(!t)return null;let e=t.filter(Iy);return e.length==0?null:function(n){let i=Cy(n,e).map(by);return vg(i).pipe(H(Ty))}}function Py(t){return t!=null?Dy(Sy(t)):null}function uy(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function xy(t){return t._rawValidators}function Oy(t){return t._rawAsyncValidators}function Ud(t){return t?Array.isArray(t)?t:[t]:[]}function Za(t,e){return Array.isArray(t)?t.includes(e):t===e}function dy(t,e){let n=Ud(e);return Ud(t).forEach(r=>{Za(n,r)||n.push(r)}),n}function hy(t,e){return Ud(e).filter(n=>!Za(t,n))}var Ja=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ry(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Py(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Tt=class extends Ja{get formDirective(){return null}get path(){return null}},Gs=class extends Ja{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ec=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},nS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},H1=R(m({},nS),{"[class.ng-submitted]":"isSubmitted"}),rr=(()=>{let e=class e extends ec{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(T(Gs,2))},e.\u0275dir=se({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Gi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[De]});let t=e;return t})(),sr=(()=>{let e=class e extends ec{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(T(Tt,10))},e.\u0275dir=se({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Gi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[De]});let t=e;return t})();var zs="VALID",Qa="INVALID",nr="PENDING",qs="DISABLED";function $d(t){return(ac(t)?t.validators:t)||null}function iS(t){return Array.isArray(t)?Ry(t):t||null}function zd(t,e){return(ac(e)?e.asyncValidators:t)||null}function rS(t){return Array.isArray(t)?Py(t):t||null}function ac(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function ky(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new ce(1e3,"");if(!i[n])throw new ce(1001,"")}function Ny(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new ce(1002,"")})}var ir=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zs}get invalid(){return this.status===Qa}get pending(){return this.status==nr}get disabled(){return this.status===qs}get enabled(){return this.status!==qs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dy(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dy(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hy(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hy(e,this._rawAsyncValidators))}hasValidator(e){return Za(this._rawValidators,e)}hasAsyncValidator(e){return Za(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nr,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=qs,this.errors=null,this._forEachChild(i=>{i.disable(R(m({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(R(m({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=zs,this._forEachChild(i=>{i.enable(R(m({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(R(m({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zs||this.status===nr)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qs:zs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nr,this._hasOwnPendingAsyncValidator=!0;let n=by(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?qs:this.errors?Qa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nr)?nr:this._anyControlsHaveStatus(Qa)?Qa:zs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ac(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rS(this._rawAsyncValidators)}},tc=class extends ir{constructor(e,n,i){super($d(n),zd(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Ny(this,!0,e),Object.keys(e).forEach(i=>{ky(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var jd=class extends tc{};var qd=new C("CallSetDisabledState",{providedIn:"root",factory:()=>cc}),cc="always";function Gd(t,e){return[...e.path,t]}function fy(t,e,n=cc){Hd(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),oS(t,e),cS(t,e),aS(t,e),sS(t,e)}function py(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),ic(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function nc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function sS(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Hd(t,e){let n=xy(t);e.validator!==null?t.setValidators(uy(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=Oy(t);e.asyncValidator!==null?t.setAsyncValidators(uy(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();nc(e._rawValidators,r),nc(e._rawAsyncValidators,r)}function ic(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=xy(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=Oy(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return nc(e._rawValidators,i),nc(e._rawAsyncValidators,i),n}function oS(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&My(t,e)})}function aS(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&My(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function My(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function cS(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function lS(t,e){t==null,Hd(t,e)}function uS(t,e){return ic(t,e)}function dS(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function hS(t){return Object.getPrototypeOf(t.constructor)===rc}function fS(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function pS(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===Vn?n=s:hS(s)?i=s:r=s}),r||i||n||null}function mS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function my(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function gy(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Xa=class extends ir{constructor(e=null,n,i){super($d(n),zd(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ac(n)&&(n.nonNullable||n.initialValueIsDefault)&&(gy(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){my(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){my(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){gy(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var gS=t=>t instanceof Xa,_S=(()=>{let e=class e extends Tt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Gd(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275dir=se({type:e,features:[De]});let t=e;return t})();var or=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=se({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),yS={provide:Hs,useExisting:an(()=>Ws),multi:!0},Ws=(()=>{let e=class e extends rc{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275dir=se({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&W("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[wt([yS]),De]});let t=e;return t})();var Fy=new C("");var vS={provide:Tt,useExisting:an(()=>Ln)},Ln=(()=>{let e=class e extends Tt{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ee,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ic(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return fy(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){py(i.control||null,i,!1),mS(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,fS(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(py(r||null,i),gS(s)&&(fy(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);lS(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&uS(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Hd(this.form,this),this._oldForm&&ic(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(T(sc,10),T(oc,10),T(qd,8))},e.\u0275dir=se({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&W("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[Be.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[wt([vS]),De,Ut]});let t=e;return t})(),ES={provide:Tt,useExisting:an(()=>ar)},ar=(()=>{let e=class e extends _S{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}_checkParentType(){Vy(this._parent)}};e.\u0275fac=function(r){return new(r||e)(T(Tt,13),T(sc,10),T(oc,10))},e.\u0275dir=se({type:e,selectors:[["","formGroupName",""]],inputs:{name:[Be.None,"formGroupName","name"]},features:[wt([ES]),De]});let t=e;return t})(),wS={provide:Tt,useExisting:an(()=>cr)},cr=(()=>{let e=class e extends Tt{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Gd(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){Vy(this._parent)}};e.\u0275fac=function(r){return new(r||e)(T(Tt,13),T(sc,10),T(oc,10))},e.\u0275dir=se({type:e,selectors:[["","formArrayName",""]],inputs:{name:[Be.None,"formArrayName","name"]},features:[wt([wS]),De]});let t=e;return t})();function Vy(t){return!(t instanceof ar)&&!(t instanceof Ln)&&!(t instanceof cr)}var IS={provide:Gs,useExisting:an(()=>hi)},hi=(()=>{let e=class e extends Gs{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ee,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=pS(this,o)}ngOnChanges(i){this._added||this._setUpControl(),dS(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return Gd(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(T(Tt,13),T(sc,10),T(oc,10),T(Hs,10),T(Fy,8))},e.\u0275dir=se({type:e,selectors:[["","formControlName",""]],inputs:{name:[Be.None,"formControlName","name"],isDisabled:[Be.None,"disabled","isDisabled"],model:[Be.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[wt([IS]),De,Ut]});let t=e;return t})(),bS={provide:Hs,useExisting:an(()=>lr),multi:!0};function Ly(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function TS(t){return t.split(":")[0]}var lr=(()=>{let e=class e extends rc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=Ly(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=TS(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275dir=se({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&W("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[wt([bS]),De]});let t=e;return t})(),lc=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(Ly(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(T(Ae),T(oi),T(lr,9))},e.\u0275dir=se({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),CS={provide:Hs,useExisting:an(()=>Uy),multi:!0};function _y(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function SS(t){return t.split(":")[0]}var Uy=(()=>{let e=class e extends rc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=SS(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275dir=se({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&W("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[wt([CS]),De]});let t=e;return t})(),uc=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(_y(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(_y(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(T(Ae),T(oi),T(Uy,9))},e.\u0275dir=se({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var jy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=fe({type:e}),e.\u0275inj=pe({});let t=e;return t})(),Bd=class extends ir{constructor(e,n,i){super($d(n),zd(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Ny(this,!1,e),e.forEach((i,r)=>{ky(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function yy(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var ur=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return yy(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new tc(s,o)}record(i,r=null){let s=this._reduceControls(i);return new jd(s,r)}control(i,r,s){let o={};return this.useNonNullable?(yy(r)?o=r:(o.validators=r,o.asyncValidators=s),new Xa(i,R(m({},o),{nonNullable:!0}))):new Xa(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new Bd(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof Xa)return i;if(i instanceof ir)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Un=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:qd,useValue:i.callSetDisabledState??cc}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=fe({type:e}),e.\u0275inj=pe({imports:[jy]});let t=e;return t})(),jn=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Fy,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:qd,useValue:i.callSetDisabledState??cc}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=fe({type:e}),e.\u0275inj=pe({imports:[jy]});let t=e;return t})();function dc(t,e=0){return AS(t)?Number(t):e}function AS(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Kd(t){return Array.isArray(t)?t:[t]}function Se(t){return t==null?"":typeof t=="string"?t:`${t}px`}function dr(t){return t instanceof Ae?t.nativeElement:t}var Qd;try{Qd=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Qd=!1}var ct=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?o_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Qd)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(_(Rt))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ks;function RS(){if(Ks==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ks=!0}))}finally{Ks=Ks||!1}return Ks}function Xd(t){return RS()?t:!!t.capture}var fi;function By(){if(fi==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return fi=!1,fi;if("scrollBehavior"in document.documentElement.style)fi=!0;else{let t=Element.prototype.scrollTo;t?fi=!/\{\s*\[native code\]\s*\}/.test(t.toString()):fi=!1}}return fi}var Yd;function DS(){if(Yd==null){let t=typeof document<"u"?document.head:null;Yd=!!(t&&(t.createShadowRoot||t.attachShadow))}return Yd}function $y(t){if(DS()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ys(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function hn(t){return t.composedPath?t.composedPath()[0]:t.target}function Zd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var PS=new C("cdk-dir-doc",{providedIn:"root",factory:xS});function xS(){return b(Y)}var OS=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function kS(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?OS.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Qs=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Ee,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=kS(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(_(PS,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var FS=20,zy=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new X,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=FS){return this._platform.isBrowser?new dt(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(ku(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):M()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(ye(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=dr(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Eg(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(_(q),_(ct),_(Y,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var VS=20,eh=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new X,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,c=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(i=VS){return i>0?this._change.pipe(ku(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(_(ct),_(q),_(Y,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xs=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},hr=class extends Xs{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},fr=class extends Xs{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},th=class extends Xs{constructor(e){super(),this.element=e instanceof Ae?e.nativeElement:e}},pr=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof hr)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof fr)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof th)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var hc=class extends pr{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Re.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Zs=(()=>{let e=class e extends pr{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ee,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(T(_a),T(qi),T(Y))},e.\u0275dir=se({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[Be.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[De]});let t=e;return t})();function fc(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var qy=By(),nh=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Se(-this._previousScrollPosition.left),e.style.top=Se(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),qy&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),qy&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var ih=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ye(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},pc=class{enable(){}disable(){}attach(){}};function rh(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return i||r||s||o})}function Gy(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return i||r||s||o})}var sh=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();rh(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},US=(()=>{let e=class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new pc,this.close=a=>new ih(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new nh(this._viewportRuler,this._document),this.reposition=a=>new sh(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(r){return new(r||e)(_(zy),_(eh),_(q),_(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Js=class{constructor(e){if(this.scrollStrategy=new pc,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var oh=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var Xy=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(_(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jS=(()=>{let e=class e extends Xy{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(_(Y),_(q,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BS=(()=>{let e=class e extends Xy{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=hn(o)},this._clickListener=o=>{let a=hn(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(_(Y),_(ct),_(q,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mr=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Zd()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),Zd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(_(Y),_(ct))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fn=class{constructor(e,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new X,this._attachments=new X,this._detachments=new X,this._locationChanges=ei.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new X,this._outsidePointerEvents=new X,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ke(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=m(m({},this._config),e),this._updateElementSize()}setDirection(e){this._config=R(m({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Se(this._config.width),e.height=Se(this._config.height),e.minWidth=Se(this._config.minWidth),e.minHeight=Se(this._config.minHeight),e.maxWidth=Se(this._config.maxWidth),e.maxHeight=Se(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=Kd(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(ri(ni(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Hy="cdk-overlay-connected-position-bounding-box",$S=/([A-Za-z%]+)$/,ah=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new X,this._resizeSubscription=ei.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(Hy),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&pi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Hy),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){let s=Ky(n),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,f=a+s.height-i.height,P=this._subtractOverflows(s.width,u,d),k=this._subtractOverflows(s.height,h,f),x=P*k;return{visibleArea:x,isCompletelyWithinViewport:s.width*s.height===x,fitsInViewportVertically:k===s.height,fitsInViewportHorizontally:P==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=Wy(this._overlayRef.getConfig().minHeight),a=Wy(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=Ky(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?d=c||-a:d=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!zS(this._lastScrollVisibility,i)){let r=new oh(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),P=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>P&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-P/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,l=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(c)d=e.x,u=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),P=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>P&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-P/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Se(i.height),r.top=Se(i.top),r.bottom=Se(i.bottom),r.width=Se(i.width),r.left=Se(i.left),r.right=Se(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Se(s)),o&&(r.maxWidth=Se(o))}this._lastBoundingBoxSize=i,pi(this._boundingBox.style,r)}_resetBoundingBoxStyles(){pi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){pi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();pi(i,this._getExactOverlayY(n,e,u)),pi(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Se(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Se(o.maxWidth):s&&(i.maxWidth="")),pi(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Se(s.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Se(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Gy(e,i),isOriginOutsideView:rh(e,i),isOverlayClipped:Gy(n,i),isOverlayOutsideView:rh(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Kd(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Ae)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function pi(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Wy(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split($S);return!n||n==="px"?parseFloat(e):null}return t||null}function Ky(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function zS(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var Yy="cdk-global-overlay-wrapper",ch=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Yy),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",P="",k="";c?k="flex-start":u==="center"?(k="center",h?P=d:f=d):h?u==="left"||u==="end"?(k="flex-end",f=d):(u==="right"||u==="start")&&(k="flex-start",P=d):u==="left"||u==="start"?(k="flex-start",f=d):(u==="right"||u==="end")&&(k="flex-end",P=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":P,n.justifyContent=k,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(Yy),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},qS=(()=>{let e=class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new ch}flexibleConnectedTo(i){return new ah(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(_(eh),_(Y),_(ct),_(mr))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),GS=0,Bn=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u,d,h,f,P){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=P}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new Js(i);return a.direction=a.direction||this._directionality.value,new fn(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${GS++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(ms)),new hc(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(_(US),_(mr),_(_a),_(qS),_(jS),_(Re),_(q),_(Y),_(Qs),_(dn),_(BS),_(si,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var eo=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return WS(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=HS(tA(i));if(r&&(Jy(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=Jy(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!JS(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return eA(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(_(ct))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HS(t){try{return t.frameElement}catch{return null}}function WS(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function KS(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function YS(t){return XS(t)&&t.type=="hidden"}function QS(t){return ZS(t)&&t.hasAttribute("href")}function XS(t){return t.nodeName.toLowerCase()=="input"}function ZS(t){return t.nodeName.toLowerCase()=="a"}function ev(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function Jy(t){if(!ev(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function JS(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function eA(t){return YS(t)?!1:KS(t)||QS(t)||t.hasAttribute("contenteditable")||ev(t)}function tA(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var lh=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ke(1)).subscribe(e)}},_c=(()=>{let e=class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new lh(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(_(eo),_(q),_(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nA(t){return t.buttons===0||t.detail===0}function iA(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var rA=new C("cdk-input-modality-detector-options"),sA={ignoreKeys:[18,17,224,91,16]},tv=650,gr=Xd({passive:!0,capture:!0}),oA=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new Me(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=hn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<tv||(this._modality.next(nA(a)?"keyboard":"mouse"),this._mostRecentTarget=hn(a))},this._onTouchstart=a=>{if(iA(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=hn(a)},this._options=m(m({},sA),o),this.modalityDetected=this._modality.pipe(Rg(1)),this.modalityChanged=this.modalityDetected.pipe($i()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,gr),s.addEventListener("mousedown",this._onMousedown,gr),s.addEventListener("touchstart",this._onTouchstart,gr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,gr),document.removeEventListener("mousedown",this._onMousedown,gr),document.removeEventListener("touchstart",this._onTouchstart,gr))}};e.\u0275fac=function(r){return new(r||e)(_(ct),_(q),_(Y),_(rA,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gc=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(gc||{}),aA=new C("cdk-focus-monitor-default-options"),mc=Xd({passive:!0,capture:!0}),yc=(()=>{let e=class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new X,this._rootNodeFocusAndBlurListener=c=>{let l=hn(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||gc.IMMEDIATE}monitor(i,r=!1){let s=dr(i);if(!this._platform.isBrowser||s.nodeType!==1)return M();let o=$y(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new X,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=dr(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=dr(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===gc.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===gc.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?tv:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=hn(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mc)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ri(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(_(q),_(ct),_(oA),_(Y,8),_(aA,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lA(t,e){}var mi=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var hh=(()=>{let e=class e extends pr{constructor(i,r,s,o,a,c,l,u){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=b(ct),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=b(ai),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=Ys(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=Ys();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ys()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(T(Ae),T(_c),T(Y,8),T(mi),T(eo),T(q),T(fn),T(yc))},e.\u0275cmp=re({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&$u(Zs,7),r&2){let o;Ea(o=wa())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&Pn("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[De,oe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&$(0,lA,0,0,"ng-template",0)},dependencies:[Zs],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),to=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new X,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!fc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},uA=new C("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=b(Bn);return()=>t.scrollStrategies.block()}}),dA=new C("DialogData"),hA=new C("DefaultDialogConfig");var fA=0,iv=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new X,this._afterOpenedAtThisLevel=new X,this._ariaHiddenElements=new Map,this.afterAllClosed=Cn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Rn(void 0))),this._scrollStrategy=c}open(i,r){let s=this._defaultOptions||new mi;r=m(m({},s),r),r.id=r.id||`cdk-dialog-${fA++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new to(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){uh(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){uh(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),uh(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Js({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:mi,useValue:s},{provide:to,useValue:r},{provide:fn,useValue:i}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=hh;let l=new hr(c,s.viewContainerRef,Re.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof hs){let a=this._createInjector(o,r,s,void 0),c={$implicit:o.data,dialogRef:r};o.templateContext&&(c=m(m({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new fr(i,null,c,a))}else{let a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new hr(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:dA,useValue:i.data},{provide:to,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(Qs,null,{optional:!0}))&&c.push({provide:Qs,useValue:{value:i.direction,change:M()}}),Re.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(_(Bn),_(Re),_(hA,8),_(e,12),_(mr),_(uA))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uh(t,e){let n=t.length;for(;n--;)e(t[n])}function pA(t,e){}var no=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},fh="mdc-dialog--open",rv="mdc-dialog--opening",sv="mdc-dialog--closing",mA=150,gA=75,_A=(()=>{let e=class e extends hh{constructor(i,r,s,o,a,c,l,u,d){super(i,r,s,o,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Ee,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?av(this._config.enterAnimationDuration)??mA:0,this._exitAnimationDuration=this._animationsEnabled?av(this._config.exitAnimationDuration)??gA:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(ov,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(rv,fh)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(fh),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(fh),this._animationsEnabled?(this._hostElement.style.setProperty(ov,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(sv)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(rv,sv)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(T(Ae),T(_c),T(Y,8),T(no),T(eo),T(q),T(fn),T(si,8),T(yc))},e.\u0275cmp=re({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,s){r&2&&(Hg("id",s._config.id),Pn("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Gi("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[De,oe],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(y(0,"div",0)(1,"div",1),$(2,pA,0,0,"ng-template",2),g()())},dependencies:[Zs],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),ov="--mat-dialog-transition-duration";function av(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?dc(t.substring(0,t.length-2)):t.endsWith("s")?dc(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var vc=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(vc||{}),Dt=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new X,this._beforeClosed=new X,this._state=vc.OPEN,this.disableClose=n.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(ye(r=>r.state==="opened"),Ke(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(ye(r=>r.state==="closed"),Ke(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ni(this.backdropClick(),this.keydownEvents().pipe(ye(r=>r.keyCode===27&&!this.disableClose&&!fc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),yA(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(ye(n=>n.state==="closing"),Ke(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=vc.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=vc.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function yA(t,e,n){return t._closeInteractionType=e,t.close(n)}var pn=new C("MatMdcDialogData"),vA=new C("mat-mdc-dialog-default-options"),EA=new C("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=b(Bn);return()=>t.scrollStrategies.block()}});var wA=0,Ec=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,u){this._overlay=i,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new X,this._afterOpenedAtThisLevel=new X,this.dialogConfigClass=no,this.afterAllClosed=Cn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Rn(void 0))),this._dialog=r.get(iv),this._dialogRefConstructor=Dt,this._dialogContainerType=_A,this._dialogDataToken=pn}open(i,r){let s;r=m(m({},this._defaultOptions||new no),r),r.id=r.id||`mat-mdc-dialog-${wA++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,R(m({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:mi,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(_(Bn),_(Re),_(dn,8),_(vA,8),_(EA),_(e,12),_(mr),_(si,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IA(t,e){if(t&1){let n=nt();y(0,"i",17),W("click",function(){de(n);let r=j().index,s=j();return he(s.deleteUser(r))}),g()}}function bA(t,e){if(t&1&&(Ye(0),y(1,"div",11)(2,"div",12)(3,"div",13),me(4,"input",14),g(),y(5,"div",15),$(6,IA,1,0,"i",16),g()()(),Qe()),t&2){let n=e.index,i=j();I(),O("formGroupName",n),I(5),O("ngIf",i.users.length>2)}}var cv=(()=>{let e=class e{constructor(i,r,s){this.dialogRef=i,this.data=r,this.fb=s,this.form=this.fb.group({projectName:["",Ve.required],users:this.fb.array([])}),this.addUser(),this.addUser()}get users(){return this.form.get("users")}ngOnInit(){}addUser(){let i=this.fb.group({name:["",Ve.required]});this.users.push(i)}deleteUser(i){this.users.removeAt(i)}close(){this.dialogRef.close()}create(){this.dialogRef.close(this.form.value)}};e.\u0275fac=function(r){return new(r||e)(T(Dt),T(pn),T(ur))},e.\u0275cmp=re({type:e,selectors:[["app-create-project-modal"]],standalone:!0,features:[oe],decls:20,vars:3,consts:[[1,"modal-container"],[3,"formGroup"],[1,"mb-3"],["for","projectName",1,"form-label"],["id","projectName","formControlName","projectName","type","text","autocomplete","off",1,"form-control"],[1,"flex-space-between"],[1,"btn","btn-primary","btn-sm",3,"click"],["formArrayName","users"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"",3,"formGroupName"],[1,"row","mb-1"],[1,"col-10"],["id","name","formControlName","name","type","text","autocomplete","off",1,"form-control"],[1,"col-2",2,"line-height","2rem"],["class","bi bi-trash-fill clickable",3,"click",4,"ngIf"],[1,"bi","bi-trash-fill","clickable",3,"click"]],template:function(r,s){r&1&&(y(0,"div",0)(1,"h3"),E(2,"Create Project"),g(),y(3,"form",1)(4,"div",2)(5,"label",3),E(6,"Project Name"),g(),me(7,"input",4),g(),y(8,"div",2)(9,"div",5)(10,"label",3),E(11,"Users"),g(),y(12,"button",6),W("click",function(){return s.addUser()}),E(13,"Add User"),g()(),Ye(14,7),$(15,bA,7,2,"ng-container",8),Qe(),g(),y(16,"button",9),W("click",function(){return s.close()}),E(17,"Close"),g(),y(18,"button",10),W("click",function(){return s.create()}),E(19,"Create"),g()()()),r&2&&(I(3),O("formGroup",s.form),I(12),O("ngForOf",s.users.controls),I(3),O("disabled",s.form.invalid))},dependencies:[Oe,ot,at,Un,or,Vn,rr,sr,jn,Ln,hi,ar,cr],styles:[".modal-container[_ngcontent-%COMP%]{padding:1rem;width:30rem}button[_ngcontent-%COMP%]{margin:.25rem}@media (max-width: 575.98px){.modal-container[_ngcontent-%COMP%]{padding:1rem;width:18rem}}.flex-space-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]});let t=e;return t})();var Mh={};Cb(Mh,{FirebaseError:()=>gt,SDK_VERSION:()=>gn,_DEFAULT_ENTRY_NAME:()=>Wt,_addComponent:()=>co,_addOrOverwriteComponent:()=>Nh,_apps:()=>$n,_clearComponents:()=>bR,_components:()=>oo,_getProvider:()=>lo,_registerComponent:()=>Pt,_removeServiceInstance:()=>Fv,deleteApp:()=>Ac,getApp:()=>vr,getApps:()=>uo,initializeApp:()=>yr,onLog:()=>Rc,registerVersion:()=>_e,setLogLevel:()=>Dc});var uv=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},TA=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},dv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let l=r<t.length?n[t.charAt(r)]:64;++r;let d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new mh;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let P=l<<6&192|d;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},mh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CA=function(t){let e=uv(t);return dv.encodeByteArray(e,!0)},ro=function(t){return CA(t).replace(/\./g,"")},_h=function(t){try{return dv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function so(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!SA(n)||(t[n]=so(t[n],e[n]));return t}function SA(t){return t!=="__proto__"}function AA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RA=()=>AA().__FIREBASE_DEFAULTS__,DA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&_h(t[1]);return e&&JSON.parse(e)},Ic=()=>{try{return RA()||DA()||PA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hv=t=>{var e,n;return(n=(e=Ic())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fv=t=>{let e=hv(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yh=()=>{var t;return(t=Ic())===null||t===void 0?void 0:t.config},pv=t=>{var e;return(e=Ic())===null||e===void 0?void 0:e[`_${t}`]};var wc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function mv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ro(JSON.stringify(n)),ro(JSON.stringify(o)),""].join(".")}function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function xA(){var t;let e=(t=Ic())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _v(){return typeof self=="object"&&self.self===self}function yv(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ev(){return!xA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bc(){try{return typeof indexedDB=="object"}catch{return!1}}function wv(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var OA="FirebaseError",gt=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=OA,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}},Ct=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?kA(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new gt(r,a,i)}};function kA(t,e){return t.replace(NA,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var NA=/\{\$([^}]+)}/g;function vh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _r(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(lv(s)&&lv(o)){if(!_r(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function lv(t){return t!==null&&typeof t=="object"}function Eh(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Tc(t,e){let n=new gh(t,e);return n.subscribe.bind(n)}var gh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");MA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=ph),r.error===void 0&&(r.error=ph),r.complete===void 0&&(r.complete=ph);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function MA(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ph(){}var rL=4*60*60*1e3;function St(t){return t&&t._delegate?t._delegate:t}var lt=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gi="[DEFAULT]";var wh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new wc;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VA(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FA(t){return t===gi?void 0:t}function VA(t){return t.instantiationMode==="EAGER"}var Cc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new wh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Ih=[],K=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(K||{}),Iv={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},LA=K.INFO,UA={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},jA=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=UA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Gt=class{constructor(e){this.name=e,this._logLevel=LA,this._logHandler=jA,this._userLogHandler=null,Ih.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Iv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...e),this._logHandler(this,K.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...e),this._logHandler(this,K.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,K.INFO,...e),this._logHandler(this,K.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,K.WARN,...e),this._logHandler(this,K.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...e),this._logHandler(this,K.ERROR,...e)}};function bv(t){Ih.forEach(e=>{e.setLogLevel(t)})}function Tv(t,e){for(let n of Ih){let i=null;e&&e.level&&(i=Iv[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...o)=>{let a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(i??r.logLevel)&&t({level:K[s].toLowerCase(),message:a,args:o,type:r.name})}}}var BA=(t,e)=>e.some(n=>t instanceof n),Cv,Sv;function $A(){return Cv||(Cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zA(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Av=new WeakMap,Th=new WeakMap,Rv=new WeakMap,bh=new WeakMap,Sh=new WeakMap;function qA(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ht(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Av.set(n,t)}).catch(()=>{}),Sh.set(e,t),e}function GA(t){if(Th.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}var Ch={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ht(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dv(t){Ch=t(Ch)}function HA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(Sc(this),e,...n);return Rv.set(i,e.sort?e.sort():[e]),Ht(i)}:zA().includes(t)?function(...e){return t.apply(Sc(this),e),Ht(Av.get(this))}:function(...e){return Ht(t.apply(Sc(this),e))}}function WA(t){return typeof t=="function"?HA(t):(t instanceof IDBTransaction&&GA(t),BA(t,$A())?new Proxy(t,Ch):t)}function Ht(t){if(t instanceof IDBRequest)return qA(t);if(bh.has(t))return bh.get(t);let e=WA(t);return e!==t&&(bh.set(t,e),Sh.set(e,t)),e}var Sc=t=>Sh.get(t);function xv(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),a=Ht(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Ht(o.result),c.oldVersion,c.newVersion,Ht(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var KA=["get","getKey","getAll","getAllKeys","count"],YA=["put","add","delete","clear"],Ah=new Map;function Pv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=YA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||KA.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),r&&c.done]))[0]})};return Ah.set(e,s),s}Dv(t=>R(m({},t),{get:(e,n,i)=>Pv(e,n)||t.get(e,n,i),has:(e,n)=>!!Pv(e,n)||t.has(e,n)}));var Dh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QA(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function QA(t){let e=t.getComponent();return e?.type==="VERSION"}var Ph="@firebase/app",Ov="0.9.29";var _i=new Gt("@firebase/app"),XA="@firebase/app-compat",ZA="@firebase/analytics-compat",JA="@firebase/analytics",eR="@firebase/app-check-compat",tR="@firebase/app-check",nR="@firebase/auth",iR="@firebase/auth-compat",rR="@firebase/database",sR="@firebase/database-compat",oR="@firebase/functions",aR="@firebase/functions-compat",cR="@firebase/installations",lR="@firebase/installations-compat",uR="@firebase/messaging",dR="@firebase/messaging-compat",hR="@firebase/performance",fR="@firebase/performance-compat",pR="@firebase/remote-config",mR="@firebase/remote-config-compat",gR="@firebase/storage",_R="@firebase/storage-compat",yR="@firebase/firestore",vR="@firebase/firestore-compat",ER="firebase",wR="10.9.0";var Wt="[DEFAULT]",IR={[Ph]:"fire-core",[XA]:"fire-core-compat",[JA]:"fire-analytics",[ZA]:"fire-analytics-compat",[tR]:"fire-app-check",[eR]:"fire-app-check-compat",[nR]:"fire-auth",[iR]:"fire-auth-compat",[rR]:"fire-rtdb",[sR]:"fire-rtdb-compat",[oR]:"fire-fn",[aR]:"fire-fn-compat",[cR]:"fire-iid",[lR]:"fire-iid-compat",[uR]:"fire-fcm",[dR]:"fire-fcm-compat",[hR]:"fire-perf",[fR]:"fire-perf-compat",[pR]:"fire-rc",[mR]:"fire-rc-compat",[gR]:"fire-gcs",[_R]:"fire-gcs-compat",[yR]:"fire-fst",[vR]:"fire-fst-compat","fire-js":"fire-js",[ER]:"fire-js-all"};var $n=new Map,oo=new Map;function co(t,e){try{t.container.addComponent(e)}catch(n){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nh(t,e){t.container.addOrOverwriteComponent(e)}function Pt(t){let e=t.name;if(oo.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;oo.set(e,t);for(let n of $n.values())co(n,t);return!0}function lo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fv(t,e,n=Wt){lo(t,e).clearInstance(n)}function bR(){oo.clear()}var TR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},mn=new Ct("app","Firebase",TR);var xh=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}};var gn=wR;function yr(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw mn.create("bad-app-name",{appName:String(r)});if(n||(n=yh()),!n)throw mn.create("no-options");let s=$n.get(r);if(s){if(_r(n,s.options)&&_r(i,s.config))return s;throw mn.create("duplicate-app",{appName:r})}let o=new Cc(r);for(let c of oo.values())o.addComponent(c);let a=new xh(n,i,o);return $n.set(r,a),a}function vr(t=Wt){let e=$n.get(t);if(!e&&t===Wt&&yh())return yr();if(!e)throw mn.create("no-app",{appName:t});return e}function uo(){return Array.from($n.values())}function Ac(t){return p(this,null,function*(){let e=t.name;$n.has(e)&&($n.delete(e),yield Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)})}function _e(t,e,n){var i;let r=(i=IR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(a.join(" "));return}Pt(new lt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Rc(t,e){if(t!==null&&typeof t!="function")throw mn.create("invalid-log-argument");Tv(t,e)}function Dc(t){bv(t)}var CR="firebase-heartbeat-database",SR=1,ao="firebase-heartbeat-store",Rh=null;function Vv(){return Rh||(Rh=xv(CR,SR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ao)}catch(n){console.warn(n)}}}}).catch(t=>{throw mn.create("idb-open",{originalErrorMessage:t.message})})),Rh}function AR(t){return p(this,null,function*(){try{let n=(yield Vv()).transaction(ao),i=yield n.objectStore(ao).get(Lv(t));return yield n.done,i}catch(e){if(e instanceof gt)_i.warn(e.message);else{let n=mn.create("idb-get",{originalErrorMessage:e?.message});_i.warn(n.message)}}})}function kv(t,e){return p(this,null,function*(){try{let i=(yield Vv()).transaction(ao,"readwrite");yield i.objectStore(ao).put(e,Lv(t)),yield i.done}catch(n){if(n instanceof gt)_i.warn(n.message);else{let i=mn.create("idb-set",{originalErrorMessage:n?.message});_i.warn(i.message)}}})}function Lv(t){return`${t.name}!${t.options.appId}`}var RR=1024,DR=30*24*60*60*1e3,Oh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new kh(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Nv();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=DR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Nv(),{heartbeatsToSend:i,unsentEntries:r}=PR(this._heartbeatsCache.heartbeats),s=ro(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Nv(){return new Date().toISOString().substring(0,10)}function PR(t,e=RR){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Mv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Mv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var kh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return bc()?wv().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield AR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Mv(t){return ro(JSON.stringify({version:2,heartbeats:t})).length}function xR(t){Pt(new lt("platform-logger",e=>new Dh(e),"PRIVATE")),Pt(new lt("heartbeat",e=>new Oh(e),"PRIVATE")),_e(Ph,Ov,t),_e(Ph,Ov,"esm2017"),_e("fire-js","")}xR("");var OR="firebase",kR="10.9.0";_e(OR,kR,"app");var _n=new ps("ANGULARFIRE2_VERSION");function Vh(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var fo=(t,e)=>{let n=e?[e]:uo(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},ho=class{constructor(){return fo(NR)}},NR="app-check";function Er(){}var Pc=class{zone;delegate;constructor(e,n=fa){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},Fh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Er,{},Er,Er)),n.pipe(ve({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},po=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Pc(Zone.current)),this.insideAngular=n.run(()=>new Pc(Zone.current,gg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(_(q))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function MR(t){return xc().ngZone.runOutsideAngular(()=>t())}function yi(t){return xc().ngZone.run(()=>t())}function FR(t){return VR(xc())(t)}function VR(t){return function(n){return n=n.lift(new Fh(t.ngZone)),n.pipe(Pu(t.outsideAngular),rs(t.insideAngular))}}var LR=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),yi(()=>t.apply(void 0,i))},xt=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Er,{},Er,Er))),i[s]=LR(i[s],n));let r=MR(()=>t.apply(this,i));if(!e)if(r instanceof dt){let s=xc();return r.pipe(Pu(s.outsideAngular),rs(s.insideAngular))}else return yi(()=>r);return r instanceof dt?r.pipe(FR):r instanceof Promise?yi(()=>new Promise((s,o)=>r.then(a=>yi(()=>s(a)),a=>yi(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:yi(()=>r)};var Lh=class{constructor(e,n){this._delegate=e,this.firebase=n,co(e,new lt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ac(this._delegate)))}_getService(e,n=Wt){var i;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Wt){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){co(this._delegate,e)}_addOrOverwriteComponent(e){Nh(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var UR={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Uv=new Ct("app-compat","Firebase",UR);function jR(t){let e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:_e,setLogLevel:Dc,onLog:Rc,apps:null,SDK_VERSION:gn,INTERNAL:{registerComponent:a,removeApp:i,useAsService:c,modularAPIs:Mh}};n.default=n,Object.defineProperty(n,"apps",{get:o});function i(l){delete e[l]}function r(l){if(l=l||Wt,!vh(e,l))throw Uv.create("no-app",{appName:l});return e[l]}r.App=t;function s(l,u={}){let d=yr(l,u);if(vh(e,d.name))return e[d.name];let h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(l=>e[l])}function a(l){let u=l.name,d=u.replace("-compat","");if(Pt(l)&&l.type==="PUBLIC"){let h=(f=r())=>{if(typeof f[d]!="function")throw Uv.create("invalid-app-argument",{appName:u});return f[d]()};l.serviceProps!==void 0&&so(h,l.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,l.multipleInstances?f:[])}}return l.type==="PUBLIC"?n[d]:null}function c(l,u){return u==="serverAuth"?null:u}return n}function Bv(){let t=jR(Lh);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Bv,extendNamespace:e,createSubscribe:Tc,ErrorFactory:Ct,deepExtend:so});function e(n){so(t,n)}return t}var BR=Bv();var jv=new Gt("@firebase/app-compat"),$R="@firebase/app-compat",zR="0.2.29";function qR(t){_e($R,zR,t)}if(_v()&&self.firebase!==void 0){jv.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&jv.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var yn=BR;qR();var GR="firebase",HR="10.9.0";yn.registerVersion(GR,HR,"app-compat");var Oc=class{constructor(e){return e}},$v=new C("angularfire2.app.options"),zv=new C("angularfire2.app.name");function WR(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let o=yn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>yn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;KR("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Oc(o)}var KR=(t,...e)=>{gs()&&typeof console<"u"&&console[t](...e)},YR={provide:Oc,useFactory:WR,deps:[$v,q,[new ht,zv]]},qv=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:$v,useValue:n},{provide:zv,useValue:i}]}}constructor(n){yn.registerVersion("angularfire",_n.full,"core"),yn.registerVersion("angularfire",_n.full,"app-compat"),yn.registerVersion("angular",ba.full,n.toString())}static \u0275fac=function(i){return new(i||t)(_(Rt))};static \u0275mod=fe({type:t});static \u0275inj=pe({providers:[YR]})}return t})();var zL=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];var vi=class{constructor(e){return e}},mo=class{constructor(){return uo()}};function QR(t){return t&&t.length===1?t[0]:new vi(vr())}var Uh=new C("angularfire2._apps"),XR={provide:vi,useFactory:QR,deps:[[new ht,Uh]]},ZR={provide:mo,deps:[[new ht,Uh]]};function JR(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new vi(i)}}var eD=(()=>{class t{constructor(n){_e("angularfire",_n.full,"core"),_e("angularfire",_n.full,"app"),_e("angular",ba.full,n.toString())}static \u0275fac=function(i){return new(i||t)(_(Rt))};static \u0275mod=fe({type:t});static \u0275inj=pe({providers:[XR,ZR]})}return t})();function Gv(t,...e){return{ngModule:eD,providers:[{provide:Uh,useFactory:JR(t),multi:!0,deps:[q,Re,po,...e]}]}}var Hv=xt(yr,!0);function Jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eE=Jv,tE=new Ct("auth","Firebase",Jv());var Mc=new Gt("@firebase/auth");function nD(t,...e){Mc.logLevel<=K.WARN&&Mc.warn(`Auth (${gn}): ${t}`,...e)}function Nc(t,...e){Mc.logLevel<=K.ERROR&&Mc.error(`Auth (${gn}): ${t}`,...e)}function Wv(t,...e){throw Xh(t,...e)}function Qh(t,...e){return Xh(t,...e)}function iD(t,e,n){let i=Object.assign(Object.assign({},eE()),{[e]:n});return new Ct("auth","Firebase",i).create(e,{appName:t.name})}function Xh(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return tE.create(t,...e)}function ne(t,e,...n){if(!t)throw Xh(e,...n)}function go(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Nc(e),new Error(e)}function Fc(t,e){t||go(e)}function rD(){return Kv()==="http:"||Kv()==="https:"}function Kv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function sD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rD()||yv()||"connection"in navigator)?navigator.onLine:!0}function oD(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var wi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fc(n>e,"Short delay should be less than long delay!"),this.isMobile=gv()||vv()}get(){return sD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function aD(t,e){Fc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Vc=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var lD=new wi(3e4,6e4);function nE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function qc(s,o,a,c){return p(this,arguments,function*(t,e,n,i,r={}){return iE(t,r,()=>p(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=Eh(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Vc.fetch()(rE(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function iE(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},cD),e);try{let r=new $h(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw kc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw kc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw kc(t,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw iD(t,u,l);Wv(t,u)}}catch(r){if(r instanceof gt)throw r;Wv(t,"network-request-failed",{message:String(r)})}})}function rE(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?aD(t.config,r):`${t.config.apiScheme}://${r}`}var $h=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Qh(this.auth,"network-request-failed")),lD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function kc(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=Qh(t,e,i);return r.customData._tokenResponse=n,r}function uD(t,e){return p(this,null,function*(){return qc(t,"POST","/v1/accounts:delete",e)})}function dD(t,e){return p(this,null,function*(){return qc(t,"POST","/v1/accounts:lookup",e)})}function _o(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Zh(t,e=!1){return p(this,null,function*(){let n=St(t),i=yield n.getIdToken(e),r=sE(i);ne(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:_o(jh(r.auth_time)),issuedAtTime:_o(jh(r.iat)),expirationTime:_o(jh(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function jh(t){return Number(t)*1e3}function sE(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{let r=_h(n);return r?JSON.parse(r):(Nc("Failed to decode base64 JWT payload"),null)}catch(r){return Nc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function hD(t){let e=sE(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function zh(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof gt&&fD(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function fD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var qh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Lc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_o(this.lastLoginAt),this.creationTime=_o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Uc(t){return p(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield zh(t,dD(n,{idToken:i}));ne(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mD(s.providerUserInfo):[],a=pD(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Jh(t){return p(this,null,function*(){let e=St(t);yield Uc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function pD(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function mD(t){return t.map(e=>{var{providerId:n}=e,i=Du(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function gD(t,e){return p(this,null,function*(){let n=yield iE(t,{},()=>p(this,null,function*(){let i=Eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=rE(t,r,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Vc.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function _D(t,e){return p(this,null,function*(){return qc(t,"POST","/v2/accounts:revokeToken",nE(t,e))})}var jc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return ne(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield gD(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(ne(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ne(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return go("not implemented")}};function zn(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Bc=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Du(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield zh(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Zh(this,e)}reload(){return Jh(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Uc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield zh(this,uD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,c,l,u;let d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,G=(l=n.createdAt)!==null&&l!==void 0?l:void 0,ae=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:Ce,emailVerified:Ge,isAnonymous:Lt,providerData:Ne,stsTokenManager:on}=n;ne(Ce&&on,e,"internal-error");let Bi=jc.fromJSON(this.name,on);ne(typeof Ce=="string",e,"internal-error"),zn(d,e.name),zn(h,e.name),ne(typeof Ge=="boolean",e,"internal-error"),ne(typeof Lt=="boolean",e,"internal-error"),zn(f,e.name),zn(P,e.name),zn(k,e.name),zn(x,e.name),zn(G,e.name),zn(ae,e.name);let is=new t({uid:Ce,auth:e,email:h,emailVerified:Ge,displayName:d,isAnonymous:Lt,photoURL:P,phoneNumber:f,tenantId:k,stsTokenManager:Bi,createdAt:G,lastLoginAt:ae});return Ne&&Array.isArray(Ne)&&(is.providerData=Ne.map(ha=>Object.assign({},ha))),x&&(is._redirectEventId=x),is}static _fromIdTokenResponse(e,n,i=!1){return p(this,null,function*(){let r=new jc;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Uc(s),s})}};var Yv=new Map;function Ei(t){Fc(t instanceof Function,"Expected a class definition");let e=Yv.get(t);return e?(Fc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yv.set(t,e),e)}var yD=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,i){return p(this,null,function*(){this.storage[n]=i})}_get(n){return p(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),Gh=yD;function Bh(t,e,n){return`firebase:${t}:${e}:${n}`}var $c=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Bh(this.userKey,r.apiKey,s),this.fullPersistenceKey=Bh("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Bc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return p(this,null,function*(){if(!n.length)return new t(Ei(Gh),e,i);let r=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Ei(Gh),o=Bh(i,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Bc._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,i))})}};function Qv(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ID(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TD(e))return"Blackberry";if(CD(e))return"Webos";if(ED(e))return"Safari";if((e.includes("chrome/")||wD(e))&&!e.includes("edge/"))return"Chrome";if(bD(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function vD(t=Xe()){return/firefox\//i.test(t)}function ED(t=Xe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wD(t=Xe()){return/crios\//i.test(t)}function ID(t=Xe()){return/iemobile/i.test(t)}function bD(t=Xe()){return/android/i.test(t)}function TD(t=Xe()){return/blackberry/i.test(t)}function CD(t=Xe()){return/webos/i.test(t)}function oE(t,e=[]){let n;switch(t){case"Browser":n=Qv(Xe());break;case"Worker":n=`${Qv(Xe())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gn}/${i}`}var Hh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function SD(n){return p(this,arguments,function*(t,e={}){return qc(t,"GET","/v2/passwordPolicy",nE(t,e))})}var AD=6,Wh=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:AD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Kh=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zc(this),this.idTokenSubscription=new zc(this),this.beforeStateQueue=new Hh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield $c.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Uc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oD()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?St(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Ei(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield SD(this),n=new Wh(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ct("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield _D(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ei(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=yield $c.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&nD(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function RD(t){return St(t)}var zc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tc(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var DD={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PD(t){DD=t}function xD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function OD(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Ei);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}var aU=xD("rcb"),cU=new wi(3e4,6e4);var lU=new wi(2e3,1e4);var uU=10*60*1e3;var dU=new wi(3e4,6e4);var hU=new wi(5e3,15e3);var fU=encodeURIComponent("fac");var Xv="@firebase/auth",Zv="1.6.2";var Yh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ND(t){Pt(new lt("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oE(t)},l=new Kh(i,r,s,c);return OD(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Pt(new lt("auth-internal",e=>{let n=RD(e.getProvider("auth").getImmediate());return(i=>new Yh(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_e(Xv,Zv,kD(t)),_e(Xv,Zv,"esm2017")}var MD=5*60,pU=pv("authIdTokenMaxAge")||MD;function FD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}PD({loadJS(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=Qh("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",FD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ND("Browser");var MP="auth";var Gc=class{constructor(){return fo(MP)}};var FP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kt={},S,If=If||{},L=FP||self;function sl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function VP(t){return Object.prototype.hasOwnProperty.call(t,ef)&&t[ef]||(t[ef]=++LP)}var ef="closure_uid_"+(1e9*Math.random()>>>0),LP=0;function UP(t,e,n){return t.call.apply(t.bind,arguments)}function jP(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Ze(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ze=UP:Ze=jP,Ze.apply(null,arguments)}function Hc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Ue(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function qn(){this.s=this.s,this.o=this.o}var BP=0;qn.prototype.s=!1;qn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),BP!=0)&&VP(this)};qn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function bf(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function aE(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(sl(i)){let r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function Je(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Je.prototype.h=function(){this.defaultPrevented=!0};var $P=function(){if(!L.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};L.addEventListener("test",n,e),L.removeEventListener("test",n,e)}catch{}return t}();function bo(t){return/^[\s\xa0]*$/.test(t)}function ol(){var t=L.navigator;return t&&(t=t.userAgent)?t:""}function Kt(t){return ol().indexOf(t)!=-1}function Tf(t){return Tf[" "](t),t}Tf[" "]=function(){};function zP(t,e){var n=xx;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var qP=Kt("Opera"),Tr=Kt("Trident")||Kt("MSIE"),EE=Kt("Edge"),of=EE||Tr,wE=Kt("Gecko")&&!(ol().toLowerCase().indexOf("webkit")!=-1&&!Kt("Edge"))&&!(Kt("Trident")||Kt("MSIE"))&&!Kt("Edge"),GP=ol().toLowerCase().indexOf("webkit")!=-1&&!Kt("Edge");function IE(){var t=L.document;return t?t.documentMode:void 0}var af;e:{if(Wc="",Kc=function(){var t=ol();if(wE)return/rv:([^\);]+)(\)|;)/.exec(t);if(EE)return/Edge\/([\d\.]+)/.exec(t);if(Tr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(GP)return/WebKit\/(\S+)/.exec(t);if(qP)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Kc&&(Wc=Kc?Kc[1]:""),Tr&&(Yc=IE(),Yc!=null&&Yc>parseFloat(Wc))){af=String(Yc);break e}af=Wc}var Wc,Kc,Yc,cf;L.document&&Tr?(tf=IE(),cf=tf||parseInt(af,10)||void 0):cf=void 0;var tf,HP=cf;function To(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(wE){e:{try{Tf(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:WP[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&To.$.h.call(this)}}Ue(To,Je);var WP={2:"touch",3:"pen",4:"mouse"};To.prototype.h=function(){To.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Oo="closure_listenable_"+(1e6*Math.random()|0),KP=0;function YP(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++KP,this.fa=this.ia=!1}function al(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Cf(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function QP(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function bE(t){let e={};for(let n in t)e[n]=t[n];return e}var cE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TE(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<cE.length;s++)n=cE[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function cl(t){this.src=t,this.g={},this.h=0}cl.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=uf(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new YP(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function lf(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=vE(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(al(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function uf(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var Sf="closure_lm_"+(1e6*Math.random()|0),nf={};function CE(t,e,n,i,r){if(i&&i.once)return AE(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)CE(t,e[s],n,i,r);return null}return n=Df(n),t&&t[Oo]?t.O(e,n,xo(i)?!!i.capture:!!i,r):SE(t,e,n,!1,i,r)}function SE(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=xo(r)?!!r.capture:!!r,a=Rf(t);if(a||(t[Sf]=a=new cl(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=XP(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)$P||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(DE(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function XP(){function t(n){return e.call(t.src,t.listener,n)}let e=ZP;return t}function AE(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)AE(t,e[s],n,i,r);return null}return n=Df(n),t&&t[Oo]?t.P(e,n,xo(i)?!!i.capture:!!i,r):SE(t,e,n,!0,i,r)}function RE(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)RE(t,e[s],n,i,r);else i=xo(i)?!!i.capture:!!i,n=Df(n),t&&t[Oo]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=uf(s,n,i,r),-1<n&&(al(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Rf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=uf(e,n,i,r)),(n=-1<t?e[t]:null)&&Af(n))}function Af(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Oo])lf(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(DE(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Rf(e))?(lf(n,t),n.h==0&&(n.src=null,e[Sf]=null)):al(t)}}}function DE(t){return t in nf?nf[t]:nf[t]="on"+t}function ZP(t,e){if(t.fa)t=!0;else{e=new To(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Af(t),t=n.call(i,e)}return t}function Rf(t){return t=t[Sf],t instanceof cl?t:null}var rf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Df(t){return typeof t=="function"?t:(t[rf]||(t[rf]=function(e){return t.handleEvent(e)}),t[rf])}function Le(){qn.call(this),this.i=new cl(this),this.S=this,this.J=null}Ue(Le,qn);Le.prototype[Oo]=!0;Le.prototype.removeEventListener=function(t,e,n,i){RE(this,t,e,n,i)};function ze(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Je(e,t);else if(e instanceof Je)e.target=e.target||t;else{var r=e;e=new Je(i,t),TE(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Qc(o,i,!0,e)&&r}if(o=e.g=t,r=Qc(o,i,!0,e)&&r,r=Qc(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Qc(o,i,!1,e)&&r}Le.prototype.N=function(){if(Le.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)al(n[i]);delete t.g[e],t.h--}}this.J=null};Le.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Le.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Qc(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&lf(t.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Pf=L.JSON.stringify,df=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function JP(){var t=xf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var hf=class{constructor(){this.h=this.g=null}add(e,n){let i=PE.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},PE=new df(()=>new ff,t=>t.reset()),ff=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function ex(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function tx(t){L.setTimeout(()=>{throw t},0)}var Co,So=!1,xf=new hf,xE=()=>{let t=L.Promise.resolve(void 0);Co=()=>{t.then(nx)}},nx=()=>{for(var t;t=JP();){try{t.h.call(t.g)}catch(n){tx(n)}var e=PE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}So=!1};function ll(t,e){Le.call(this),this.h=t||1,this.g=e||L,this.j=Ze(this.qb,this),this.l=Date.now()}Ue(ll,Le);S=ll.prototype;S.ga=!1;S.T=null;S.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ze(this,"tick"),this.ga&&(Of(this),this.start()))}};S.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Of(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}S.N=function(){ll.$.N.call(this),Of(this),delete this.g};function kf(t,e,n){if(typeof t=="function")n&&(t=Ze(t,n));else if(t&&typeof t.handleEvent=="function")t=Ze(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:L.setTimeout(t,e||0)}function OE(t){t.g=kf(()=>{t.g=null,t.i&&(t.i=!1,OE(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var pf=class extends qn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:OE(this)}N(){super.N(),this.g&&(L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ao(t){qn.call(this),this.h=t,this.g={}}Ue(Ao,qn);var lE=[];function kE(t,e,n,i){Array.isArray(n)||(n&&(lE[0]=n.toString()),n=lE);for(var r=0;r<n.length;r++){var s=CE(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function NE(t){Cf(t.g,function(e,n){this.g.hasOwnProperty(n)&&Af(e)},t),t.g={}}Ao.prototype.N=function(){Ao.$.N.call(this),NE(this)};Ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ul(){this.g=!0}ul.prototype.Ea=function(){this.g=!1};function ix(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function rx(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function Ir(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+ox(t,n)+(i?" "+i:"")})}function sx(t,e){t.info(function(){return"TIMEOUT: "+e})}ul.prototype.info=function(){};function ox(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Pf(n)}catch{return e}}var Ci={},uE=null;function dl(){return uE=uE||new Le}Ci.Ta="serverreachability";function ME(t){Je.call(this,Ci.Ta,t)}Ue(ME,Je);function Ro(t){let e=dl();ze(e,new ME(e))}Ci.STAT_EVENT="statevent";function FE(t,e){Je.call(this,Ci.STAT_EVENT,t),this.stat=e}Ue(FE,Je);function it(t){let e=dl();ze(e,new FE(e,t))}Ci.Ua="timingevent";function VE(t,e){Je.call(this,Ci.Ua,t),this.size=e}Ue(VE,Je);function ko(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return L.setTimeout(function(){t()},e)}var hl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},LE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Nf(){}Nf.prototype.h=null;function dE(t){return t.h||(t.h=t.i())}function UE(){}var No={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mf(){Je.call(this,"d")}Ue(Mf,Je);function Ff(){Je.call(this,"c")}Ue(Ff,Je);var mf;function fl(){}Ue(fl,Nf);fl.prototype.g=function(){return new XMLHttpRequest};fl.prototype.i=function(){return{}};mf=new fl;function Mo(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Ao(this),this.P=ax,t=of?125:void 0,this.V=new ll(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new jE}function jE(){this.i=null,this.g="",this.h=!1}var ax=45e3,BE={},gf={};S=Mo.prototype;S.setTimeout=function(t){this.P=t};function _f(t,e,n){t.L=1,t.A=ml(En(e)),t.u=n,t.S=!0,$E(t,null)}function $E(t,e){t.G=Date.now(),Fo(t),t.B=En(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),QE(n.i,"t",i),t.o=0,n=t.l.J,t.h=new jE,t.g=_w(t.l,n?e:null,!t.u),0<t.O&&(t.M=new pf(Ze(t.Pa,t,t.g),t.O)),kE(t.U,t.g,"readystatechange",t.nb),e=t.I?bE(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ro(),ix(t.j,t.v,t.B,t.m,t.W,t.u)}S.nb=function(t){t=t.target;let e=this.M;e&&Yt(t)==3?e.l():this.Pa(t)};S.Pa=function(t){try{if(t==this.g)e:{let u=Yt(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||of||this.g&&(this.h.h||this.g.ja()||mE(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Ro(3):Ro(2)),pl(this);var n=this.g.da();this.ca=n;t:if(zE(this)){var i=mE(this.g);t="";var r=i.length,s=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),Io(this);var o="";break t}this.h.i=new L.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,rx(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bo(a)){var l=a;break t}}l=null}if(n=l)Ir(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yf(this,n);else{this.i=!1,this.s=3,it(12),Ii(this),Io(this);break e}}this.S?(qE(this,u,o),of&&this.i&&u==3&&(kE(this.U,this.V,"tick",this.mb),this.V.start())):(Ir(this.j,this.m,o,null),yf(this,o)),u==4&&Ii(this),this.i&&!this.J&&(u==4?fw(this.l,this):(this.i=!1,Fo(this)))}else Rx(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),Ii(this),Io(this)}}}catch{}finally{}};function zE(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function qE(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=cx(t,n),r==gf){e==4&&(t.s=4,it(14),i=!1),Ir(t.j,t.m,null,"[Incomplete Response]");break}else if(r==BE){t.s=4,it(15),Ir(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Ir(t.j,t.m,r,null),yf(t,r);zE(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,it(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$f(e),e.M=!0,it(11))):(Ir(t.j,t.m,n,"[Invalid Chunked Response]"),Ii(t),Io(t))}S.mb=function(){if(this.g){var t=Yt(this.g),e=this.g.ja();this.o<e.length&&(pl(this),qE(this,t,e),this.i&&t!=4&&Fo(this))}};function cx(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?gf:(n=Number(e.substring(n,i)),isNaN(n)?BE:(i+=1,i+n>e.length?gf:(e=e.slice(i,i+n),t.o=i+n,e)))}S.cancel=function(){this.J=!0,Ii(this)};function Fo(t){t.Y=Date.now()+t.P,GE(t,t.P)}function GE(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ko(Ze(t.lb,t),e)}function pl(t){t.C&&(L.clearTimeout(t.C),t.C=null)}S.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(sx(this.j,this.B),this.L!=2&&(Ro(),it(17)),Ii(this),this.s=2,Io(this)):GE(this,this.Y-t)};function Io(t){t.l.H==0||t.J||fw(t.l,t)}function Ii(t){pl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Of(t.V),NE(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function yf(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||vf(n.i,t))){if(!t.K&&vf(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)tl(n),yl(n);else break e;Bf(n),it(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=ko(Ze(n.ib,n),6e3));if(1>=JE(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else bi(n,11)}else if((t.K||n.g==t)&&tl(n),!bo(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let P=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=i.i;s.g||P.indexOf("spdy")==-1&&P.indexOf("quic")==-1&&P.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Vf(s,s.h),s.h=null))}if(i.F){let k=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;k&&(i.Da=k,ue(i.I,i.F,k))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=gw(i,i.J?i.pa:null,i.Y),o.K){ew(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(pl(a),Fo(a)),i.g=o}else dw(i);0<n.j.length&&vl(n)}else l[0]!="stop"&&l[0]!="close"||bi(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?bi(n,7):jf(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Ro(4)}catch{}}function lx(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(sl(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function ux(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(sl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function HE(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(sl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=ux(t),i=lx(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var WE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dx(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ti(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ti){this.h=t.h,Jc(this,t.j),this.s=t.s,this.g=t.g,el(this,t.m),this.l=t.l;var e=t.i,n=new Do;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),hE(this,n),this.o=t.o}else t&&(e=String(t).match(WE))?(this.h=!1,Jc(this,e[1]||"",!0),this.s=Eo(e[2]||""),this.g=Eo(e[3]||"",!0),el(this,e[4]),this.l=Eo(e[5]||"",!0),hE(this,e[6]||"",!0),this.o=Eo(e[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}Ti.prototype.toString=function(){var t=[],e=this.j;e&&t.push(wo(e,fE,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(wo(e,fE,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(wo(n,n.charAt(0)=="/"?px:fx,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",wo(n,gx)),t.join("")};function En(t){return new Ti(t)}function Jc(t,e,n){t.j=n?Eo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function el(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function hE(t,e,n){e instanceof Do?(t.i=e,_x(t.i,t.h)):(n||(e=wo(e,mx)),t.i=new Do(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function ml(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Eo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function wo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,hx),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hx(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var fE=/[#\/\?@]/g,fx=/[#\?:]/g,px=/[#\?]/g,mx=/[#\?@]/g,gx=/#/g;function Do(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Gn(t){t.g||(t.g=new Map,t.h=0,t.i&&dx(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}S=Do.prototype;S.add=function(t,e){Gn(this),this.i=null,t=Cr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function KE(t,e){Gn(t),e=Cr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function YE(t,e){return Gn(t),e=Cr(t,e),t.g.has(e)}S.forEach=function(t,e){Gn(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};S.ta=function(){Gn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};S.Z=function(t){Gn(this);let e=[];if(typeof t=="string")YE(this,t)&&(e=e.concat(this.g.get(Cr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};S.set=function(t,e){return Gn(this),this.i=null,t=Cr(this,t),YE(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};S.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function QE(t,e,n){KE(t,e),0<n.length&&(t.i=null,t.g.set(Cr(t,e),bf(n)),t.h+=n.length)}S.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function Cr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function _x(t,e){e&&!t.j&&(Gn(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(KE(this,i),QE(this,r,n))},t)),t.j=e}var yx=class{constructor(t,e){this.g=t,this.map=e}};function XE(t){this.l=t||vx,L.PerformanceNavigationTiming?(t=L.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(L.g&&L.g.Ka&&L.g.Ka()&&L.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vx=10;function ZE(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function JE(t){return t.h?1:t.g?t.g.size:0}function vf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Vf(t,e){t.g?t.g.add(e):t.h=e}function ew(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}XE.prototype.cancel=function(){if(this.i=tw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function tw(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return bf(t.i)}var Ex=class{stringify(t){return L.JSON.stringify(t,void 0)}parse(t){return L.JSON.parse(t,void 0)}};function wx(){this.g=new Ex}function Ix(t,e,n){let i=n||"";try{HE(t,function(r,s){let o=r;xo(r)&&(o=Pf(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function bx(t,e){let n=new ul;if(L.Image){let i=new Image;i.onload=Hc(Xc,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Hc(Xc,n,i,"TestLoadImage: error",!1,e),i.onabort=Hc(Xc,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Hc(Xc,n,i,"TestLoadImage: timeout",!1,e),L.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Xc(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Vo(t){this.l=t.ec||null,this.j=t.ob||!1}Ue(Vo,Nf);Vo.prototype.g=function(){return new gl(this.l,this.j)};Vo.prototype.i=function(t){return function(){return t}}({});function gl(t,e){Le.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Lf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ue(gl,Le);var Lf=0;S=gl.prototype;S.open=function(t,e){if(this.readyState!=Lf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Po(this)};S.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||L).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};S.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=Lf};S.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof L.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nw(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function nw(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}S.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Lo(this):Po(this),this.readyState==3&&nw(this)}};S.Za=function(t){this.g&&(this.response=this.responseText=t,Lo(this))};S.Ya=function(t){this.g&&(this.response=t,Lo(this))};S.ka=function(){this.g&&Lo(this)};function Lo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Po(t)}S.setRequestHeader=function(t,e){this.v.append(t,e)};S.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};S.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Po(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Tx=L.JSON.parse;function we(t){Le.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=iw,this.L=this.M=!1}Ue(we,Le);var iw="",Cx=/^https?$/i,Sx=["POST","PUT"];S=we.prototype;S.Oa=function(t){this.M=t};S.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mf.g(),this.C=this.u?dE(this.u):dE(mf),this.g.onreadystatechange=Ze(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){pE(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=L.FormData&&t instanceof L.FormData,!(0<=vE(Sx,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ow(this),0<this.B&&((this.L=Ax(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ze(this.ua,this)):this.A=kf(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){pE(this,s)}};function Ax(t){return Tr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}S.ua=function(){typeof If<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ze(this,"timeout"),this.abort(8))};function pE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rw(t),_l(t)}function rw(t){t.F||(t.F=!0,ze(t,"complete"),ze(t,"error"))}S.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ze(this,"complete"),ze(this,"abort"),_l(this))};S.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_l(this,!0)),we.$.N.call(this)};S.La=function(){this.s||(this.G||this.v||this.l?sw(this):this.kb())};S.kb=function(){sw(this)};function sw(t){if(t.h&&typeof If<"u"&&(!t.C[1]||Yt(t)!=4||t.da()!=2)){if(t.v&&Yt(t)==4)kf(t.La,0,t);else if(ze(t,"readystatechange"),Yt(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(WE)[1]||null;!r&&L.self&&L.self.location&&(r=L.self.location.protocol.slice(0,-1)),i=!Cx.test(r?r.toLowerCase():"")}n=i}if(n)ze(t,"complete"),ze(t,"success");else{t.m=6;try{var s=2<Yt(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",rw(t)}}finally{_l(t)}}}}function _l(t,e){if(t.g){ow(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ze(t,"ready");try{n.onreadystatechange=i}catch{}}}function ow(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(L.clearTimeout(t.A),t.A=null)}S.isActive=function(){return!!this.g};function Yt(t){return t.g?t.g.readyState:0}S.da=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}};S.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};S.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Tx(e)}};function mE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case iw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Rx(t){let e={};t=(t.g&&2<=Yt(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(bo(t[i]))continue;var n=ex(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[r]||[];e[r]=s,s.push(n)}QP(e,function(i){return i.join(", ")})}S.Ia=function(){return this.m};S.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function aw(t){let e="";return Cf(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Uf(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=aw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ue(t,e,n))}function yo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cw(t){this.Ga=0,this.j=[],this.l=new ul,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yo("baseRetryDelayMs",5e3,t),this.hb=yo("retryDelaySeedMs",1e4,t),this.eb=yo("forwardChannelMaxRetries",2,t),this.xa=yo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new XE(t&&t.concurrentRequestLimit),this.Ja=new wx,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}S=cw.prototype;S.ra=8;S.H=1;function jf(t){if(lw(t),t.H==3){var e=t.W++,n=En(t.I);if(ue(n,"SID",t.K),ue(n,"RID",e),ue(n,"TYPE","terminate"),Uo(t,n),e=new Mo(t,t.l,e),e.L=2,e.A=ml(En(n)),n=!1,L.navigator&&L.navigator.sendBeacon)try{n=L.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&L.Image&&(new Image().src=e.A,n=!0),n||(e.g=_w(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Fo(e)}mw(t)}function yl(t){t.g&&($f(t),t.g.cancel(),t.g=null)}function lw(t){yl(t),t.u&&(L.clearTimeout(t.u),t.u=null),tl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&L.clearTimeout(t.m),t.m=null)}function vl(t){if(!ZE(t.i)&&!t.m){t.m=!0;var e=t.Na;Co||xE(),So||(Co(),So=!0),xf.add(e,t),t.C=0}}function Dx(t,e){return JE(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ko(Ze(t.Na,t,e),pw(t,t.C)),t.C++,!0)}S.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new Mo(this,this.l,t),s=this.s;if(this.U&&(s?(s=bE(s),TE(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=uw(this,r,e),n=En(this.I),ue(n,"RID",t),ue(n,"CVER",22),this.F&&ue(n,"X-HTTP-Session-Id",this.F),Uo(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(aw(s)))+"&"+e:this.o&&Uf(n,this.o,s)),Vf(this.i,r),this.bb&&ue(n,"TYPE","init"),this.P?(ue(n,"$req",e),ue(n,"SID","null"),r.aa=!0,_f(r,n,null)):_f(r,n,e),this.H=2}}else this.H==3&&(t?gE(this,t):this.j.length==0||ZE(this.i)||gE(this))};function gE(t,e){var n;e?n=e.m:n=t.W++;let i=En(t.I);ue(i,"SID",t.K),ue(i,"RID",n),ue(i,"AID",t.V),Uo(t,i),t.o&&t.s&&Uf(i,t.o,t.s),n=new Mo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=uw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Vf(t.i,n),_f(n,i,e)}function Uo(t,e){t.na&&Cf(t.na,function(n,i){ue(e,i,n)}),t.h&&HE({},function(n,i){ue(e,i,n)})}function uw(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Ze(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{Ix(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function dw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Co||xE(),So||(Co(),So=!0),xf.add(e,t),t.A=0}}function Bf(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ko(Ze(t.Ma,t),pw(t,t.A)),t.A++,!0)}S.Ma=function(){if(this.u=null,hw(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ko(Ze(this.jb,this),t)}};S.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,it(10),yl(this),hw(this))};function $f(t){t.B!=null&&(L.clearTimeout(t.B),t.B=null)}function hw(t){t.g=new Mo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=En(t.wa);ue(e,"RID","rpc"),ue(e,"SID",t.K),ue(e,"AID",t.V),ue(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ue(e,"TO",t.qa),ue(e,"TYPE","xmlhttp"),Uo(t,e),t.o&&t.s&&Uf(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ml(En(e)),n.u=null,n.S=!0,$E(n,t)}S.ib=function(){this.v!=null&&(this.v=null,yl(this),Bf(this),it(19))};function tl(t){t.v!=null&&(L.clearTimeout(t.v),t.v=null)}function fw(t,e){var n=null;if(t.g==e){tl(t),$f(t),t.g=null;var i=2}else if(vf(t.i,e))n=e.F,ew(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=dl(),ze(i,new VE(i,n)),vl(t)}else dw(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&Dx(t,e)||i==2&&Bf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:bi(t,5);break;case 4:bi(t,10);break;case 3:bi(t,6);break;default:bi(t,2)}}}function pw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function bi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Ze(t.pb,t);n||(n=new Ti("//www.google.com/images/cleardot.gif"),L.location&&L.location.protocol=="http"||Jc(n,"https"),ml(n)),bx(n.toString(),i)}else it(2);t.H=0,t.h&&t.h.za(e),mw(t),lw(t)}S.pb=function(t){t?(this.l.info("Successfully pinged google.com"),it(2)):(this.l.info("Failed to ping google.com"),it(1))};function mw(t){if(t.H=0,t.ma=[],t.h){let e=tw(t.i);(e.length!=0||t.j.length!=0)&&(aE(t.ma,e),aE(t.ma,t.j),t.i.i.length=0,bf(t.j),t.j.length=0),t.h.ya()}}function gw(t,e,n){var i=n instanceof Ti?En(n):new Ti(n);if(i.g!="")e&&(i.g=e+"."+i.g),el(i,i.m);else{var r=L.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Ti(null);i&&Jc(s,i),e&&(s.g=e),r&&el(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&ue(i,n,e),ue(i,"VER",t.ra),Uo(t,i),i}function _w(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new we(new Vo({ob:n})):new we(t.va),e.Oa(t.J),e}S.isActive=function(){return!!this.h&&this.h.isActive(this)};function yw(){}S=yw.prototype;S.Ba=function(){};S.Aa=function(){};S.za=function(){};S.ya=function(){};S.isActive=function(){return!0};S.Va=function(){};function nl(){if(Tr&&!(10<=Number(HP)))throw Error("Environmental error: no available transport.")}nl.prototype.g=function(t,e){return new _t(t,e)};function _t(t,e){Le.call(this),this.g=new cw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!bo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bo(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Sr(this)}Ue(_t,Le);_t.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;it(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=gw(t,null,t.Y),vl(t)};_t.prototype.close=function(){jf(this.g)};_t.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Pf(t),t=n);e.j.push(new yx(e.fb++,t)),e.H==3&&vl(e)};_t.prototype.N=function(){this.g.h=null,delete this.j,jf(this.g),delete this.g,_t.$.N.call(this)};function vw(t){Mf.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ue(vw,Mf);function Ew(){Ff.call(this),this.status=1}Ue(Ew,Ff);function Sr(t){this.g=t}Ue(Sr,yw);Sr.prototype.Ba=function(){ze(this.g,"a")};Sr.prototype.Aa=function(t){ze(this.g,new vw(t))};Sr.prototype.za=function(t){ze(this.g,new Ew)};Sr.prototype.ya=function(){ze(this.g,"b")};function Px(){this.blockSize=-1}function Ot(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ue(Ot,Px);Ot.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function sf(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Ot.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)sf(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){sf(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){sf(this,i),r=0;break}}this.h=r,this.i+=e};Ot.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function ie(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var xx={};function zf(t){return-128<=t&&128>t?zP(t,function(e){return new ie([e|0],0>e?-1:0)}):new ie([t|0],0>t?-1:0)}function Qt(t){if(isNaN(t)||!isFinite(t))return br;if(0>t)return $e(Qt(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Ef;return new ie(e,0)}function ww(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return $e(ww(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Qt(Math.pow(e,8)),i=br,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Qt(Math.pow(e,s)),i=i.R(s).add(Qt(o))):(i=i.R(n),i=i.add(Qt(o)))}return i}var Ef=4294967296,br=zf(0),wf=zf(1),_E=zf(16777216);S=ie.prototype;S.ea=function(){if(At(this))return-$e(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Ef+i)*e,e*=Ef}return t};S.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(vn(this))return"0";if(At(this))return"-"+$e(this).toString(t);for(var e=Qt(Math.pow(t,6)),n=this,i="";;){var r=rl(n,e).g;n=il(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,vn(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};S.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function vn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function At(t){return t.h==-1}S.X=function(t){return t=il(this,t),At(t)?-1:vn(t)?0:1};function $e(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new ie(n,~t.h).add(wf)}S.abs=function(){return At(this)?$e(this):this};S.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new ie(n,n[n.length-1]&-2147483648?-1:0)};function il(t,e){return t.add($e(e))}S.R=function(t){if(vn(this)||vn(t))return br;if(At(this))return At(t)?$e(this).R($e(t)):$e($e(this).R(t));if(At(t))return $e(this.R($e(t)));if(0>this.X(_E)&&0>t.X(_E))return Qt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=o*c,Zc(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Zc(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Zc(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Zc(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new ie(n,0)};function Zc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function vo(t,e){this.g=t,this.h=e}function rl(t,e){if(vn(e))throw Error("division by zero");if(vn(t))return new vo(br,br);if(At(t))return e=rl($e(t),e),new vo($e(e.g),$e(e.h));if(At(e))return e=rl(t,$e(e)),new vo($e(e.g),e.h);if(30<t.g.length){if(At(t)||At(e))throw Error("slowDivide_ only works with positive integers.");for(var n=wf,i=e;0>=i.X(t);)n=yE(n),i=yE(i);var r=wr(n,1),s=wr(i,1);for(i=wr(i,2),n=wr(n,2);!vn(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=wr(i,1),n=wr(n,1)}return e=il(t,r.R(e)),new vo(r,e)}for(r=br;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Qt(n),o=s.R(e);At(o)||0<o.X(t);)n-=i,s=Qt(n),o=s.R(e);vn(s)&&(s=wf),r=r.add(s),t=il(t,o)}return new vo(r,t)}S.gb=function(t){return rl(this,t).h};S.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new ie(n,this.h&t.h)};S.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new ie(n,this.h|t.h)};S.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new ie(n,this.h^t.h)};function yE(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new ie(n,t.h)}function wr(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ie(r,t.h)}nl.prototype.createWebChannel=nl.prototype.g;_t.prototype.send=_t.prototype.u;_t.prototype.open=_t.prototype.m;_t.prototype.close=_t.prototype.close;hl.NO_ERROR=0;hl.TIMEOUT=8;hl.HTTP_ERROR=6;LE.COMPLETE="complete";UE.EventType=No;No.OPEN="a";No.CLOSE="b";No.ERROR="c";No.MESSAGE="d";Le.prototype.listen=Le.prototype.O;we.prototype.listenOnce=we.prototype.P;we.prototype.getLastError=we.prototype.Sa;we.prototype.getLastErrorCode=we.prototype.Ia;we.prototype.getStatus=we.prototype.da;we.prototype.getResponseJson=we.prototype.Wa;we.prototype.getResponseText=we.prototype.ja;we.prototype.send=we.prototype.ha;we.prototype.setWithCredentials=we.prototype.Oa;Ot.prototype.digest=Ot.prototype.l;Ot.prototype.reset=Ot.prototype.reset;Ot.prototype.update=Ot.prototype.j;ie.prototype.add=ie.prototype.add;ie.prototype.multiply=ie.prototype.R;ie.prototype.modulo=ie.prototype.gb;ie.prototype.compare=ie.prototype.X;ie.prototype.toNumber=ie.prototype.ea;ie.prototype.toString=ie.prototype.toString;ie.prototype.getBits=ie.prototype.D;ie.fromNumber=Qt;ie.fromString=ww;var Iw=kt.createWebChannelTransport=function(){return new nl},bw=kt.getStatEventTarget=function(){return dl()},El=kt.ErrorCode=hl,Tw=kt.EventType=LE,Cw=kt.Event=Ci,qf=kt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rj=kt.FetchXmlHttpFactory=Vo,jo=kt.WebChannel=UE,Sw=kt.XhrIo=we,Aw=kt.Md5=Ot,Si=kt.Integer=ie;var Rw="@firebase/firestore";var je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid"),je.MOCK_USER=new je("mock-user");var Hr="10.9.0";var Oi=new Gt("@firebase/firestore");function Bo(){return Oi.logLevel}function A(t,...e){if(Oi.logLevel<=K.DEBUG){let n=e.map(Rm);Oi.debug(`Firestore (${Hr}): ${t}`,...n)}}function nn(t,...e){if(Oi.logLevel<=K.ERROR){let n=e.map(Rm);Oi.error(`Firestore (${Hr}): ${t}`,...n)}}function kr(t,...e){if(Oi.logLevel<=K.WARN){let n=e.map(Rm);Oi.warn(`Firestore (${Hr}): ${t}`,...n)}}function Rm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function V(t="Unexpected state"){let e=`FIRESTORE (${Hr}) INTERNAL ASSERTION FAILED: `+t;throw nn(e),new Error(e)}function le(t,e){t||V()}function U(t,e){return t}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},N=class extends gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(je.UNAUTHENTICATED))}shutdown(){}},Qf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Xf=class{constructor(e){this.t=e,this.currentUser=je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),s=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(le(typeof i.accessToken=="string"),new Cl(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new je(e)}},Zf=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Jf=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Zf(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ep=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},tp=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,A("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new ep(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Ox(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Sl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Ox(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function J(t,e){return t<e?-1:t>e?1:0}function Nr(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}var qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new N(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new N(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new N(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var B=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new qe(0,0))}static max(){return new t(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Al=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&V(),i===void 0?i=e.length-n:i>e.length-n&&V(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},be=class t extends Al{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new N(v.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},kx=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yt=class t extends Al{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return kx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new N(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new N(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new N(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new N(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var F=class t{constructor(e){this.path=e}static fromPath(e){return new t(be.fromString(e))}static fromName(e){return new t(be.fromString(e).popFirst(5))}static empty(){return new t(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new be(e.slice()))}};var np=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};np.UNKNOWN_ID=-1;function Nx(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=B.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new ki(r,F.empty(),e)}function Mx(t){return new ki(t.readTime,t.key,-1)}var ki=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(B.min(),F.empty(),-1)}static max(){return new t(B.max(),F.empty(),-1)}};function Fx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}var Vx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ip=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ia(t){return p(this,null,function*(){if(t.code!==v.FAILED_PRECONDITION||t.message!==Vx)throw t;A("LocalStore","Unexpectedly lost primary lease")})}var w=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};var rp=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Mt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new xi(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=Dm(i.target.error);this.V.reject(new xi(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(s){throw new xi(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(A("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new op(n)}},Rl=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Xe())===12.2&&nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return A("SimpleDb","Removing database:",e),Ai(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!bc())return!1;if(t.C())return!0;let e=Xe(),n=t.S(e),i=0<n&&n<10,r=t.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return p(this,null,function*(){return this.db||(A("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;n(o)},r.onblocked=()=>{i(new xi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new N(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new N(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new xi(e,o))},r.onupgradeneeded=s=>{A("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{A("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=rp.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),w.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(A("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},sp=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ai(this.k.delete())}},xi=class extends N{constructor(e,n){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ra(t){return t.name==="IndexedDbTransactionError"}var op=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(A("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(A("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ai(i)}add(e){return A("SimpleDb","ADD",this.store.name,e,e),Ai(this.store.add(e))}get(e){return Ai(this.store.get(e)).next(n=>(n===void 0&&(n=null),A("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return A("SimpleDb","DELETE",this.store.name,e),Ai(this.store.delete(e))}count(){return A("SimpleDb","COUNT",this.store.name),Ai(this.store.count())}W(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new w((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(i),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new w((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,n){A("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.J=!1;let r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.G(r,n)}Z(e){let n=this.cursor({});return new w((i,r)=>{n.onerror=s=>{let o=Dm(s.target.error);r(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,n){let i=[];return new w((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let c=new sp(a),l=n(a.primaryKey,a.value,c);if(l instanceof w){let u=l.catch(d=>(c.done(),w.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>w.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ai(t){return new w((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=Dm(i.target.error);n(r)}})}var Dw=!1;function Dm(t){let e=Rl.S(Xe());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new N("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dw||(Dw=!0,setTimeout(()=>{throw i},0)),i}}return t}var rI=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function su(t){return t==null}function Wo(t){return t===0&&1/t==-1/0}function Lx(t){return typeof t=="number"&&Number.isInteger(t)&&!Wo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ux=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fj=[...Ux,"documentOverlays"],jx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bx=jx,pj=[...Bx,"indexConfiguration","indexState","indexEntries"];function Pw(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sI(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Te=class t{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pr(this.root,e,this.comparator,!0)}},Pr=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jt=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();let e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}};Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class t{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dl(this.data.getIterator())}getIteratorFrom(e){return new Dl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Dl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zt=class t{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new t([])}unionWith(e){let n=new tt(yt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nr(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Pl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Pl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var $x=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(t){if(le(!!t),typeof t=="string"){let e=0,n=$x.exec(t);if(le(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ie(t.seconds),nanos:Ie(t.nanos)}}function Ie(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yn(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}function Pm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xm(t){let e=t.mapValue.fields.__previous_value__;return Pm(e)?xm(e):e}function Ko(t){let e=Kn(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var ap=class{constructor(e,n,i,r,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},xl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pm(t)?4:oI(t)?9007199254740991:10:V()}function rn(t,e){if(t===e)return!0;let n=Ni(t);if(n!==Ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ko(t).isEqual(Ko(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Kn(r.timestampValue),a=Kn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Yn(r.bytesValue).isEqual(Yn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ie(r.geoPointValue.latitude)===Ie(s.geoPointValue.latitude)&&Ie(r.geoPointValue.longitude)===Ie(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ie(r.integerValue)===Ie(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ie(r.doubleValue),a=Ie(s.doubleValue);return o===a?Wo(o)===Wo(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Nr(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Pw(o)!==Pw(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!rn(o[c],a[c])))return!1;return!0}(t,e);default:return V()}}function Yo(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function Mr(t,e){if(t===e)return 0;let n=Ni(t),i=Ni(e);if(n!==i)return J(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ie(s.integerValue||s.doubleValue),c=Ie(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return xw(t.timestampValue,e.timestampValue);case 4:return xw(Ko(t),Ko(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Yn(s),c=Yn(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=J(a[l],c[l]);if(u!==0)return u}return J(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=J(Ie(s.latitude),Ie(o.latitude));return a!==0?a:J(Ie(s.longitude),Ie(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Mr(a[l],c[l]);if(u)return u}return J(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===wl.mapValue&&o===wl.mapValue)return 0;if(s===wl.mapValue)return 1;if(o===wl.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=J(c[d],u[d]);if(h!==0)return h;let f=Mr(a[c[d]],l[u[d]]);if(f!==0)return f}return J(c.length,u.length)}(t.mapValue,e.mapValue);default:throw V()}}function xw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);let n=Kn(t),i=Kn(e),r=J(n.seconds,i.seconds);return r!==0?r:J(n.nanos,i.nanos)}function Fr(t){return cp(t)}function cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Kn(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return F.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=cp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${cp(n.fields[o])}`;return r+"}"}(t.mapValue):V()}function lp(t){return!!t&&"integerValue"in t}function Om(t){return!!t&&"arrayValue"in t}function Ow(t){return!!t&&"nullValue"in t}function kw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bl(t){return!!t&&"mapValue"in t}function zo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=zo(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Nt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zo(n)}setAll(e){let n=yt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=zo(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];bl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Wr(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(zo(this.value))}};function aI(t){let e=[];return Wr(t.fields,(n,i)=>{let r=new yt([n]);if(bl(i)){let s=aI(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Zt(e)}var Ft=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,B.min(),B.min(),B.min(),Nt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,B.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,B.min(),B.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,B.min(),B.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vr=class{constructor(e,n){this.position=e,this.inclusive=n}};function Nw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=F.comparator(F.fromName(o.referenceValue),n.key):i=Mr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Mw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}var Lr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function zx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ol=class{},ke=class t extends Ol{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new dp(e,n,i):n==="array-contains"?new pp(e,i):n==="in"?new mp(e,i):n==="not-in"?new gp(e,i):n==="array-contains-any"?new _p(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new hp(e,i):new fp(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mr(n,this.value)):n!==null&&Ni(this.value)===Ni(n)&&this.matchesComparison(Mr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sn=class t extends Ol{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return cI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function cI(t){return t.op==="and"}function lI(t){return qx(t)&&cI(t)}function qx(t){for(let e of t.filters)if(e instanceof sn)return!1;return!0}function up(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+Fr(t.value);if(lI(t))return t.filters.map(e=>up(e)).join(",");{let e=t.filters.map(n=>up(n)).join(",");return`${t.op}(${e})`}}function uI(t,e){return t instanceof ke?function(i,r){return r instanceof ke&&i.op===r.op&&i.field.isEqual(r.field)&&rn(i.value,r.value)}(t,e):t instanceof sn?function(i,r){return r instanceof sn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&uI(o,r.filters[a]),!0):!1}(t,e):void V()}function dI(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Fr(n.value)}`}(t):t instanceof sn?function(n){return n.op.toString()+" {"+n.getFilters().map(dI).join(" ,")+"}"}(t):"Filter"}var dp=class extends ke{constructor(e,n,i){super(e,n,i),this.key=F.fromName(i.referenceValue)}matches(e){let n=F.comparator(e.key,this.key);return this.matchesComparison(n)}},hp=class extends ke{constructor(e,n){super(e,"in",n),this.keys=hI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},fp=class extends ke{constructor(e,n){super(e,"not-in",n),this.keys=hI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function hI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>F.fromName(i.referenceValue))}var pp=class extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Om(n)&&Yo(n.arrayValue,this.value)}},mp=class extends ke{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Yo(this.value.arrayValue,n)}},gp=class extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Yo(this.value.arrayValue,n)}},_p=class extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Om(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Yo(this.value.arrayValue,i))}};var yp=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Fw(t,e=null,n=[],i=[],r=null,s=null,o=null){return new yp(t,e,n,i,r,s,o)}function km(t){let e=U(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>up(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fr(i)).join(",")),e.ce=n}return e.ce}function Nm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mw(t.startAt,e.startAt)&&Mw(t.endAt,e.endAt)}function vp(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ur=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Gx(t,e,n,i,r,s,o,a){return new Ur(t,e,n,i,r,s,o,a)}function ou(t){return new Ur(t)}function Vw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hx(t){return t.collectionGroup!==null}function qo(t){let e=U(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tt(yt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Lr(s,i))}),n.has(yt.keyField().canonicalString())||e.le.push(new Lr(yt.keyField(),i))}return e.le}function en(t){let e=U(t);return e.he||(e.he=Wx(e,qo(t))),e.he}function Wx(t,e){if(t.limitType==="F")return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Lr(r.field,s)});let n=t.endAt?new Vr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Vr(t.startAt.position,t.startAt.inclusive):null;return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ep(t,e,n){return new Ur(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function au(t,e){return Nm(en(t),en(e))&&t.limitType===e.limitType}function fI(t){return`${km(en(t))}|lt:${t.limitType}`}function Ar(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>dI(r)).join(", ")}]`),su(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Fr(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Fr(r)).join(",")),`Target(${i})`}(en(t))}; limitType=${t.limitType})`}function cu(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):F.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of qo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=Nw(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,qo(i),r)||i.endAt&&!function(o,a,c){let l=Nw(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,qo(i),r))}(t,e)}function Kx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pI(t){return(e,n)=>{let i=!1;for(let r of qo(t)){let s=Yx(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Yx(t,e,n){let i=t.field.isKeyField()?F.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Mr(c,l):V()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return V()}}var Qn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return sI(this.inner)}size(){return this.innerSize}};var Qx=new Te(F.comparator);function In(){return Qx}var mI=new Te(F.comparator);function $o(...t){let e=mI;for(let n of t)e=e.insert(n.key,n);return e}function gI(t){let e=mI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ri(){return Go()}function _I(){return Go()}function Go(){return new Qn(t=>t.toString(),(t,e)=>t.isEqual(e))}var Xx=new Te(F.comparator),Zx=new tt(F.comparator);function Q(...t){let e=Zx;for(let n of t)e=e.add(n);return e}var Jx=new tt(J);function eO(){return Jx}function yI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wo(e)?"-0":e}}function vI(t){return{integerValue:""+t}}function tO(t,e){return Lx(e)?vI(e):yI(t,e)}var jr=class{constructor(){this._=void 0}};function nO(t,e,n){return t instanceof Br?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Pm(s)&&(s=xm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Mi?wI(t,e):t instanceof Fi?II(t,e):function(r,s){let o=EI(r,s),a=Lw(o)+Lw(r.Ie);return lp(o)&&lp(r.Ie)?vI(a):yI(r.serializer,a)}(t,e)}function iO(t,e,n){return t instanceof Mi?wI(t,e):t instanceof Fi?II(t,e):n}function EI(t,e){return t instanceof $r?function(i){return lp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Br=class extends jr{},Mi=class extends jr{constructor(e){super(),this.elements=e}};function wI(t,e){let n=bI(e);for(let i of t.elements)n.some(r=>rn(r,i))||n.push(i);return{arrayValue:{values:n}}}var Fi=class extends jr{constructor(e){super(),this.elements=e}};function II(t,e){let n=bI(e);for(let i of t.elements)n=n.filter(r=>!rn(r,i));return{arrayValue:{values:n}}}var $r=class extends jr{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function Lw(t){return Ie(t.integerValue||t.doubleValue)}function bI(t){return Om(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rO(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Mi&&r instanceof Mi||i instanceof Fi&&r instanceof Fi?Nr(i.elements,r.elements,rn):i instanceof $r&&r instanceof $r?rn(i.Ie,r.Ie):i instanceof Br&&r instanceof Br}(t.transform,e.transform)}var wp=class{constructor(e,n){this.version=e,this.transformResults=n}},Hn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var zr=class{};function TI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kl(t.key,Hn.none()):new Vi(t.key,t.data,Hn.none());{let n=t.data,i=Nt.empty(),r=new tt(yt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new bn(t.key,i,new Zt(r.toArray()),Hn.none())}}function sO(t,e,n){t instanceof Vi?function(r,s,o){let a=r.value.clone(),c=jw(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bn?function(r,s,o){if(!Tl(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=jw(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(CI(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ho(t,e,n,i){return t instanceof Vi?function(s,o,a,c){if(!Tl(s.precondition,o))return a;let l=s.value.clone(),u=Bw(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof bn?function(s,o,a,c){if(!Tl(s.precondition,o))return a;let l=Bw(s.fieldTransforms,c,o),u=o.data;return u.setAll(CI(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Tl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function oO(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=EI(i.transform,r||null);s!=null&&(n===null&&(n=Nt.empty()),n.set(i.field,s))}return n||null}function Uw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Nr(i,r,(s,o)=>rO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Vi=class extends zr{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},bn=class extends zr{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function CI(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function jw(t,e,n){let i=new Map;le(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,iO(o,a,n[r]))}return i}function Bw(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,nO(s,o,e))}return i}var kl=class extends zr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ip=class extends zr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bp=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&sO(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ho(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Ho(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=_I();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let c=TI(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(B.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Q())}isEqual(e){return this.batchId===e.batchId&&Nr(this.mutations,e.mutations,(n,i)=>Uw(n,i))&&Nr(this.baseMutations,e.baseMutations,(n,i)=>Uw(n,i))}},Tp=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){le(e.mutations.length===i.length);let r=function(){return Xx}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var Cp=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Sp=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Pe,Z;function aO(t){switch(t){default:return V();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function SI(t){if(t===void 0)return nn("GRPC error has no .code"),v.UNKNOWN;switch(t){case Pe.OK:return v.OK;case Pe.CANCELLED:return v.CANCELLED;case Pe.UNKNOWN:return v.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return v.INTERNAL;case Pe.UNAVAILABLE:return v.UNAVAILABLE;case Pe.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Pe.NOT_FOUND:return v.NOT_FOUND;case Pe.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Pe.ABORTED:return v.ABORTED;case Pe.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Pe.DATA_LOSS:return v.DATA_LOSS;default:return V()}}(Z=Pe||(Pe={}))[Z.OK=0]="OK",Z[Z.CANCELLED=1]="CANCELLED",Z[Z.UNKNOWN=2]="UNKNOWN",Z[Z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Z[Z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Z[Z.NOT_FOUND=5]="NOT_FOUND",Z[Z.ALREADY_EXISTS=6]="ALREADY_EXISTS",Z[Z.PERMISSION_DENIED=7]="PERMISSION_DENIED",Z[Z.UNAUTHENTICATED=16]="UNAUTHENTICATED",Z[Z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Z[Z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Z[Z.ABORTED=10]="ABORTED",Z[Z.OUT_OF_RANGE=11]="OUT_OF_RANGE",Z[Z.UNIMPLEMENTED=12]="UNIMPLEMENTED",Z[Z.INTERNAL=13]="INTERNAL",Z[Z.UNAVAILABLE=14]="UNAVAILABLE",Z[Z.DATA_LOSS=15]="DATA_LOSS";var $w=null;function cO(){return new TextEncoder}var lO=new Si([4294967295,4294967295],0);function zw(t){let e=cO().encode(t),n=new Aw;return n.update(e),new Uint8Array(n.digest())}function qw(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Si([n,i],0),new Si([r,s],0)]}var Ap=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Di(`Invalid padding: ${n}`);if(i<0)throw new Di(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Di(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Di(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Si.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Si.fromNumber(i)));return r.compare(lO)===1&&(r=new Si([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=zw(e),[i,r]=qw(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=zw(e),[i,r]=qw(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Di=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nl=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Qo.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(B.min(),r,new Te(J),In(),Q())}},Qo=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Q(),Q(),Q())}};var xr=class{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}},Ml=class{constructor(e,n){this.targetId=e,this.fe=n}},Fl=class{constructor(e,n,i=rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Vl=class{constructor(){this.ge=0,this.pe=Hw(),this.ye=rt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Q(),n=Q(),i=Q();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:V()}}),new Qo(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=Hw()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,le(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},Rp=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=In(),this.Qe=Gw(),this.Ke=new Te(J)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){let n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){let s=r.target;if(vp(s))if(i===0){let o=new F(s.path);this.We(n,o,Ft.newNoDocument(o,B.min()))}else le(i===1);else{let o=this.Ze(n);if(o!==i){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}$w?.tt(function(u,d,h,f,P){var k,x,G,ae,Ce,Ge;let Lt={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},Ne=d.unchangedNames;return Ne&&(Lt.bloomFilter={applied:P===0,hashCount:(k=Ne?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(ae=(G=(x=Ne?.bits)===null||x===void 0?void 0:x.bitmap)===null||G===void 0?void 0:G.length)!==null&&ae!==void 0?ae:0,padding:(Ge=(Ce=Ne?.bits)===null||Ce===void 0?void 0:Ce.padding)!==null&&Ge!==void 0?Ge:0,mightContain:on=>{var Bi;return(Bi=f?.mightContain(on))!==null&&Bi!==void 0&&Bi}}),Lt}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,a;try{o=Yn(i).toUint8Array()}catch(c){if(c instanceof Pl)return kr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ap(o,r,s)}catch(c){return kr(c instanceof Di?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){let i=this.Be.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),r++)}),r}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&vp(a.target)){let c=new F(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Ft.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let i=Q();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let r=new Nl(e,n,this.Ke,this.qe,i);return this.qe=In(),this.Qe=Gw(),this.Ke=new Te(J),r}Ue(e,n){if(!this.je(e))return;let i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Vl,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new tt(J),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||A("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Vl),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function Gw(){return new Te(F.comparator)}function Hw(){return new Te(F.comparator)}var uO={asc:"ASCENDING",desc:"DESCENDING"},dO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hO={and:"AND",or:"OR"},Dp=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Pp(t,e){return t.useProto3Json||su(e)?e:{value:e}}function Ll(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fO(t,e){return Ll(t,e.toTimestamp())}function tn(t){return le(!!t),B.fromTimestamp(function(n){let i=Kn(n);return new qe(i.seconds,i.nanos)}(t))}function Mm(t,e){return xp(t,e).canonicalString()}function xp(t,e){let n=function(r){return new be(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RI(t){let e=be.fromString(t);return le(kI(e)),e}function Op(t,e){return Mm(t.databaseId,e.path)}function Gf(t,e){let n=RI(e);if(n.get(1)!==t.databaseId.projectId)throw new N(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new N(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(PI(n))}function DI(t,e){return Mm(t.databaseId,e)}function pO(t){let e=RI(t);return e.length===4?be.emptyPath():PI(e)}function kp(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PI(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ww(t,e,n){return{name:Op(t,e),fields:n.value.mapValue.fields}}function mO(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(le(u===void 0||typeof u=="string"),rt.fromBase64String(u||"")):(le(u===void 0||u instanceof Uint8Array),rt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?v.UNKNOWN:SI(l.code);return new N(u,l.message||"")}(o);n=new Fl(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Gf(t,i.document.name),s=tn(i.document.updateTime),o=i.document.createTime?tn(i.document.createTime):B.min(),a=new Nt({mapValue:{fields:i.document.fields}}),c=Ft.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new xr(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Gf(t,i.document),s=i.readTime?tn(i.readTime):B.min(),o=Ft.newNoDocument(r,s),a=i.removedTargetIds||[];n=new xr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Gf(t,i.document),s=i.removedTargetIds||[];n=new xr([],s,r,null)}else{if(!("filter"in e))return V();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Sp(r,s),a=i.targetId;n=new Ml(a,o)}}return n}function gO(t,e){let n;if(e instanceof Vi)n={update:Ww(t,e.key,e.value)};else if(e instanceof kl)n={delete:Op(t,e.key)};else if(e instanceof bn)n={update:Ww(t,e.key,e.data),updateMask:CO(e.fieldMask)};else{if(!(e instanceof Ip))return V();n={verify:Op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof Br)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $r)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw V()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:fO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:V()}(t,e.precondition)),n}function _O(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?tn(r.updateTime):tn(s);return o.isEqual(B.min())&&(o=tn(s)),new wp(o,r.transformResults||[])}(n,e))):[]}function yO(t,e){return{documents:[DI(t,e.path)]}}function vO(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=DI(t,r);let s=function(l){if(l.length!==0)return OI(sn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Rr(h.field),direction:IO(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Pp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:r}}function EO(t){let e=pO(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){le(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=xI(d);return h instanceof sn&&lI(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(P){return new Lr(Dr(P.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,su(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Vr(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Vr(f,h)}(n.endAt)),Gx(e,r,o,s,a,"F",c,l)}function wO(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Dr(n.unaryFilter.field);return ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Dr(n.unaryFilter.field);return ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Dr(n.unaryFilter.field);return ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Dr(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):t.fieldFilter!==void 0?function(n){return ke.create(Dr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sn.create(n.compositeFilter.filters.map(i=>xI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return V()}}(n.compositeFilter.op))}(t):V()}function IO(t){return uO[t]}function bO(t){return dO[t]}function TO(t){return hO[t]}function Rr(t){return{fieldPath:t.canonicalString()}}function Dr(t){return yt.fromServerFormat(t.fieldPath)}function OI(t){return t instanceof ke?function(n){if(n.op==="=="){if(kw(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(Ow(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kw(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(Ow(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:bO(n.op),value:n.value}}}(t):t instanceof sn?function(n){let i=n.getFilters().map(r=>OI(r));return i.length===1?i[0]:{compositeFilter:{op:TO(n.op),filters:i}}}(t):V()}function CO(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Xo=class t{constructor(e,n,i,r,s=B.min(),o=B.min(),a=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Np=class{constructor(e){this.ct=e}};function SO(t){let e=EO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ep(e,e.limit,"L"):e}var Ul=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ie(e.integerValue));else if("doubleValue"in e){let i=Ie(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Wo(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"?n.At(i):(n.At(`${i.seconds||""}`),n.dt(i.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Yn(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?oI(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):V()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),F.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ul.bt=new Ul;var Mp=class{constructor(){this._n=new Fp}addToCollectionParentIndex(e,n){return this._n.add(n),w.resolve()}getCollectionParents(e,n){return w.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return w.resolve()}deleteFieldIndex(e,n){return w.resolve()}deleteAllFieldIndexes(e){return w.resolve()}createTargetIndexes(e,n){return w.resolve()}getDocumentsMatchingTarget(e,n){return w.resolve(null)}getIndexType(e,n){return w.resolve(0)}getFieldIndexes(e,n){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,n){return w.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,n){return w.resolve(ki.min())}updateCollectionGroup(e,n,i){return w.resolve()}updateIndexEntries(e,n){return w.resolve()}},Fp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new tt(be.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tt(be.comparator)).toArray()}};var gj=new Uint8Array(0);var Xt=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(41943040,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);var Zo=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Vp=class{constructor(){this.changes=new Qn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?w.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Lp=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Up=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ho(i.mutation,r,Zt.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Q()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Q()){let r=Ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=$o();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Q()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=In(),o=Go(),a=function(){return Go()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof bn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Ho(u.mutation,l,u.mutation.getFieldMask(),qe.now())):o.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new Lp(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Go(),r=new Te((o,a)=>o-a),s=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||Zt.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||Q()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=_I();u.forEach(h=>{if(!s.has(h)){let f=TI(n.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return w.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return F.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Hx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):w.resolve(Ri()),a=-1,c=s;return o.next(l=>w.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?w.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Q())).next(u=>({batchId:a,changes:gI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(i=>{let r=$o();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=$o();return this.indexManager.getCollectionParents(e,s).next(a=>w.forEach(a,c=>{let l=function(d,h){return new Ur(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Ft.newInvalidDocument(u)))});let a=$o();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Ho(u.mutation,l,Zt.empty(),qe.now()),cu(n,l)&&(a=a.insert(c,l))}),a})}};var jp=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return w.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:tn(r.createTime)}}(n)),w.resolve()}getNamedQuery(e,n){return w.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:SO(r.bundledQuery),readTime:tn(r.readTime)}}(n)),w.resolve()}};var Bp=class{constructor(){this.overlays=new Te(F.comparator),this.hr=new Map}getOverlay(e,n){return w.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Ri();return w.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),w.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),w.resolve()}getOverlaysForCollection(e,n,i){let r=Ri(),s=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return w.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Te((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Ri(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ri(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return w.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Cp(n,i));let s=this.hr.get(n);s===void 0&&(s=Q(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var Jo=class{constructor(){this.Pr=new tt(xe.Ir),this.Tr=new tt(xe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new xe(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new xe(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new F(new be([])),i=new xe(n,e),r=new xe(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new F(new be([])),i=new xe(n,e),r=new xe(n,e+1),s=Q();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new xe(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},xe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return F.comparator(e.key,n.key)||J(e.pr,n.pr)}static Er(e,n){return J(e.pr,n.pr)||F.comparator(e.key,n.key)}};var $p=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new tt(xe.Ir)}checkEmpty(e){return w.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new bp(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.wr=this.wr.add(new xe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,n){return w.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new xe(n,0),r=new xe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let a=this.Sr(o.pr);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new tt(J);return n.forEach(r=>{let s=new xe(r,0),o=new xe(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),w.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;F.isDocumentKey(s)||(s=s.child(""));let o=new xe(new F(s),0),a=new tt(J);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},o),w.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){le(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return w.forEach(n.mutations,r=>{let s=new xe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new xe(n,0),r=this.wr.firstAfterOrEqual(i);return w.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,w.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var zp=class{constructor(e){this.vr=e,this.docs=function(){return new Te(F.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return w.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let i=In();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ft.newInvalidDocument(r))}),w.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=In(),o=n.path,a=new F(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Fx(Mx(u),i)<=0||(r.has(u.key)||cu(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return w.resolve(s)}getAllFromCollectionGroup(e,n,i,r){V()}Fr(e,n){return w.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new qp(this)}getSize(e){return w.resolve(this.size)}},qp=class extends Vp{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),w.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Gp=class{constructor(e){this.persistence=e,this.Mr=new Qn(n=>km(n),Nm),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Jo,this.targetCount=0,this.Lr=Zo.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),w.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,w.resolve()}updateTargetData(e,n){return this.qn(n),w.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),w.waitFor(s).next(()=>r)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return w.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),w.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),w.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return w.resolve(i)}containsKey(e,n){return w.resolve(this.Nr.containsKey(n))}};var Hp=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new rI(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Gp(this),this.indexManager=new Mp,this.remoteDocumentCache=function(r){return new zp(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Np(n),this.$r=new jp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new $p(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){A("MemoryPersistence","Starting transaction:",e);let r=new Wp(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return w.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},Wp=class extends ip{constructor(e){super(),this.currentSequenceNumber=e}},Kp=class t{constructor(e){this.persistence=e,this.zr=new Jo,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw V()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),w.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),w.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),w.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Jr,i=>{let r=F.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,B.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return w.or([()=>w.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Yp=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Q(),r=Q();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var Qp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Xp=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ev()?8:Rl.v(Xe())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Qp;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Bo()<=K.DEBUG&&A("QueryEngine","SDK will not create cache indexes for query:",Ar(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),w.resolve()):(Bo()<=K.DEBUG&&A("QueryEngine","Query:",Ar(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Bo()<=K.DEBUG&&A("QueryEngine","The SDK decides to create cache indexes for query:",Ar(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(n))):w.resolve())}ji(e,n){if(Vw(n))return w.resolve(null);let i=en(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ep(n,null,"F"),i=en(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=Q(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Ep(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,i,r){return Vw(n)||r.isEqual(B.min())?w.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?w.resolve(null):(Bo()<=K.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ar(n)),this.es(e,o,n,Nx(r,-1)).next(a=>a))})}Zi(e,n){let i=new tt(pI(e));return n.forEach((r,s)=>{cu(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Bo()<=K.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",Ar(n)),this.zi.getDocumentsMatchingQuery(e,n,ki.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Zp=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Te(J),this.rs=new Qn(s=>km(s),Nm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Up(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function AO(t,e,n,i){return new Zp(t,e,n,i)}function NI(t,e){return p(this,null,function*(){let n=U(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=Q();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function RO(t,e){let n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=w.resolve();return h.forEach(P=>{f=f.next(()=>u.getEntry(c,P)).next(k=>{let x=l.docVersions.get(P);le(x!==null),k.version.compareTo(x)<0&&(d.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),u.addEntry(k)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=Q();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function MI(t){let e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function DO(t,e){let n=U(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(rt.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(k,x,G){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=In(),l=Q();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(PO(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!i.isEqual(B.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=r,s))}function PO(t,e,n){let i=Q(),r=Q();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=In();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(B.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):A("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:r}})}function xO(t,e){let n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function OO(t,e){let n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,w.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new Xo(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Jp(t,e,n){return p(this,null,function*(){let i=U(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!ra(o))throw o;A("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function Kw(t,e,n){let i=U(t),r=B.min(),s=Q();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=U(c),h=d.rs.get(u);return h!==void 0?w.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(i,o,en(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:B.min(),n?s:Q())).next(a=>(kO(i,Kx(e),a),{documents:a,hs:s})))}function kO(t,e,n){let i=t.ss.get(e)||B.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}var jl=class{constructor(){this.activeTargetIds=eO()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var em=class{constructor(){this.no=new jl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new jl,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tm=class{io(e){}shutdown(){}};var Bl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Il=null;function Hf(){return Il===null?Il=function(){return 268435456+Math.round(2147483648*Math.random())}():Il++,"0x"+Il.toString(16)}var NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nm=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var et="WebChannelConnection",im=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+n.host,this.po=`projects/${r}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get wo(){return!1}So(n,i,r,s,o){let a=Hf(),c=this.bo(n,i.toUriEncodedString());A("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,r).then(u=>(A("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw kr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}vo(n,i,r,s,o,a){return this.So(n,i,r,s,o)}Do(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}bo(n,i){let r=NO[n];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,i,r){let s=Hf();return new Promise((o,a)=>{let c=new Sw;c.setWithCredentials(!0),c.listenOnce(Tw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case El.NO_ERROR:let u=c.getResponseJson();A(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case El.TIMEOUT:A(et,`RPC '${e}' ${s} timed out`),a(new N(v.DEADLINE_EXCEEDED,"Request time out"));break;case El.HTTP_ERROR:let d=c.getStatus();if(A(et,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let P=function(x){let G=x.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(G)>=0?G:v.UNKNOWN}(f.status);a(new N(P,f.message))}else a(new N(v.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new N(v.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{A(et,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);A(et,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",l,i,15)})}Fo(e,n,i){let r=Hf(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Iw(),a=bw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=s.join("");A(et,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,P=new nm({lo:x=>{f?A(et,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(h||(A(et,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),A(et,`RPC '${e}' stream ${r} sending:`,x),d.send(x))},ho:()=>d.close()}),k=(x,G,ae)=>{x.listen(G,Ce=>{try{ae(Ce)}catch(Ge){setTimeout(()=>{throw Ge},0)}})};return k(d,jo.EventType.OPEN,()=>{f||A(et,`RPC '${e}' stream ${r} transport opened.`)}),k(d,jo.EventType.CLOSE,()=>{f||(f=!0,A(et,`RPC '${e}' stream ${r} transport closed`),P.Vo())}),k(d,jo.EventType.ERROR,x=>{f||(f=!0,kr(et,`RPC '${e}' stream ${r} transport errored:`,x),P.Vo(new N(v.UNAVAILABLE,"The operation could not be completed")))}),k(d,jo.EventType.MESSAGE,x=>{var G;if(!f){let ae=x.data[0];le(!!ae);let Ce=ae,Ge=Ce.error||((G=Ce[0])===null||G===void 0?void 0:G.error);if(Ge){A(et,`RPC '${e}' stream ${r} received error:`,Ge);let Lt=Ge.status,Ne=function(is){let ha=Pe[is];if(ha!==void 0)return SI(ha)}(Lt),on=Ge.message;Ne===void 0&&(Ne=v.INTERNAL,on="Unknown error status: "+Lt+" with message "+Ge.message),f=!0,P.Vo(new N(Ne,on)),d.close()}else A(et,`RPC '${e}' stream ${r} received:`,ae),P.mo(ae)}}),k(a,Cw.STAT_EVENT,x=>{x.stat===qf.PROXY?A(et,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===qf.NOPROXY&&A(et,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.Ro()},0),P}};function Wf(){return typeof document<"u"?document:null}function lu(t){return new Dp(t,!0)}var $l=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&A("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var zl=class{constructor(e,n,i,r,s,o,a,c){this.oi=e,this.$o=i,this.Uo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new $l(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===n&&this.o_(i,r)},i=>{e(()=>{let r=new N(v.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(e,n){let i=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return A("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rm=class extends zl{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=mO(this.serializer,e),i=function(s){if(!("targetChange"in s))return B.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?B.min():o.readTime?tn(o.readTime):B.min()}(e);return this.listener.u_(n,i)}c_(e){let n={};n.database=kp(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=vp(c)?{documents:yO(s,c)}:{query:vO(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AI(s,o.resumeToken);let l=Pp(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(B.min())>0){a.readTime=Ll(s,o.snapshotVersion.toTimestamp());let l=Pp(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=wO(this.serializer,e);i&&(n.labels=i),this.t_(n)}l_(e){let n={};n.database=kp(this.serializer),n.removeTarget=e,this.t_(n)}},sm=class extends zl{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=_O(e.writeResults,e.commitTime),i=tn(e.commitTime);return this.listener.T_(i,n)}return le(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=kp(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>gO(this.serializer,i))};this.t_(n)}};var om=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new N(v.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,xp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new N(v.UNKNOWN,s.toString())})}vo(e,n,i,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,xp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new N(v.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var am=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(nn(n),this.g_=!1):A("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var cm=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{i.enqueueAndForget(()=>p(this,null,function*(){Li(this)&&(A("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=U(c);l.v_.add(4),yield sa(l),l.x_.set("Unknown"),l.v_.delete(4),yield uu(l)})}(this))}))}),this.x_=new am(i,r)}};function uu(t){return p(this,null,function*(){if(Li(t))for(let e of t.F_)yield e(!0)})}function sa(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function FI(t,e){let n=U(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Um(n)?Lm(n):Kr(n).Jo()&&Vm(n,e))}function Fm(t,e){let n=U(t),i=Kr(n);n.C_.delete(e),i.Jo()&&VI(n,e),n.C_.size===0&&(i.Jo()?i.Xo():Li(n)&&n.x_.set("Unknown"))}function Vm(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(B.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kr(t).c_(e)}function VI(t,e){t.O_.Oe(e),Kr(t).l_(e)}function Lm(t){t.O_=new Rp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Kr(t).start(),t.x_.p_()}function Um(t){return Li(t)&&!Kr(t).Ho()&&t.C_.size>0}function Li(t){return U(t).v_.size===0}function LI(t){t.O_=void 0}function MO(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{Vm(t,e)})})}function FO(t,e){return p(this,null,function*(){LI(t),Um(t)?(t.x_.S_(e),Lm(t)):t.x_.set("Unknown")})}function VO(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof Fl&&e.state===2&&e.cause)try{yield function(r,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))})}(t,e)}catch(i){A("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield ql(t,i)}else if(e instanceof xr?t.O_.$e(e):e instanceof Ml?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(B.min()))try{let i=yield MI(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(rt.EMPTY_BYTE_STRING,u.snapshotVersion)),VI(s,c);let d=new Xo(u.target,c,l,u.sequenceNumber);Vm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){A("RemoteStore","Failed to raise snapshot:",i),yield ql(t,i)}})}function ql(t,e,n){return p(this,null,function*(){if(!ra(e))throw e;t.v_.add(1),yield sa(t),t.x_.set("Offline"),n||(n=()=>MI(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){A("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield uu(t)}))})}function UI(t,e){return e().catch(n=>ql(t,n,e))}function du(t){return p(this,null,function*(){let e=U(t),n=Xn(e),i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;LO(e);)try{let r=yield xO(e.localStore,i);if(r===null){e.D_.length===0&&n.Xo();break}i=r.batchId,UO(e,r)}catch(r){yield ql(e,r)}jI(e)&&BI(e)})}function LO(t){return Li(t)&&t.D_.length<10}function UO(t,e){t.D_.push(e);let n=Xn(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function jI(t){return Li(t)&&!Xn(t).Ho()&&t.D_.length>0}function BI(t){Xn(t).start()}function jO(t){return p(this,null,function*(){Xn(t).d_()})}function BO(t){return p(this,null,function*(){let e=Xn(t);for(let n of t.D_)e.I_(n.mutations)})}function $O(t,e,n){return p(this,null,function*(){let i=t.D_.shift(),r=Tp.from(i,e,n);yield UI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield du(t)})}function zO(t,e){return p(this,null,function*(){e&&Xn(t).P_&&(yield function(i,r){return p(this,null,function*(){if(function(o){return aO(o)&&o!==v.ABORTED}(r.code)){let s=i.D_.shift();Xn(i).Zo(),yield UI(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield du(i)}})}(t,e)),jI(t)&&BI(t)})}function Yw(t,e){return p(this,null,function*(){let n=U(t);n.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");let i=Li(n);n.v_.add(3),yield sa(n),i&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield uu(n)})}function qO(t,e){return p(this,null,function*(){let n=U(t);e?(n.v_.delete(2),yield uu(n)):e||(n.v_.add(2),yield sa(n),n.x_.set("Unknown"))})}function Kr(t){return t.N_||(t.N_=function(n,i,r){let s=U(n);return s.R_(),new rm(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:MO.bind(null,t),To:FO.bind(null,t),u_:VO.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),Um(t)?Lm(t):t.x_.set("Unknown")):(yield t.N_.stop(),LI(t))}))),t.N_}function Xn(t){return t.L_||(t.L_=function(n,i,r){let s=U(n);return s.R_(),new sm(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:jO.bind(null,t),To:zO.bind(null,t),E_:BO.bind(null,t),T_:$O.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.L_.Zo(),yield du(t)):(yield t.L_.stop(),t.D_.length>0&&(A("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var lm=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new N(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jm(t,e){if(nn("AsyncQueue",`${e}: ${t}`),ra(t))return new N(v.UNAVAILABLE,`${e}: ${t}`);throw t}var Gl=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||F.comparator(n.key,i.key):(n,i)=>F.comparator(n.key,i.key),this.keyedMap=$o(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Hl=class{constructor(){this.B_=new Te(F.comparator)}track(e){let n=e.doc.key,i=this.B_.get(n);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(n,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(n):e.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):V():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,i)=>{e.push(i)}),e}},qr=class t{constructor(e,n,i,r,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Gl.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var um=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},dm=class{constructor(){this.queries=new Qn(e=>fI(e),au),this.onlineState="Unknown",this.W_=new Set}};function $I(t,e){return p(this,null,function*(){let n=U(t),i=3,r=e.query,s=n.queries.get(r);s?!s.K_()&&e.U_()&&(i=2):(s=new um,i=e.U_()?0:1);try{switch(i){case 0:s.q_=yield n.onListen(r,!0);break;case 1:s.q_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(o){let a=jm(o,`Initialization of query '${Ar(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&Bm(n)})}function zI(t,e){return p(this,null,function*(){let n=U(t),i=e.query,r=3,s=n.queries.get(i);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?r=e.U_()?0:1:!s.K_()&&e.U_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function GO(t,e){let n=U(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(r)&&(i=!0);o.q_=r}}i&&Bm(n)}function HO(t,e,n){let i=U(t),r=i.queries.get(e);if(r)for(let s of r.Q_)s.onError(n);i.queries.delete(e)}function Bm(t){t.W_.forEach(e=>{e.next()})}var hm,Qw;(Qw=hm||(hm={})).j_="default",Qw.Cache="cache";var Wl=class{constructor(e,n,i){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=i||{}}z_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new qr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let i=n!=="Offline";return(!this.options.ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=qr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==hm.Cache}};var Kl=class{constructor(e){this.key=e}},Yl=class{constructor(e){this.key=e}},fm=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Q(),this.mutatedKeys=Q(),this.ha=pI(e),this.Pa=new Gl(this.ha)}get Ia(){return this.ua}Ta(e,n){let i=n?n.Ea:new Hl,r=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=cu(this.query,d)?d:null,P=!!h&&this.mutatedKeys.has(h.key),k=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),x=!1;h&&f?h.data.isEqual(f.data)?P!==k&&(i.track({type:3,doc:f}),x=!0):this.da(h,f)||(i.track({type:2,doc:f}),x=!0,(c&&this.ha(f,c)>0||l&&this.ha(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),x=!0):h&&!f&&(i.track({type:1,doc:h}),x=!0,(c||l)&&(a=!0)),x&&(f?(o=o.add(f),s=k?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Pa:o,Ea:i,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((u,d)=>function(f,P){let k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return k(f)-k(P)}(u.type,d.type)||this.ha(u.doc,d.doc)),this.Aa(i),r=r!=null&&r;let a=n&&!r?this.Ra():[],c=this.la.size===0&&this.current&&!r?1:0,l=c!==this.ca;return this.ca=c,o.length!==0||l?{snapshot:new qr(this.query,e.Pa,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Hl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=Q(),this.Pa.forEach(i=>{this.ma(i.key)&&(this.la=this.la.add(i.key))});let n=[];return e.forEach(i=>{this.la.has(i)||n.push(new Yl(i))}),this.la.forEach(i=>{e.has(i)||n.push(new Kl(i))}),n}fa(e){this.ua=e.hs,this.la=Q();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return qr.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},pm=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},mm=class{constructor(e){this.key=e,this.pa=!1}},gm=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Qn(a=>fI(a),au),this.Sa=new Map,this.ba=new Set,this.Da=new Te(F.comparator),this.Ca=new Map,this.va=new Jo,this.Fa={},this.Ma=new Map,this.xa=Zo.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function WO(t,e,n=!0){return p(this,null,function*(){let i=YI(t),r,s=i.wa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ga()):r=yield qI(i,e,n,!0),r})}function KO(t,e){return p(this,null,function*(){let n=YI(t);yield qI(n,e,!0,!1)})}function qI(t,e,n,i){return p(this,null,function*(){let r=yield OO(t.localStore,en(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield YO(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&FI(t.remoteStore,r),a})}function YO(t,e,n,i,r){return p(this,null,function*(){t.Na=(d,h,f)=>function(k,x,G,ae){return p(this,null,function*(){let Ce=x.view.Ta(G);Ce.Xi&&(Ce=yield Kw(k.localStore,x.query,!1).then(({documents:on})=>x.view.Ta(on,Ce)));let Ge=ae&&ae.targetChanges.get(x.targetId),Lt=ae&&ae.targetMismatches.get(x.targetId)!=null,Ne=x.view.applyChanges(Ce,k.isPrimaryClient,Ge,Lt);return Zw(k,x.targetId,Ne.Va),Ne.snapshot})}(t,d,h,f);let s=yield Kw(t.localStore,e,!0),o=new fm(e,s.hs),a=o.Ta(s.documents),c=Qo.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=o.applyChanges(a,t.isPrimaryClient,c);Zw(t,n,l.Va);let u=new pm(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),l.snapshot})}function QO(t,e,n){return p(this,null,function*(){let i=U(t),r=i.wa.get(e),s=i.Sa.get(r.targetId);if(s.length>1)return i.Sa.set(r.targetId,s.filter(o=>!au(o,e))),void i.wa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Fm(i.remoteStore,r.targetId),_m(i,r.targetId)}).catch(ia))):(_m(i,r.targetId),yield Jp(i.localStore,r.targetId,!0))})}function XO(t,e){return p(this,null,function*(){let n=U(t),i=n.wa.get(e),r=n.Sa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Fm(n.remoteStore,i.targetId))})}function ZO(t,e,n){return p(this,null,function*(){let i=sk(t);try{let r=yield function(o,a){let c=U(o),l=qe.now(),u=a.reduce((f,P)=>f.add(P.key),Q()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let P=In(),k=Q();return c.os.getEntries(f,u).next(x=>{P=x,P.forEach((G,ae)=>{ae.isValidDocument()||(k=k.add(G))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,P)).next(x=>{d=x;let G=[];for(let ae of a){let Ce=oO(ae,d.get(ae.key).overlayedDocument);Ce!=null&&G.push(new bn(ae.key,Ce,aI(Ce.value.mapValue),Hn.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,G,a)}).next(x=>{h=x;let G=x.applyToLocalDocumentSet(d,k);return c.documentOverlayCache.saveOverlays(f,x.batchId,G)})}).then(()=>({batchId:h.batchId,changes:gI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Fa[o.currentUser.toKey()];l||(l=new Te(J)),l=l.insert(a,c),o.Fa[o.currentUser.toKey()]=l}(i,r.batchId,n),yield oa(i,r.changes),yield du(i.remoteStore)}catch(r){let s=jm(r,"Failed to persist write");n.reject(s)}})}function GI(t,e){return p(this,null,function*(){let n=U(t);try{let i=yield DO(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Ca.get(s);o&&(le(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.pa=!0:r.modifiedDocuments.size>0?le(o.pa):r.removedDocuments.size>0&&(le(o.pa),o.pa=!1))}),yield oa(n,i,e)}catch(i){yield ia(i)}})}function Xw(t,e,n){let i=U(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=U(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.G_(a)&&(l=!0)}),l&&Bm(c)}(i.eventManager,e),r.length&&i.ya.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function JO(t,e,n){return p(this,null,function*(){let i=U(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Ca.get(e),s=r&&r.key;if(s){let o=new Te(F.comparator);o=o.insert(s,Ft.newNoDocument(s,B.min()));let a=Q().add(s),c=new Nl(B.min(),new Map,new Te(J),o,a);yield GI(i,c),i.Da=i.Da.remove(s),i.Ca.delete(e),$m(i)}else yield Jp(i.localStore,e,!1).then(()=>_m(i,e,n)).catch(ia)})}function ek(t,e){return p(this,null,function*(){let n=U(t),i=e.batch.batchId;try{let r=yield RO(n.localStore,e);WI(n,i,null),HI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield oa(n,r)}catch(r){yield ia(r)}})}function tk(t,e,n){return p(this,null,function*(){let i=U(t);try{let r=yield function(o,a){let c=U(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(le(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);WI(i,e,n),HI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield oa(i,r)}catch(r){yield ia(r)}})}function HI(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function WI(t,e,n){let i=U(t),r=i.Fa[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Fa[i.currentUser.toKey()]=r}}function _m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Sa.get(e))t.wa.delete(i),n&&t.ya.La(i,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(i=>{t.va.containsKey(i)||KI(t,i)})}function KI(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(Fm(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),$m(t))}function Zw(t,e,n){for(let i of n)i instanceof Kl?(t.va.addReference(i.key,e),nk(t,i)):i instanceof Yl?(A("SyncEngine","Document no longer in limbo: "+i.key),t.va.removeReference(i.key,e),t.va.containsKey(i.key)||KI(t,i.key)):V()}function nk(t,e){let n=e.key,i=n.path.canonicalString();t.Da.get(n)||t.ba.has(i)||(A("SyncEngine","New document in limbo: "+n),t.ba.add(i),$m(t))}function $m(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new F(be.fromString(e)),i=t.xa.next();t.Ca.set(i,new mm(n)),t.Da=t.Da.insert(n,i),FI(t.remoteStore,new Xo(en(ou(n.path)),i,"TargetPurposeLimboResolution",rI._e))}}function oa(t,e,n){return p(this,null,function*(){let i=U(t),r=[],s=[],o=[];i.wa.isEmpty()||(i.wa.forEach((a,c)=>{o.push(i.Na(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=Yp.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.ya.u_(r),yield function(c,l){return p(this,null,function*(){let u=U(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(l,h=>w.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ra(d))throw d;A("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),P=f.snapshotVersion,k=f.withLastLimboFreeSnapshotVersion(P);u.ns=u.ns.insert(h,k)}}})}(i.localStore,s))})}function ik(t,e){return p(this,null,function*(){let n=U(t);if(!n.currentUser.isEqual(e)){A("SyncEngine","User change. New user:",e.toKey());let i=yield NI(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new N(v.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield oa(n,i.us)}})}function rk(t,e){let n=U(t),i=n.Ca.get(e);if(i&&i.pa)return Q().add(i.key);{let r=Q(),s=n.Sa.get(e);if(!s)return r;for(let o of s){let a=n.wa.get(o);r=r.unionWith(a.view.Ia)}return r}}function YI(t){let e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JO.bind(null,e),e.ya.u_=GO.bind(null,e.eventManager),e.ya.La=HO.bind(null,e.eventManager),e}function sk(t){let e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tk.bind(null,e),e}var Ql=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=lu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return AO(this.persistence,new Xp,e.initialUser,this.serializer)}createPersistence(e){return new Hp(Kp.Hr,this.serializer)}createSharedClientState(e){return new em}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ym=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ik.bind(null,this.syncEngine),yield qO(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new dm}()}createDatastore(e){let n=lu(e.databaseInfo.databaseId),i=function(s){return new im(s)}(e.databaseInfo);return function(s,o,a,c){return new om(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new cm(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Xw(this.syncEngine,n,0),function(){return Bl.D()?new Bl:new tm}())}createSyncEngine(e,n){return function(r,s,o,a,c,l,u){let d=new gm(r,s,o,a,c,l);return u&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(i){return p(this,null,function*(){let r=U(i);A("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield sa(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Xl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):nn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var vm=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=je.UNAUTHENTICATED,this.clientId=Sl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>p(this,null,function*(){A("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(A("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=jm(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Kf(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>p(this,null,function*(){i.isEqual(r)||(yield NI(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Jw(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield ak(t);A("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Yw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Yw(e.remoteStore,r)),t._onlineComponents=e})}function ok(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function ak(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){A("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!ok(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),yield Kf(t,new Ql)}}else A("FirestoreClient","Using default OfflineComponentProvider"),yield Kf(t,new Ql);return t._offlineComponents})}function QI(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(A("FirestoreClient","Using user provided OnlineComponentProvider"),yield Jw(t,t._uninitializedComponentsProvider._online)):(A("FirestoreClient","Using default OnlineComponentProvider"),yield Jw(t,new ym))),t._onlineComponents})}function ck(t){return QI(t).then(e=>e.syncEngine)}function Em(t){return p(this,null,function*(){let e=yield QI(t),n=e.eventManager;return n.onListen=WO.bind(null,e.syncEngine),n.onUnlisten=QO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XO.bind(null,e.syncEngine),n})}function lk(t,e,n={}){let i=new Mt;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,l){let u=new Xl({next:h=>{o.enqueueAndForget(()=>zI(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new N(v.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new N(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Wl(ou(a.path),u,{includeMetadataChanges:!0,ta:!0});return $I(s,d)}(yield Em(t),t.asyncQueue,e,n,i)})),i.promise}function XI(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var eI=new Map;function ZI(t,e,n){if(!n)throw new N(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uk(t,e,n,i){if(e===!0&&i===!0)throw new N(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tI(t){if(!F.isDocumentKey(t))throw new N(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nI(t){if(F.isDocumentKey(t))throw new N(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new N(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=zm(t);throw new N(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Zl=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new N(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new N(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new N(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new N(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new N(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gr=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new N(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new N(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zl(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Yf;switch(i.type){case"firstParty":return new Jf(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new N(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=eI.get(n);i&&(A("ComponentProvider","Removing Datastore"),eI.delete(n),i.terminate())}(this),Promise.resolve()}};function JI(t,e,n,i={}){var r;let s=(t=wn(t,Gr))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=je.MOCK_USER;else{a=mv(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new N(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new je(l)}t._authCredentials=new Qf(new Cl(a,c))}}var Jl=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ut=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Wn=class t extends Jl{constructor(e,n,i){super(e,n,ou(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new F(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function e0(t,e,...n){if(t=St(t),ZI("collection","path",e),t instanceof Gr){let i=be.fromString(e,...n);return nI(i),new Wn(t,null,i)}{if(!(t instanceof ut||t instanceof Wn))throw new N(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(be.fromString(e,...n));return nI(i),new Wn(t.firestore,null,i)}}function qm(t,e,...n){if(t=St(t),arguments.length===1&&(e=Sl.newId()),ZI("doc","path",e),t instanceof Gr){let i=be.fromString(e,...n);return tI(i),new ut(t,null,new F(i))}{if(!(t instanceof ut||t instanceof Wn))throw new N(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(be.fromString(e,...n));return tI(i),new ut(t.firestore,t instanceof Wn?t.converter:null,new F(i))}}var wm=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new $l(this,"async_queue_retry"),this.cu=()=>{let n=Wf();n&&A("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Wf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Mt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!ra(e))throw e;A("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(i=>{this.ou=i,this._u=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw nn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this._u=!1,i))));return this.nu=n,n}enqueueAfterDelay(e,n,i){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let r=lm.createAndSchedule(this,e,n,i,s=>this.Iu(s));return this.su.push(r),r}lu(){this.ou&&V()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function iI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Zn=class extends Gr{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new wm}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||n0(this),this._firestoreClient.terminate()}};function t0(t,e){let n=typeof t=="object"?t:vr(),i=typeof t=="string"?t:e||"(default)",r=lo(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=fv("firestore");s&&JI(r,...s)}return r}function Gm(t){return t._firestoreClient||n0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function n0(t){var e,n,i;let r=t._freezeSettings(),s=function(a,c,l,u){return new ap(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,XI(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new vm(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var ea=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(rt.fromBase64String(e))}catch(n){throw new N(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ta=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new N(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var eu=class{constructor(e){this._methodName=e}};var na=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new N(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new N(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}};var dk=/^__.*__$/,Im=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vi(e,this.data,n,this.fieldTransforms)}};function i0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}var bm=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.mu({path:i,gu:!1});return r.pu(e),r}yu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.mu({path:i,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return tu(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(i0(this.Vu)&&dk.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},Tm=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||lu(e)}Cu(e,n,i,r=!1){return new bm({Vu:e,methodName:n,Du:i,path:yt.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function r0(t){let e=t._freezeSettings(),n=lu(t._databaseId);return new Tm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function s0(t,e,n,i,r,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,r);l0("Data must be an object, but it was:",o,i);let a=a0(i,o),c,l;if(s.merge)c=new Zt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=hk(e,d,n);if(!o.contains(h))throw new N(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);pk(u,h)||u.push(h)}c=new Zt(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new Im(new Nt(a),c,l)}function o0(t,e){if(c0(t=St(t)))return l0("Unsupported field value:",e,t),a0(t,e);if(t instanceof eu)return function(i,r){if(!i0(r.Vu))throw r.Su(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Su(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=o0(a,r.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=qe.fromDate(i);return{timestampValue:Ll(r.serializer,s)}}if(i instanceof qe){let s=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ll(r.serializer,s)}}if(i instanceof na)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ea)return{bytesValue:AI(r.serializer,i._byteString)};if(i instanceof ut){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mm(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Su(`Unsupported field value: ${zm(i)}`)}(t,e)}function a0(t,e){let n={};return sI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(i,r)=>{let s=o0(r,e.fu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function c0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof na||t instanceof ea||t instanceof ut||t instanceof eu)}function l0(t,e,n){if(!c0(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=zm(n);throw i==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+i)}}function hk(t,e,n){if((e=St(e))instanceof ta)return e._internalPath;if(typeof e=="string")return u0(t,e);throw tu("Field path arguments must be of type string or ",t,!1,void 0,n)}var fk=new RegExp("[~\\*/\\[\\]]");function u0(t,e,n){if(e.search(fk)>=0)throw tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ta(...e.split("."))._internalPath}catch{throw tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tu(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new N(v.INVALID_ARGUMENT,a+t+c)}function pk(t,e){return t.some(n=>n.isEqual(e))}var nu=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Cm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(d0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Cm=class extends nu{data(){return super.data()}};function d0(t,e){return typeof e=="string"?u0(t,e):e instanceof ta?e._internalPath:e._delegate._internalPath}function mk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new N(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sm=class{convertValue(e,n="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Wr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new na(Ie(e.latitude),Ie(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=xm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ko(e));default:return null}}convertTimestamp(e){let n=Kn(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=be.fromString(e);le(kI(i));let r=new xl(i.get(1),i.get(3)),s=new F(i.popFirst(5));return r.isEqual(n)||nn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function h0(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var Pi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},iu=class extends nu{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Or(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(d0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Or=class extends iu{data(e={}){return super.data(e)}},Am=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Pi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Or(this._firestore,this._userDataWriter,i.key,i,new Pi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new N(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new Or(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Pi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Or(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Pi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:gk(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function gk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}function f0(t){t=wn(t,ut);let e=wn(t.firestore,Zn);return lk(Gm(e),t._key).then(n=>_0(e,t,n))}var ru=class extends Sm{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}};function p0(t,e,n){t=wn(t,ut);let i=wn(t.firestore,Zn),r=h0(t.converter,e,n);return g0(i,[s0(r0(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Hn.none())])}function m0(t,e){let n=wn(t.firestore,Zn),i=qm(t),r=h0(t.converter,e);return g0(n,[s0(r0(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Hn.exists(!1))]).then(()=>i)}function Hm(t,...e){var n,i,r;t=St(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||iI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iI(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(t instanceof ut)l=wn(t.firestore,Zn),u=ou(t._key.path),c={next:d=>{e[o]&&e[o](_0(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=wn(t,Jl);l=wn(d.firestore,Zn),u=d._query;let h=new ru(l);c={next:f=>{e[o]&&e[o](new Am(l,h,d,f))},error:e[o+1],complete:e[o+2]},mk(t._query)}return function(h,f,P,k){let x=new Xl(k),G=new Wl(f,x,P);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return $I(yield Em(h),G)})),()=>{x.Qa(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return zI(yield Em(h),G)}))}}(Gm(l),u,a,c)}function g0(t,e){return function(i,r){let s=new Mt;return i.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return ZO(yield ck(i),r,s)})),s.promise}(Gm(t),e)}function _0(t,e,n){let i=n.docs.get(e._key),r=new ru(t);return new iu(t,r,e._key,i,new Pi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Hr=r})(gn),Pt(new lt("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Zn(new Xf(i.getProvider("auth-internal")),new tp(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new N(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(l.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_e(Rw,"4.5.0",e),_e(Rw,"4.5.0","esm2017")})();var hu=function(){return hu=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hu.apply(this,arguments)};var vk={includeMetadataChanges:!1};function y0(t,e){return e===void 0&&(e=vk),new dt(function(n){var i=Hm(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function v0(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:hu(hu({},i),(n={},n[e.idField]=t.id,n))}function E0(t){return y0(t,{includeMetadataChanges:!0}).pipe(H(function(e){return e.docs}))}function w0(t,e){return e===void 0&&(e={}),E0(t).pipe(H(function(n){return n.map(function(i){return v0(i,e)})}))}var Ui=class{constructor(e){return e}},I0="firestore",Wm=class{constructor(){return fo(I0)}};var Km=new C("angularfire2.firestore-instances");function Ek(t,e){let n=Vh(I0,t,e);return n&&new Ui(n)}function wk(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ui(i)}}var Ik={provide:Wm,deps:[[new ht,Km]]},bk={provide:Ui,useFactory:Ek,deps:[[new ht,Km],vi]},Tk=(()=>{class t{constructor(){_e("angularfire",_n.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=fe({type:t});static \u0275inj=pe({providers:[bk,Ik]})}return t})();function b0(t,...e){return{ngModule:Tk,providers:[{provide:Km,useFactory:wk(t),multi:!0,deps:[q,Re,po,mo,[new ht,Gc],[new ht,ho],...e]}]}}var T0=xt(w0,!0);var C0=xt(m0,!0);var Ym=xt(e0,!0);var Qm=xt(qm,!0);var S0=xt(f0,!0);var A0=xt(t0,!0);var R0=xt(p0,!0);var Yr=(()=>{let e=class e{constructor(i){this.fireStore=i}saveProject(i){let r=Ym(this.fireStore,"projects");return C0(r,i)}getProjects(){let i=Ym(this.fireStore,"projects");return T0(i,{idField:"id"})}getProjectById(i){let r=Qm(this.fireStore,"projects",i);return S0(r)}updateProject(i,r){let s=Qm(this.fireStore,"projects",i);return R0(s,r)}};e.\u0275fac=function(r){return new(r||e)(_(Ui))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zm(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&Lg(Zm);let i=n?e?.injector?.get(ju)??b(ju):null,r;e?.requireSync?r=Uu({kind:0}):r=Uu({kind:1,value:e?.initialValue});let s=t.subscribe({next:o=>r.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;r.set({kind:2,error:o})}});return i?.onDestroy(s.unsubscribe.bind(s)),va(()=>{let o=r();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new ce(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var tg={};function Vt(t,e){if(tg[t]=(tg[t]||0)+1,typeof e=="function")return Jm(t,(...i)=>R(m({},e(...i)),{type:t}));switch(e?e._as:"empty"){case"empty":return Jm(t,()=>({type:t}));case"props":return Jm(t,i=>R(m({},i),{type:t}));default:throw new Error("Unexpected config.")}}function Jn(){return{_as:"props",_p:void 0}}function Jm(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}var B0="@ngrx/store/init",Qr=(()=>{let e=class e extends Me{constructor(){super({type:B0})}next(i){if(typeof i=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof i>"u")throw new TypeError("Actions must be objects");if(typeof i.type>"u")throw new TypeError("Actions must have a type property");super.next(i)}complete(){}ngOnDestroy(){super.complete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Sk=[Qr],$0=new C("@ngrx/store Internal Root Guard"),D0=new C("@ngrx/store Internal Initial State"),og=new C("@ngrx/store Initial State"),z0=new C("@ngrx/store Reducer Factory"),P0=new C("@ngrx/store Internal Reducer Factory Provider"),q0=new C("@ngrx/store Initial Reducers"),eg=new C("@ngrx/store Internal Initial Reducers"),oB=new C("@ngrx/store Store Features"),x0=new C("@ngrx/store Internal Store Reducers"),aB=new C("@ngrx/store Internal Feature Reducers"),cB=new C("@ngrx/store Internal Feature Configs"),lB=new C("@ngrx/store Internal Store Features"),uB=new C("@ngrx/store Internal Feature Reducers Token"),dB=new C("@ngrx/store Feature Reducers"),O0=new C("@ngrx/store User Provided Meta Reducers"),fu=new C("@ngrx/store Meta Reducers"),k0=new C("@ngrx/store Internal Resolved Meta Reducers"),N0=new C("@ngrx/store User Runtime Checks Config"),M0=new C("@ngrx/store Internal User Runtime Checks Config"),aa=new C("@ngrx/store Internal Runtime Checks"),G0=new C("@ngrx/store Check if Action types are unique"),pu=new C("@ngrx/store Root Store Provider"),H0=new C("@ngrx/store Feature State Provider");function Ak(t,e={}){let n=Object.keys(t),i={};for(let s=0;s<n.length;s++){let o=n[s];typeof t[o]=="function"&&(i[o]=t[o])}let r=Object.keys(i);return function(o,a){o=o===void 0?e:o;let c=!1,l={};for(let u=0;u<r.length;u++){let d=r[u],h=i[d],f=o[d],P=h(f,a);l[d]=P,c=c||P!==f}return c?l:o}}function Rk(t,e){return Object.keys(t).filter(n=>n!==e).reduce((n,i)=>Object.assign(n,{[i]:t[i]}),{})}function W0(...t){return function(e){if(t.length===0)return e;let n=t[t.length-1];return t.slice(0,-1).reduceRight((r,s)=>s(r),n(e))}}function K0(t,e){return Array.isArray(e)&&e.length>0&&(t=W0.apply(null,[...e,t])),(n,i)=>{let r=t(n);return(s,o)=>(s=s===void 0?i:s,r(s,o))}}function Dk(t){let e=Array.isArray(t)&&t.length>0?W0(...t):n=>n;return(n,i)=>(n=e(n),(r,s)=>(r=r===void 0?i:r,n(r,s)))}var ca=class extends dt{},mu=class extends Qr{},Pk="@ngrx/store/update-reducers",ng=(()=>{let e=class e extends Me{get currentReducers(){return this.reducers}constructor(i,r,s,o){super(o(s,r)),this.dispatcher=i,this.initialState=r,this.reducers=s,this.reducerFactory=o}addFeature(i){this.addFeatures([i])}addFeatures(i){let r=i.reduce((s,{reducers:o,reducerFactory:a,metaReducers:c,initialState:l,key:u})=>{let d=typeof o=="function"?Dk(c)(o,l):K0(a,c)(o,l);return s[u]=d,s},{});this.addReducers(r)}removeFeature(i){this.removeFeatures([i])}removeFeatures(i){this.removeReducers(i.map(r=>r.key))}addReducer(i,r){this.addReducers({[i]:r})}addReducers(i){this.reducers=m(m({},this.reducers),i),this.updateReducers(Object.keys(i))}removeReducer(i){this.removeReducers([i])}removeReducers(i){i.forEach(r=>{this.reducers=Rk(this.reducers,r)}),this.updateReducers(i)}updateReducers(i){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Pk,features:i})}ngOnDestroy(){this.complete()}};e.\u0275fac=function(r){return new(r||e)(_(mu),_(og),_(q0),_(z0))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),xk=[ng,{provide:ca,useExisting:ng},{provide:mu,useExisting:Qr}],la=(()=>{let e=class e extends X{ngOnDestroy(){this.complete()}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ft(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Ok=[la],gu=class extends dt{},F0=(()=>{let e=class e extends Me{constructor(i,r,s,o){super(o);let c=i.pipe(rs(fa)).pipe(Dg(r)),l={state:o},u=c.pipe(as(kk,l));this.stateSubscription=u.subscribe(({state:d,action:h})=>{this.next(d),s.next(h)}),this.state=Zm(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}};e.INIT=B0,e.\u0275fac=function(r){return new(r||e)(_(Qr),_(ca),_(la),_(og))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function kk(t={state:void 0},[e,n]){let{state:i}=t;return{state:n(i,e),action:e}}var Nk=[F0,{provide:gu,useExisting:F0}],vt=(()=>{let e=class e extends dt{constructor(i,r,s){super(),this.actionsObserver=r,this.reducerManager=s,this.source=i,this.state=i.state}select(i,...r){return Fk.call(null,i,...r)(this)}selectSignal(i,r){return va(()=>i(this.state()),r)}lift(i){let r=new e(this,this.actionsObserver,this.reducerManager);return r.operator=i,r}dispatch(i){this.actionsObserver.next(i)}next(i){this.actionsObserver.next(i)}error(i){this.actionsObserver.error(i)}complete(){this.actionsObserver.complete()}addReducer(i,r){this.reducerManager.addReducer(i,r)}removeReducer(i){this.reducerManager.removeReducer(i)}};e.\u0275fac=function(r){return new(r||e)(_(gu),_(Qr),_(ng))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Mk=[vt];function Fk(t,e,...n){return function(r){let s;if(typeof t=="string"){let o=[e,...n].filter(Boolean);s=r.pipe(Ag(t,...o))}else if(typeof t=="function")s=r.pipe(H(o=>t(o,e)));else throw new TypeError(`Unexpected type '${typeof t}' in select operator, expected 'string' or 'function'`);return s.pipe($i())}}var ag="https://ngrx.io/guide/store/configuration/runtime-checks";function V0(t){return t===void 0}function L0(t){return t===null}function Y0(t){return Array.isArray(t)}function Vk(t){return typeof t=="string"}function Lk(t){return typeof t=="boolean"}function Uk(t){return typeof t=="number"}function Q0(t){return typeof t=="object"&&t!==null}function jk(t){return Q0(t)&&!Y0(t)}function Bk(t){if(!jk(t))return!1;let e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}function ig(t){return typeof t=="function"}function $k(t){return ig(t)&&t.hasOwnProperty("\u0275cmp")}function zk(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var qk=!1;function Gk(){return qk}function U0(t,e){return t===e}function Hk(t,e,n){for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!0;return!1}function X0(t,e=U0,n=U0){let i=null,r=null,s;function o(){i=null,r=null}function a(u=void 0){s={result:u}}function c(){s=void 0}function l(){if(s!==void 0)return s.result;if(!i)return r=t.apply(null,arguments),i=arguments,r;if(!Hk(arguments,i,e))return r;let u=t.apply(null,arguments);return i=arguments,n(r,u)?r:(r=u,u)}return{memoized:l,reset:o,setResult:a,clearResult:c}}function Xr(...t){return Kk(X0)(...t)}function Wk(t,e,n,i){if(n===void 0){let s=e.map(o=>o(t));return i.memoized.apply(null,s)}let r=e.map(s=>s(t,n));return i.memoized.apply(null,[...r,n])}function Kk(t,e={stateFn:Wk}){return function(...n){let i=n;if(Array.isArray(i[0])){let[u,...d]=i;i=[...u,...d]}else i.length===1&&Yk(i[0])&&(i=Qk(i[0]));let r=i.slice(0,i.length-1),s=i[i.length-1],o=r.filter(u=>u.release&&typeof u.release=="function"),a=t(function(...u){return s.apply(null,u)}),c=X0(function(u,d){return e.stateFn.apply(null,[u,r,d,a])});function l(){c.reset(),a.reset(),o.forEach(u=>u.release())}return Object.assign(c.memoized,{release:l,projector:a.memoized,setResult:c.setResult,clearResult:c.clearResult})}}function Z0(t){return Xr(e=>{let n=e[t];return!Gk()&&gs()&&!(t in e)&&console.warn(`@ngrx/store: The feature name "${t}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${t}', ...) or StoreModule.forFeature('${t}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),n},e=>e)}function Yk(t){return!!t&&typeof t=="object"&&Object.values(t).every(e=>typeof e=="function")}function Qk(t){let e=Object.values(t),n=Object.keys(t),i=(...r)=>n.reduce((s,o,a)=>R(m({},s),{[o]:r[a]}),{});return[...e,i]}function Xk(t){return t instanceof C?b(t):t}function Zk(t){return typeof t=="function"?t():t}function Jk(t,e){return t.concat(e)}function eN(){if(b(vt,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function tN(t,e){return function(n,i){let r=e.action(i)?rg(i):i,s=t(n,r);return e.state()?rg(s):s}}function rg(t){Object.freeze(t);let e=ig(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(!n.startsWith("\u0275")&&zk(t,n)&&(!e||n!=="caller"&&n!=="callee"&&n!=="arguments")){let i=t[n];(Q0(i)||ig(i))&&!Object.isFrozen(i)&&rg(i)}}),t}function nN(t,e){return function(n,i){if(e.action(i)){let s=sg(i);j0(s,"action")}let r=t(n,i);if(e.state()){let s=sg(r);j0(s,"state")}return r}}function sg(t,e=[]){return(V0(t)||L0(t))&&e.length===0?{path:["root"],value:t}:Object.keys(t).reduce((i,r)=>{if(i)return i;let s=t[r];return $k(s)?i:V0(s)||L0(s)||Uk(s)||Lk(s)||Vk(s)||Y0(s)?!1:Bk(s)?sg(s,[...e,r]):{path:[...e,r],value:s}},!1)}function j0(t,e){if(t===!1)return;let n=t.path.join("."),i=new Error(`Detected unserializable ${e} at "${n}". ${ag}#strict${e}serializability`);throw i.value=t.value,i.unserializablePath=n,i}function iN(t,e){return function(n,i){if(e.action(i)&&!q.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${ag}#strictactionwithinngzone`);return t(n,i)}}function rN(t){return gs()?m({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},t):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function sN({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?nN(n,{action:i=>t&&!cg(i),state:()=>e}):n}function oN({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?tN(n,{action:i=>t&&!cg(i),state:()=>e}):n}function cg(t){return t.type.startsWith("@ngrx")}function aN({strictActionWithinNgZone:t}){return e=>t?iN(e,{action:n=>t&&!cg(n)}):e}function cN(t){return[{provide:M0,useValue:t},{provide:N0,useFactory:uN,deps:[M0]},{provide:aa,deps:[N0],useFactory:rN},{provide:fu,multi:!0,deps:[aa],useFactory:oN},{provide:fu,multi:!0,deps:[aa],useFactory:sN},{provide:fu,multi:!0,deps:[aa],useFactory:aN}]}function lN(){return[{provide:G0,multi:!0,deps:[aa],useFactory:dN}]}function uN(t){return t}function dN(t){if(!t.strictActionTypeUniqueness)return;let e=Object.entries(tg).filter(([,n])=>n>1).map(([n])=>n);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(n=>`"${n}"`).join(", ")}. ${ag}#strictactiontypeuniqueness`)}function hN(t={},e={}){return[{provide:$0,useFactory:eN},{provide:D0,useValue:e.initialState},{provide:og,useFactory:Zk,deps:[D0]},{provide:eg,useValue:t},{provide:x0,useExisting:t instanceof C?t:eg},{provide:q0,deps:[eg,[new Ng(x0)]],useFactory:Xk},{provide:O0,useValue:e.metaReducers?e.metaReducers:[]},{provide:k0,deps:[fu,O0],useFactory:Jk},{provide:P0,useValue:e.reducerFactory?e.reducerFactory:Ak},{provide:z0,deps:[P0,k0],useFactory:K0},Sk,xk,Ok,Nk,Mk,cN(e.runtimeChecks),lN()]}function fN(){b(Qr),b(ca),b(la),b(vt),b($0,{optional:!0}),b(G0,{optional:!0})}var pN=[{provide:pu,useFactory:fN},{provide:zi,multi:!0,useFactory(){return()=>b(pu)}}];function J0(t,e){return cn([...hN(t,e),pN])}function Tn(...t){let e=t.pop(),n=t.map(i=>i.type);return{reducer:e,types:n}}function eb(t,...e){let n=new Map;for(let i of e)for(let r of i.types){let s=n.get(r);if(s){let o=(a,c)=>i.reducer(s(a,c),c);n.set(r,o)}else n.set(r,i.reducer)}return function(i=t,r){let s=n.get(r.type);return s?s(i,r):i}}function mN(t,e){if(t&1){let n=nt();y(0,"tr",9),W("click",function(){let s=de(n).$implicit,o=j(2);return he(o.redirectToProject((s==null?null:s.id)||""))}),y(1,"td"),E(2),g(),y(3,"td"),E(4),g()()}if(t&2){let n=e.$implicit;I(2),ge(" ",n.projectName," "),I(2),ge(" ",n.users," ")}}function gN(t,e){if(t&1&&(Ye(0),y(1,"div",5)(2,"table",6)(3,"thead")(4,"tr")(5,"th",7),E(6,"Project Name"),g(),y(7,"th",7),E(8,"Users"),g()()(),y(9,"tbody"),$(10,mN,5,2,"tr",8),g()()(),Qe()),t&2){let n=j();I(10),O("ngForOf",n.projects)}}function _N(t,e){t&1&&E(0,` Loading...
`)}var tb=(()=>{let e=class e{constructor(i,r,s,o){this.projectFirebaseService=i,this.dialog=r,this.store=s,this.router=o,this.projects=[],this.isLoading=!1,this.isLoading=!0,this.projectFirebaseService.getProjects().subscribe(a=>{a&&(this.projects=a.map(c=>R(m({},c),{users:c.users.map(l=>l.name).join(", ")}))),this.isLoading=!1},()=>{this.isLoading=!1,console.error("Error")})}openCreateProjectDialog(){this.dialog.open(cv,{}).afterClosed().subscribe(r=>p(this,null,function*(){if(r){let s=Date.now().toString(36),o;o={projectId:s,projectName:r.projectName,dateCreated:new Date,users:r.users.map((a,c)=>({id:c+1,name:a.name,amount:0})),expenses:[]},this.projectFirebaseService.saveProject(o).then(a=>{this.router.navigate(["project",a?.id])}).catch(a=>{console.log("Error",a)})}}))}redirectToProject(i){this.router.navigate(["project",i])}};e.\u0275fac=function(r){return new(r||e)(T(Yr),T(Ec),T(vt),T(mt))},e.\u0275cmp=re({type:e,selectors:[["app-project"]],standalone:!0,features:[oe],decls:7,vars:3,consts:[[1,"buttons-container","btn-toolbar"],["type","button",1,"btn","btn-primary","me-1",3,"disabled","click"],[1,"my-2"],[4,"ngIf","ngIfElse"],["loading",""],["id","projects"],[1,"table","table-striped","table-bordered"],["scope","col"],["class","clickable",3,"click",4,"ngFor","ngForOf"],[1,"clickable",3,"click"]],template:function(r,s){if(r&1&&(y(0,"div",0)(1,"button",1),W("click",function(){return s.openCreateProjectDialog()}),E(2,"Create New Project"),g()(),me(3,"div",2),$(4,gN,11,1,"ng-container",3)(5,_N,1,0,"ng-template",null,4,un)),r&2){let o=xn(6);I(),O("disabled",s.isLoading),I(3),O("ngIf",!s.isLoading)("ngIfElse",o)}},dependencies:[Oe,ot,at,qv]});let t=e;return t})();function yN(t,e){t&1&&(y(0,"span",12),E(1,"Owed Full Amount"),g())}function vN(t,e){t&1&&(y(0,"span",13),E(1," Settle"),g())}function EN(t,e){t&1&&(y(0,"span",14),E(1," Split Equally"),g())}function wN(t,e){t&1&&(y(0,"span",12),E(1," Owed Full Amount"),g())}function IN(t,e){if(t&1&&(y(0,"div",20)(1,"label"),E(2),g(),y(3,"label"),E(4),g()()),t&2){let n=e.$implicit;I(2),ge("",n.name," - "),I(2),ge(" $",n.amount," ")}}function bN(t,e){if(t&1&&(y(0,"tr")(1,"td",15)(2,"div",16)(3,"div",17)(4,"label"),E(5,"Bill Statement: "),g()(),y(6,"div",18)(7,"div",16),$(8,IN,5,2,"div",19),g()()()()()),t&2){let n=j().$implicit;I(8),O("ngForOf",n==null?null:n.credit)}}function TN(t,e){if(t&1){let n=nt();Ye(0),y(1,"tr",5),W("click",function(){let s=de(n).$implicit,o=j();return he(o.clickRow(s))}),y(2,"td"),E(3),g(),y(4,"td"),E(5),g(),y(6,"td"),$(7,yN,2,0,"span",6)(8,vN,2,0,"span",7)(9,EN,2,0,"span",8)(10,wN,2,0,"span",6),g(),y(11,"td"),E(12),g(),y(13,"td")(14,"span",9)(15,"i",10),W("click",function(r){let o=de(n).$implicit,a=j();return he(a.deleteExpense(r,o.id))}),g()(),y(16,"span",9)(17,"i",11),W("click",function(r){let o=de(n).$implicit,a=j();return he(a.editExpense(r,o.id))}),g()()()(),$(18,bN,9,1,"tr",4),Qe()}if(t&2){let n=e.$implicit;I(3),ge(" ",n.paidBy==null?null:n.paidBy.name," "),I(2),ge(" ",n.name," "),I(2),O("ngIf",n.transactionType=="OWED_FULL_AMOUNT_CUSTOM"),I(),O("ngIf",n.transactionType=="SETTLE"),I(),O("ngIf",n.transactionType=="SPLIT_EQUALLY"),I(),O("ngIf",n.transactionType=="OWED_FULL_AMOUNT"),I(2),ge(" $ ",n.amountPaid," "),I(6),O("ngIf",n==null?null:n.isExpanded)}}function CN(t,e){t&1&&(y(0,"tr")(1,"td",21),E(2,"No Data"),g()())}var nb=(()=>{let e=class e{constructor(){this.onDeleteExpense=new Ee,this.onEditExpense=new Ee,this.onRowClick=new Ee,this.expenses=[]}deleteExpense(i,r){i.stopPropagation(),this.onDeleteExpense.emit(r)}editExpense(i,r){i.stopPropagation(),this.onEditExpense.emit(r)}ngOnInit(){}clickRow(i){this.onRowClick.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=re({type:e,selectors:[["app-expenses"]],inputs:{data:"data"},outputs:{onDeleteExpense:"onDeleteExpense",onEditExpense:"onEditExpense",onRowClick:"onRowClick"},standalone:!0,features:[oe],decls:17,vars:2,consts:[["id","expenses"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"],["class","badge bg-warning text-dark",4,"ngIf"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"mx-1"],[1,"bi","bi-trash-fill","clickable",3,"click"],[1,"bi","bi-pencil-square","clickable",3,"click"],[1,"badge","bg-warning","text-dark"],[1,"badge","bg-success"],[1,"badge","bg-danger"],["colspan","6"],[1,"row"],[1,"col-3","col-md-2"],[1,"col-9","col-md-3"],["class","col-6",4,"ngFor","ngForOf"],[1,"col-6"],["colspan","6",2,"text-align","center"]],template:function(r,s){r&1&&(y(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),E(5,"User"),g(),y(6,"th",2),E(7,"Transaction Name"),g(),y(8,"th",2),E(9,"Transaction Type"),g(),y(10,"th",2),E(11,"Amount"),g(),y(12,"th",2),E(13,"Actions"),g()()(),y(14,"tbody"),$(15,TN,19,8,"ng-container",3)(16,CN,3,0,"tr",4),g()()()),r&2&&(I(15),O("ngForOf",s.data),I(),O("ngIf",(s.data==null?null:s.data.length)==0))},dependencies:[Oe,ot,at],styles:[".btn[_ngcontent-%COMP%]{line-height:1}"]});let t=e;return t})();var ib=(()=>{let e=class e{transform(i,r){return Math.abs(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Pg({name:"abs",type:e,pure:!0,standalone:!0});let t=e;return t})();function SN(t,e){if(t&1&&(y(0,"span",10),E(1),ln(2,"abs"),ln(3,"abs"),g()),t&2){let n=j().$implicit;O("ngClass",n.amount>0?"text-success":"text-danger"),I(),ge(" ",n.amount>0?"is owed $"+ci(2,2,n.amount):"owes $"+ci(3,4,n.amount)," ")}}function AN(t,e){if(t&1&&(y(0,"div",11)(1,"label",12),E(2," You owe "),y(3,"b"),E(4),ln(5,"number"),ln(6,"abs"),g(),E(7," to "),y(8,"b",13),E(9),g()()()),t&2){let n=e.$implicit;I(4),ge("$",zu(5,2,ci(6,5,n.value),"1.2-2"),""),I(5),st(n.key)}}function RN(t,e){if(t&1&&(y(0,"div",11)(1,"label",12)(2,"b",14),E(3),g(),E(4," owes you "),y(5,"b"),E(6),ln(7,"number"),ln(8,"abs"),g()()()),t&2){let n=e.$implicit;I(3),st(n.key),I(3),ge("$",zu(7,2,ci(8,5,n.value),"1.2-2"),"")}}function DN(t,e){if(t&1&&(y(0,"div",4)(1,"div",5)(2,"div",6)(3,"h6",7),E(4),$(5,SN,4,6,"span",8),g(),$(6,AN,10,7,"div",9),ln(7,"keyvalue"),$(8,RN,9,7,"div",9),ln(9,"keyvalue"),g()()()),t&2){let n=e.$implicit;j();let i=xn(5);I(4),ge(" ",n.name," "),I(),O("ngIf",n.amount!=0)("ngIfElse",i),I(),O("ngForOf",ci(7,5,n.debtsMap)),I(2),O("ngForOf",ci(9,7,n.isOwedMap))}}function PN(t,e){t&1&&(y(0,"span",14),E(1,"is all settled"),g())}var rb=(()=>{let e=class e{constructor(){this.users=[]}ngOnInit(){this.users=this.project?.users.map(i=>R(m({},i),{isExpanded:!1}))}toggleExpand(i){i.isExpanded=!i.isExpanded}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=re({type:e,selectors:[["app-user-info"]],inputs:{project:"project"},standalone:!0,features:[oe],decls:6,vars:1,consts:[["id","information-panel"],[1,"flex"],["class","info-item",4,"ngFor","ngForOf"],["allSettled",""],[1,"info-item"],[1,"card","card-props"],[1,"card-body"],[1,"card-title"],[3,"ngClass",4,"ngIf","ngIfElse"],["class","ms-2",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"ms-2"],[1,"card-text"],[1,"text-danger"],[1,"text-success"]],template:function(r,s){r&1&&(y(0,"div",0)(1,"div",1),$(2,DN,10,9,"div",2),me(3,"hr"),g()(),$(4,PN,2,0,"ng-template",null,3,un)),r&2&&(I(2),O("ngForOf",s.project==null?null:s.project.users))},dependencies:[ib,Oe,Aa,ot,at,r_,i_],styles:["#information-panel[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{padding:.5rem}.flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]});let t=e;return t})();function xN(t,e){if(t&1&&(y(0,"option",23),E(1),g()),t&2){let n=e.$implicit;O("value",n.id),I(),ge(" ",n.name," ")}}function ON(t,e){if(t&1&&(y(0,"option",23),E(1),g()),t&2){let n=e.$implicit;O("value",n.id),I(),ge(" ",n.name," ")}}function kN(t,e){t&1&&(y(0,"span",24),E(1," Invalid input "),g())}function NN(t,e){if(t&1&&(y(0,"tr"),Ye(1,35),y(2,"td")(3,"label"),E(4),g()(),y(5,"td")(6,"div",36)(7,"div",15)(8,"span",16),E(9,"$"),g()(),me(10,"input",37),g()(),Qe(),g()),t&2){let n=e.$implicit,i=e.index,r;I(),O("formGroupName",i),I(3),st((r=n.get("userName"))==null?null:r.value)}}function MN(t,e){if(t&1){let n=nt();y(0,"div",3)(1,"label",25),E(2,"Credit Map"),g(),Ye(3,26),y(4,"div",27)(5,"table",28)(6,"thead")(7,"tr")(8,"th",29),E(9,"User"),g(),y(10,"th",29),E(11,"Amount"),g()()(),y(12,"tbody"),$(13,NN,11,2,"tr",30),y(14,"tr",31)(15,"td"),E(16,"Total:"),g(),y(17,"td")(18,"div",32)(19,"span",33),E(20),g(),y(21,"button",34),W("click",function(){de(n);let r=j(2);return he(r.splitCreditsEqually())}),E(22,"Split Equally"),g()()()()()()(),Qe(),g()}if(t&2){let n=j(2);I(13),O("ngForOf",n.creditArray.controls),I(6),O("ngClass",n.isCreditMapExceedsAmountPaid?"text-danger":""),I(),Ia("$",n.totalCredit,"/$",n.form.get("amountPaid").value,""),I(),O("disabled",n.form.get("amountPaid").value<=0)}}function FN(t,e){if(t&1){let n=nt();Ye(0),y(1,"form",2)(2,"div",3)(3,"label",4),E(4,"Who paid?"),g(),y(5,"select",5),W("change",function(r){de(n);let s=j();return he(s.onUserChange(r))}),$(6,xN,2,2,"option",6),g()(),y(7,"div",3)(8,"label",7),E(9,"Description"),g(),me(10,"input",8),g(),y(11,"div",9)(12,"div",10)(13,"label",11),E(14,"Type"),g(),y(15,"select",12),$(16,ON,2,2,"option",6),g()(),y(17,"div",10)(18,"label",13),E(19,"Amount"),g(),y(20,"div",14)(21,"div",15)(22,"span",16),E(23,"$"),g()(),me(24,"input",17),g(),$(25,kN,2,0,"span",18),g()(),$(26,MN,23,5,"div",19),y(27,"div",20)(28,"button",21),W("click",function(){de(n);let r=j();return he(r.close())}),E(29,"Close"),g(),y(30,"button",22),W("click",function(){de(n);let r=j();return he(r.add())}),E(31,"Add"),g()()(),Qe()}if(t&2){let n=j();I(),O("formGroup",n.form),I(5),O("ngForOf",n.data.users),I(10),O("ngForOf",n.transactionTypes),I(9),O("ngIf",n.form.get("amountPaid").dirty&&n.form.get("amountPaid").hasError("min")),I(),O("ngIf",n.form.get("transactionType").value=="OWED_FULL_AMOUNT_CUSTOM"&&n.creditArray.length>1),I(4),O("disabled",n.form.invalid||!n.validateCustomCredit)}}function VN(t,e){if(t&1){let n=nt();Ye(0),y(1,"h6"),E(2),g(),y(3,"div",20)(4,"button",21),W("click",function(){de(n);let r=j();return he(r.close())}),E(5,"Close"),g(),y(6,"button",38),W("click",function(){de(n);let r=j();return he(r.close(!0))}),E(7,"Delete"),g()(),Qe()}if(t&2){let n=j();I(2),ge("Are you sure you want to delete expense",n.data.id,"?")}}var _u=(()=>{let e=class e{constructor(i,r,s){this.dialogRef=i,this.data=r,this.fb=s,this.title="New Expense";let o=r.users.length>0?r.users[0]:null;this.title=this.getTitleByMode(r.mode),this.transactionTypes=r.transactionTypes;let a=r.expense;this.form=this.fb.group({userId:[a?.paidBy?.id??o.id,Ve.required],userName:[a?.paidBy?.name??o.name],name:[a?.name??"",Ve.required],transactionType:[a?.transactionType??this.transactionTypes[0].id,Ve.required],amountPaid:[a?.amountPaid??0,[Ve.required,Ve.min(1)]]}),this.data.users.length>1&&this.form.addControl("credit",this.fb.array([])),this.bindCreditToCreditArray(o.id)}ngOnInit(){}get creditArray(){return this.form.get("credit")}addCredit(i,r){let s=this.data.users.find(a=>a.id==i),o=this.fb.group({id:[s?.id],userName:[s?.name],amount:[r]});this.creditArray.push(o)}onUserChange(i){let r=i.target.value,s=this.data.users.find(o=>o.id==r);this.form.get("userName").setValue(s.name),this.bindCreditToCreditArray(r)}bindCreditToCreditArray(i){let r=this.data?.expense?.credit;this.creditArray.clear(),[...this.data.users].filter(s=>s.id!=i).forEach(s=>{this.addCredit(s.id,r?Math.abs(r[s.id])+"":"0")})}get totalCredit(){return+this.creditArray.value.reduce((i,r)=>i+ +r.amount,0).toFixed(2)}get isCreditMapValueEqualAmountPaid(){return this.form.get("transactionType").value=="OWED_FULL_AMOUNT_CUSTOM"&&this.totalCredit==+this.form.get("amountPaid").value}get isCreditMapExceedsAmountPaid(){return this.form.get("transactionType").value=="OWED_FULL_AMOUNT_CUSTOM"&&this.totalCredit>+this.form.get("amountPaid").value}get validateCustomCredit(){return this.form.get("transactionType").value=="OWED_FULL_AMOUNT_CUSTOM"?this.isCreditMapValueEqualAmountPaid:!0}splitCreditsEqually(){let i=+this.form.get("amountPaid").value,r=(i/this.creditArray.length).toFixed(2);i>0&&this.creditArray.controls.forEach(s=>{s?.get("amount")?.setValue(r)})}close(i=!1){this.dialogRef.close(i)}add(){this.dialogRef.close(this.form.value)}getTitleByMode(i){switch(i){case"ADD":return"New Expense";case"EDIT":return"Update Expense";case"DELETE":return"Delete Expense";default:return"New Expense"}}};e.\u0275fac=function(r){return new(r||e)(T(Dt),T(pn),T(ur))},e.\u0275cmp=re({type:e,selectors:[["app-add-transaction-modal"]],standalone:!0,features:[oe],decls:5,vars:3,consts:[[1,"modal-container"],[4,"ngIf"],[3,"formGroup"],[1,"mb-1"],["for","userId",1,"form-label"],["formControlName","userId",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","name",1,"form-label"],["id","name","formControlName","name","type","text","autocomplete","off",1,"form-control"],[1,"mb-1","row"],[1,"col-6"],["for","transactionType",1,"form-label"],["formControlName","transactionType",1,"form-control"],["for","amountPaid",1,"form-label"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","formControlName","amountPaid","type","number","aria-label","Amount (to the nearest dollar)",1,"form-control"],["class","text-danger",4,"ngIf"],["class","mb-1",4,"ngIf"],[1,"flex-end"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"text-danger"],["for","credit",1,"form-label"],["formArrayName","credit"],[1,"credit-map-table"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"table-footer"],[1,"flex-space-between"],[3,"ngClass"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"",3,"formGroupName"],[1,"input-group"],["type","text","formControlName","amount","type","number","aria-label","Amount (to the nearest dollar)",1,"form-control"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,s){r&1&&(y(0,"div",0)(1,"h3"),E(2),g(),$(3,FN,32,6,"ng-container",1)(4,VN,8,1,"ng-container",1),g()),r&2&&(I(2),st(s.title),I(),O("ngIf",s.data.mode=="ADD"||s.data.mode=="EDIT"),I(),O("ngIf",s.data.mode=="DELETE"))},dependencies:[Oe,Aa,ot,at,Un,or,lc,uc,Vn,Ws,lr,rr,sr,jn,Ln,hi,ar,cr],styles:[".modal-container[_ngcontent-%COMP%]{padding:1rem;width:30rem}button[_ngcontent-%COMP%]{margin:.25rem}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.credit-map-table[_ngcontent-%COMP%]{overflow-y:auto;height:18rem}th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:3}.table-footer[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:3}.table[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 575.98px){.modal-container[_ngcontent-%COMP%]{padding:1rem;width:25rem}}"]});let t=e;return t})();var yu="SPLIT_EQUALLY",vu="OWED_FULL_AMOUNT",Eu="SETTLE",wu="OWED_FULL_AMOUNT_CUSTOM";function LN(t,e){if(t&1&&(y(0,"div")(1,"b"),E(2),g()()),t&2){let n=j();I(2),st(n.form.get("userName").value)}}function UN(t,e){if(t&1&&(y(0,"option",20),E(1),g()),t&2){let n=e.$implicit;O("value",n.id),I(),ge(" ",n.name," ")}}function jN(t,e){if(t&1){let n=nt();y(0,"select",18),W("change",function(r){de(n);let s=j();return he(s.onChangeWhoPaid(r))}),$(1,UN,2,2,"option",19),g()}if(t&2){let n=j();I(),O("ngForOf",n.currentUsersState)}}function BN(t,e){t&1&&(Ye(0),y(1,"div")(2,"em"),E(3,"Please select who is paying"),g()(),Qe())}function $N(t,e){if(t&1&&(y(0,"div")(1,"b"),E(2),g()()),t&2){let n=j(2);I(2),st(n.form.get("settlementToName").value)}}function zN(t,e){if(t&1&&(y(0,"option",24),E(1),g()),t&2){let n=e.$implicit,i=j(3);O("value",n.id)("selected",n.id==i.form.get("settlementTo").value),I(),Ia(" ",n.name," ",n==null?null:n.debtInfo," ")}}function qN(t,e){if(t&1){let n=nt();y(0,"select",22),W("change",function(r){de(n);let s=j(2);return he(s.onChangeSettlementTo(r))}),$(1,zN,2,4,"option",23),g()}if(t&2){let n=j(2);I(),O("ngForOf",n.form.get("settlementToList").value)}}function GN(t,e){if(t&1&&$(0,$N,3,1,"div",4)(1,qN,2,1,"select",21),t&2){let n=j();O("ngIf",n.data.mode=="EDIT"),I(),O("ngIf",n.data.mode=="ADD")}}function HN(t,e){if(t&1&&(y(0,"p")(1,"em",25),E(2),g()()),t&2){let n=e.$implicit;I(2),st(n)}}var ug=(()=>{let e=class e{constructor(i,r,s){this.dialogRef=i,this.data=r,this.fb=s,this.title="Settle Payment",this.title=this.getTitleByMode(r.mode);let o=r.expense;o=R(m({},o),{settlementName:o?.settlementTo?this._findUserBy(o?.settlementTo)?.name:""}),this.form=this.fb.group({userId:[o?.paidBy?.id??"",Ve.required],userName:[o?.paidBy?.name??""],settlementTo:[o?.settlementTo??"",Ve.required],settlementToName:[o?.settlementName??""],settlementToList:[o?.paidBy?.id?this._initSettlementToListBySelectedUserId(o?.paidBy?.id):[]],amountPaid:[o?.amountPaid??0,[Ve.required,Ve.min(.1)]],debt:[]}),o?.settlementTo&&this.updateAmountPaidValidation(o?.settlementTo)}get previousUsersState(){return this.data.previousUsersState}get currentUsersState(){return this.data.currentUsersState}onChangeWhoPaid(i){let r=this._findUserBy(i.target.value);this.form.get("userName").setValue(r?.name),this.form.get("settlementTo").setValue(""),this.form.get("settlementToName").setValue(""),this._resetAmountPaidToZero(),this.form.get("settlementToList").setValue(this._initSettlementToListBySelectedUserId(i.target.value))}onChangeSettlementTo(i){let r=this._findUserBy(i.target.value);this.form.get("settlementToName").setValue(r?.name),this.updateAmountPaidValidation(i.target.value),this._resetAmountPaidToZero()}_resetAmountPaidToZero(){this.form.get("amountPaid").setValue(0),this.form.markAsPristine()}_initSettlementToListBySelectedUserId(i){return this.previousUsersState.filter(r=>r.id!=i).map(r=>R(m({},r),{debtInfo:`(is owed $${this.getDebt(i,r.id)})`}))}_findUserBy(i){return this.previousUsersState.find(r=>r.id==i)}updateAmountPaidValidation(i){this.form.get("debt").setValue(this.getDebt(this.form.get("userId").value,i)),this.form.get("amountPaid").setValidators([Ve.required,Ve.min(.1)]),this.form.get("amountPaid").updateValueAndValidity()}getUserDebtByUserid(i,r){let s=i?.debts.hasOwnProperty(r)?i.debts[r]:0;return Math.abs(+s)}getUserIsOwedByUserid(i,r){let s=i?.isOwed.hasOwnProperty(this.form.get("settlementTo").value)?i.isOwed[this.form.get("settlementTo").value]:0;return Math.abs(+s)}getInfoMessagesVariables(i){let r=i.find(l=>l.id==this.form.get("userId").value),s=this.getUserDebtByUserid(r,this.form.get("settlementTo").value),o=this.getUserIsOwedByUserid(r,this.form.get("settlementTo").value),a=this.form.get("settlementToName").value,c=+this.form.get("amountPaid").value;return{whoPaidUser:r,settlementToName:a,debt:s,owed:o,amountToPay:c}}get settlementInfoMessages(){let{whoPaidUser:i,settlementToName:r,debt:s,owed:o,amountToPay:a}=this.getInfoMessagesVariables(this.previousUsersState),c=[];if(this.data.mode=="ADD"&&r&&i){let l=Math.abs(a-s).toFixed(2);a>0&&(s>0&&a<s?c.push(`${i.name} owe ${r} $${l} debt`):a==s?c.push(`${i.name} is settling debt full amount to ${r}`):s==0?c.push(`${r} owes ${i.name} $${l}`):c.push(`Debt paid and ${r} now owes ${i.name} $${l}`))}return this.data.mode=="EDIT"&&(c=[...this.initEditModalInfoMessages()]),c}initEditModalInfoMessages(){let{whoPaidUser:i,settlementToName:r,debt:s,owed:o,amountToPay:a}=this.getInfoMessagesVariables(this.previousUsersState),c=[];if(i)if(s>0){let l=+(s-a).toFixed(2);l==0?c.push(`${i.name} is paying full debt to ${r}`):s>a?c.push(`${i.name} owes ${r} $${l}`):s<a&&c.push(`Debt paid and ${r} now owes ${i.name} $${Math.abs(l)}`)}else o>=0&&this._isOwedMessages(c);return c}_isOwedMessages(i){let{whoPaidUser:r,settlementToName:s,debt:o,owed:a,amountToPay:c}=this.getInfoMessagesVariables(this.currentUsersState),l=+(+this.data.expense?.amountPaid).toFixed(2),u=a-l+c;r&&c>0&&i.push(`${s} owes ${r.name} $${u}`)}getDebt(i,r){let s=this.previousUsersState.find(a=>a.id==i),o=s?.debts.hasOwnProperty(r)?s.debts[r]:0;return Math.abs(o)}ngOnInit(){}close(){this.dialogRef.close()}settle(){this.dialogRef.close(this.form.value)}getTitleByMode(i){switch(i){case"ADD":return"Settle Payment";case"EDIT":return"Edit Settle Payment";case"DELETE":return"Delete Settlement";default:return"Settle Payment"}}};e.\u0275fac=function(r){return new(r||e)(T(Dt),T(pn),T(ur))},e.\u0275cmp=re({type:e,selectors:[["app-settle-payment-modal"]],standalone:!0,features:[oe],decls:30,vars:7,consts:[[1,"modal-container"],[3,"formGroup"],[1,"mb-3"],["for","userId",1,"form-label"],[4,"ngIf"],["class","form-control","formControlName","userId",3,"change",4,"ngIf"],["for","settlementTo",1,"form-label"],[4,"ngIf","ngIfElse"],["settlementToTemplate",""],["for","amountPaid",1,"form-label"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","formControlName","amountPaid","type","number","aria-label","Amount (to the nearest dollar)",1,"form-control"],[4,"ngFor","ngForOf"],[1,"flex-end"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],["formControlName","userId",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-control","formControlName","settlementTo",3,"change",4,"ngIf"],["formControlName","settlementTo",1,"form-control",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"ms-1","form-label"]],template:function(r,s){if(r&1&&(y(0,"div",0)(1,"h3"),E(2,"Settle Payment"),g(),y(3,"form",1)(4,"div",2)(5,"label",3),E(6,"Who paid?"),g(),$(7,LN,3,1,"div",4)(8,jN,2,1,"select",5),g(),y(9,"div",2)(10,"label",6),E(11,"Payment To"),g(),$(12,BN,4,0,"ng-container",7)(13,GN,2,2,"ng-template",null,8,un),g(),y(15,"div",2)(16,"label",9),E(17,"Amount"),g(),y(18,"div",10)(19,"div",11)(20,"span",12),E(21,"$"),g()(),me(22,"input",13),g(),y(23,"div"),$(24,HN,3,1,"p",14),g()(),y(25,"div",15)(26,"button",16),W("click",function(){return s.close()}),E(27,"Close"),g(),y(28,"button",17),W("click",function(){return s.settle()}),E(29,"Settle Payment"),g()()()()),r&2){let o=xn(14),a;I(3),O("formGroup",s.form),I(4),O("ngIf",s.data.mode=="EDIT"),I(),O("ngIf",s.data.mode=="ADD"),I(4),O("ngIf",!((a=s.form.get("userName"))!=null&&a.value))("ngIfElse",o),I(12),O("ngForOf",s.settlementInfoMessages),I(4),O("disabled",s.form.invalid)}},dependencies:[Oe,ot,at,Un,or,lc,uc,Vn,Ws,lr,rr,sr,jn,Ln,hi],styles:[".modal-container[_ngcontent-%COMP%]{padding:1rem;width:30rem}button[_ngcontent-%COMP%]{margin:.25rem}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}@media (max-width: 575.98px){.modal-container[_ngcontent-%COMP%]{padding:1rem;width:18rem}}"]});let t=e;return t})();var Zr=Vt("[Expense] Split Equally",Jn()),Jr=Vt("[Expense] Owed Full Amount",Jn()),Iu=Vt("[Expense] Custom Expense",Jn()),es=Vt("[Expense] Settle Payment",Jn()),ua=Vt("[Expense] Load State",Jn()),ts=Vt("[Expense] Delete Expense",Jn()),ji=Vt("[Expense] Update Expense",Jn()),da=Vt("[Expense] Push Changes");var bu=Z0("expense"),sb=Xr(bu,t=>t.project),ob=Xr(bu,t=>t.previousProjectState),$B=Xr(bu,t=>t.project.expenses),zB=Xr(bu,t=>t.project.users);var ns=t=>{WN(t),XN(t),ZN(t),QN(t)},WN=t=>{YN(t),KN(t)},KN=t=>{let e=n=>t.users.reduce((r,s)=>{if(s&&s.id!=n.id&&s.debts&&s.debts[n.id]){let o=s.debts[n.id];return R(m({},r),{[s.id]:+((r[s.id]??0)+o).toFixed(2)})}return r},{});t.users=t.users.map(n=>R(m({},n),{isOwed:e(n)}))},YN=t=>{let e=n=>t.expenses.reduce((r,s)=>{if(s&&s.paidBy&&s.paidBy.id!=n.id){let o=s.paidBy.id,a=s.credit[n.id];return R(m({},r),{[o]:+((r[o]??0)+a).toFixed(2)})}return r},{});t.users=t.users.map(n=>R(m({},n),{debts:e(n)}))},QN=t=>{t.users=t.users.map(e=>{let n=e?.isOwed?Object.entries(e.isOwed).reduce((r,[s,o])=>r+Math.abs(o),0):0,i=e?.debts?Object.entries(e.debts).reduce((r,[s,o])=>r+Math.abs(o),0):0;return R(m({},e),{amount:+(n-i).toFixed(2)})})},XN=t=>{t.users.forEach(e=>{e.debts&&e.isOwed&&JN(e.debts,e.isOwed).forEach(i=>{let r=Math.abs(e.debts[i]),s=Math.abs(e.isOwed[i]),o=Math.min(r,s);e.debts[i]=+(r-o).toFixed(2)||0,e.isOwed[i]=+(s-o).toFixed(2)||0})}),t.users.forEach(e=>{if(e.debts)for(let[n,i]of Object.entries(e.debts)){let r=i;(!r||r==0)&&delete e.debts[n]}if(e.isOwed)for(let[n,i]of Object.entries(e.isOwed)){let r=i;(!r||r==0)&&delete e.isOwed[n]}})},ZN=t=>{let e=[...t.users];t.users=t.users.map(n=>{let i={},r={};return n.debts&&Object.entries(n.debts).forEach(([s,o])=>{let a=e.find(c=>c.id==s);a&&(i[a.name]=o)}),n.isOwed&&Object.entries(n.isOwed).forEach(([s,o])=>{let a=e.find(c=>c.id==s);a&&(r[a.name]=o)}),R(m({},n),{debtsMap:i,isOwedMap:r})})},ab=(t,e)=>{switch(e.transactionType){case"SPLIT_EQUALLY":return hg(t,e);case"OWED_FULL_AMOUNT":return dg(t,e);case"SETTLE":return fg(t,e);case"OWED_FULL_AMOUNT_CUSTOM":return e.credit;default:return null}},dg=(t,e)=>{let n=+(+e.amountPaid/(t.length-1))*-1;return t.reduce((r,s)=>{let o=e.paidBy?.id==s.id?+e.amountPaid:n;return R(m({},r),{[s.id]:+o.toFixed(2)})},{})},hg=(t,e)=>{let n=t.length,i=+(+e.amountPaid*(n-1)/n),r=+(+e.amountPaid/n*-1);return t.reduce((o,a)=>{let c=e.paidBy?.id==a.id?i:r;return R(m({},o),{[a.id]:+c.toFixed(2)})},{})},fg=(t,e)=>{if(e&&e.paidBy&&e.paidBy.id&&e.settlementTo){let n={[e.paidBy.id]:e.amountPaid,[e.settlementTo]:-Math.abs(e.amountPaid)};return t.map(i=>i.id).reduce((i,r)=>R(m({},i),{[r]:n[r]?n[r]:0}),{})}return null},JN=(t,e)=>Object.keys(t).filter(n=>Object.hasOwn(e,n));function eM(t,e){if(t&1&&(y(0,"tr")(1,"td")(2,"label"),E(3),g()(),y(4,"td")(5,"label"),E(6),g()()()),t&2){let n=e.$implicit;I(3),st(n.name),I(3),ge("$",n.amount,"")}}var cb=(()=>{let e=class e{constructor(i,r){this.dialogRef=i,this.data=r,this.expense=[],this.totalCredit=0,this.expense=r.expense,this.totalCredit=r.expense.credit.reduce((s,o)=>+s+ +o.amount,0).toFixed(2)}ngOnInit(){}close(){this.dialogRef.close()}};e.\u0275fac=function(r){return new(r||e)(T(Dt),T(pn))},e.\u0275cmp=re({type:e,selectors:[["app-cexpense-details-modal"]],standalone:!0,features:[oe],decls:22,vars:5,consts:[[1,"modal-container"],[1,"info"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"]],template:function(r,s){r&1&&(y(0,"div",0)(1,"h3"),E(2,"Expense Details"),g(),y(3,"div",1)(4,"h6"),E(5),g()(),y(6,"table",2)(7,"thead")(8,"tr")(9,"th"),E(10," Name "),g(),y(11,"th"),E(12," Amount Owed "),g()()(),y(13,"tbody"),$(14,eM,7,2,"tr",3),y(15,"tr")(16,"td")(17,"b"),E(18," Total: "),g()(),y(19,"td")(20,"b"),E(21),g()()()()()()),r&2&&(I(5),Wg("",s.expense.paidBy==null?null:s.expense.paidBy.name," paid $",s.expense.amountPaid," for ",s.expense.name,""),I(9),O("ngForOf",s.expense.credit),I(7),ge(" ",s.totalCredit," "))},dependencies:[Oe,ot,Un,jn],styles:[".modal-container[_ngcontent-%COMP%]{padding:1rem;width:30rem}button[_ngcontent-%COMP%]{margin:.25rem}@media (max-width: 575.98px){.modal-container[_ngcontent-%COMP%]{padding:1rem;width:18rem}}.flex-space-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]});let t=e;return t})();function tM(t,e){t&1&&(y(0,"p"),E(1,"No Data"),g())}function nM(t,e){if(t&1){let n=nt();y(0,"div",3)(1,"h2"),E(2),g(),me(3,"app-user-info",4),y(4,"div",5)(5,"button",6),W("click",function(){de(n);let r=j(2);return he(r.onAddExpenseModal())}),E(6,"Add Expense"),g(),y(7,"button",7),W("click",function(){de(n);let r=j(2);return he(r.onSettlePaymentModal())}),E(8,"Settle"),g()(),y(9,"app-expenses",8),W("onRowClick",function(r){de(n);let s=j(2);return he(s.openExpenseDetailsModal(r))})("onEditExpense",function(r){de(n);let s=j(2);return he(s.onEditExpenseButtonClick(r))})("onDeleteExpense",function(r){de(n);let s=j(2);return he(s.deleteExpense(r))}),g(),$(10,tM,2,0,"ng-template",null,9,un),g()}if(t&2){let n=j(2);I(2),st(n.currentProjectState==null?null:n.currentProjectState.projectName),I(),O("project",n.currentProjectState),I(4),O("disabled",(n.currentProjectState==null||n.currentProjectState.expenses==null?null:n.currentProjectState.expenses.length)==0),I(2),O("data",n.currentProjectState.expenses)}}function iM(t,e){if(t&1&&(Ye(0),$(1,nM,12,4,"div",2),Qe()),t&2){let n=j();I(),O("ngIf",(n.currentProjectState==null||n.currentProjectState.users==null?null:n.currentProjectState.users.length)>0)}}function rM(t,e){t&1&&E(0,` Loading...
`)}var lb=(()=>{let e=class e{constructor(i){this.projectFirebaseService=i,this.dialog=b(Ec),this.store=b(vt),this.router=b(mt),this.route=b($t),this.isLoading=!1,this.isModal=!0,this.userData=[],this.currentProjectState={users:[],expenses:[]},this.previousProjectState={users:[],expenses:[]},this.projectFireBaseId="",this.transactionTypes=[{id:yu,name:"Split equally"}]}ngOnInit(){this.route.paramMap.subscribe(i=>{let r=i.params.id;this.projectFireBaseId=r,this.initializeProjectDetailData(r)}),this.store.select(sb).subscribe(i=>{this.currentProjectState=i}),this.store.select(ob).subscribe(i=>{this.previousProjectState=i})}initializeProjectDetailData(i){this.isLoading=!0,this.projectFirebaseService.getProjectById(i).then(r=>{let s=r.data();this.store.dispatch(ua({payload:r.data()})),this.store.dispatch(da()),s.users?.length>2?this.transactionTypes.push({id:wu,name:"Owed full amount"}):this.transactionTypes.push({id:vu,name:"Owed full amount"})}).finally(()=>{this.isLoading=!1})}_initializeExpense(i){let r=this.currentProjectState.users.find(o=>o.id==i.userId),s={id:new Date().getMilliseconds()+"",paidBy:r,dateCreated:new Date,dateUpdated:new Date,amountPaid:i.amountPaid,name:i.name,transactionType:i.transactionType};switch(s.transactionType){case yu:{this.initFirebaseProcess(()=>{this.store.dispatch(Zr({payload:s}))});break}case vu:{this.initFirebaseProcess(()=>{this.store.dispatch(Jr({payload:s}))});break}case wu:{this.initFirebaseProcess(()=>{s.credit=this.bindCreditMapToCreditObject(s,i.credit),this.store.dispatch(Iu({payload:s}))});break}case Eu:{let o=m({},s),a=this.currentProjectState.users.find(c=>c.id==i.settlementTo);o.settlementTo=i.settlementTo,o.name=this.getSettlementExpenseName(a),this.initFirebaseProcess(()=>{this.store.dispatch(es({payload:o}))});break}}}bindCreditMapToCreditObject(i,r=[]){let s=i?.paidBy?.id,o=r.reduce((a,c)=>R(m({},a),{[c.id]:-Math.abs(+c.amount)}),{});return s&&(o[s]=+i.amountPaid),o}initFirebaseProcess(i){let r=m({},this.currentProjectState);i&&i(),this.projectFirebaseService.updateProject(this.projectFireBaseId,this.previousProjectState).then(s=>{console.log("Successfully saved"),this.store.dispatch(da())}).catch(s=>{this.store.dispatch(ua({payload:r})),alert("Service is currently unavailable")})}onEditExpenseButtonClick(i){let r=this.currentProjectState.expenses.find(s=>s.id==i);switch(r.transactionType){case wu:{this.openEditExpenseModal(r);break}case yu:{this.openEditExpenseModal(r);break}case vu:{this.openEditExpenseModal(r);break}case Eu:{this.openEditSettleModal(r);break}}}openExpenseDetailsModal(i){let r=Object.entries(i.credit).map(([o,a])=>{let c=this.currentProjectState.users.find(l=>l.id==o);return{id:c?.id,name:c.name,amount:Math.abs(a)}}).filter(o=>o.id!=i?.paidBy?.id);this.dialog.open(cb,{data:{expense:R(m({},i),{credit:r})}}).afterClosed().subscribe(o=>{})}onAddExpenseModal(){this.dialog.open(_u,{data:{users:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"ADD"}}).afterClosed().subscribe(r=>{r&&this._initializeExpense(r)})}openEditExpenseModal(i){i?this.dialog.open(_u,{data:{users:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"EDIT",expense:i}}).afterClosed().subscribe(s=>{if(s){let o=this.currentProjectState.users.find(c=>c.id==s.userId),a=R(m({},s),{id:i.id,paidBy:o,dateUpdated:new Date,amountPaid:+s.amountPaid,name:s.name,transactionType:s.transactionType});this.initFirebaseProcess(()=>{this.store.dispatch(ji({payload:a}))})}}):console.error("User not found!")}openEditSettleModal(i){if(i){let r=m({},this.currentProjectState);r=R(m({},r),{expenses:r.expenses.filter(o=>o.id!=i.id)}),ns(r),this.dialog.open(ug,{data:{currentUsersState:m({},this.currentProjectState).users,previousUsersState:r.users,expense:i,mode:"EDIT"}}).afterClosed().subscribe(o=>{if(o){let a=this.currentProjectState.users.find(u=>u.id==o.userId),c=this.currentProjectState.users.find(u=>u.id==o.settlementTo),l=R(m({},o),{id:i.id,paidBy:a,dateUpdated:new Date,settlementTo:o.settlementTo,amountPaid:+o.amountPaid,transactionType:i.transactionType,name:this.getSettlementExpenseName(c)});this.initFirebaseProcess(()=>{this.store.dispatch(ji({payload:l}))})}})}else console.error("User not found!")}onSettlePaymentModal(){this.dialog.open(ug,{data:{previousUsersState:this.currentProjectState.users,currentUsersState:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"ADD"}}).afterClosed().subscribe(r=>{r&&(r.transactionType=Eu,this._initializeExpense(r))})}getSettlementExpenseName(i){return`Settle payment to user ${i?.name}`}deleteExpense(i){this.dialog.open(_u,{data:{users:this.currentProjectState.users,transactionTypes:this.transactionTypes,mode:"DELETE"}}).afterClosed().subscribe(s=>{s&&this.initFirebaseProcess(()=>{this.store.dispatch(ts({payload:i}))})})}};e.\u0275fac=function(r){return new(r||e)(T(Yr))},e.\u0275cmp=re({type:e,selectors:[["project-detail"]],standalone:!0,features:[oe],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["class","project-detail-container",4,"ngIf"],[1,"project-detail-container"],[3,"project"],[1,"button-container","my-1"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"],[3,"data","onRowClick","onEditExpense","onDeleteExpense"],["noData",""]],template:function(r,s){if(r&1&&$(0,iM,2,1,"ng-container",0)(1,rM,1,0,"ng-template",null,1,un),r&2){let o=xn(2);O("ngIf",!s.isLoading)("ngIfElse",o)}},dependencies:[nb,rb,Oe,at],styles:[".flex[_ngcontent-%COMP%]{display:flex}.button-container[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;justify-content:flex-end}button[_ngcontent-%COMP%]{margin:.25rem}"]});let t=e;return t})();var ub=[{path:"",component:tb},{path:"project/:id",component:lb}];var sM="@",oM=(()=>{let e=class e{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=b(Bg,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-CX2W7IWP.js")).catch(r=>{throw new ce(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new pg(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);o.use(c)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){ga()},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),pg=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(sM)}};function db(t="animations"){return $g("NgAsyncAnimations"),cn([{provide:ya,useFactory:(e,n,i)=>new oM(e,n,i,t),deps:[Y,Da,q]},{provide:si,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var aM={project:{users:[],expenses:[]},previousProjectState:{users:[],expenses:[]}},hb=eb(aM,Tn(ua,(t,e)=>R(m({},t),{previousProjectState:m({},e.payload)})),Tn(Jr,(t,e)=>{let n=dg(t.previousProjectState.users,e.payload),i=Tu(t,e,n);return R(m({},t),{previousProjectState:i})}),Tn(Zr,(t,e)=>{let n=hg(t.previousProjectState.users,e.payload),i=Tu(t,e,n);return R(m({},t),{previousProjectState:i})}),Tn(es,(t,e)=>{let n=fg(t.previousProjectState.users,e.payload),i=Tu(t,e,n);return R(m({},t),{previousProjectState:i})}),Tn(Iu,(t,e)=>{let n=e.payload.credit,i=Tu(t,e,n);return R(m({},t),{previousProjectState:i})}),Tn(ts,(t,e)=>{let n=e.payload,i=R(m({},t.previousProjectState),{users:t.previousProjectState.users,expenses:t.previousProjectState.expenses.filter(r=>r.id!=n)});return ns(i),R(m({},t),{previousProjectState:i})}),Tn(ji,(t,e)=>{let n=cM(e.payload,t.previousProjectState);return ns(n),R(m({},t),{previousProjectState:n})}),Tn(da,t=>R(m({},t),{project:m({},t.previousProjectState)}))),Tu=(t,e,n)=>{let i=R(m({},t.previousProjectState),{users:t.previousProjectState.users,expenses:[R(m({},e.payload),{credit:n}),...t.previousProjectState.expenses]});return ns(i),i},cM=(t,e)=>{t=R(m({},t),{credit:ab(e.users,t)});let n=e.expenses.find(s=>s.id==t.id),i=e.expenses.findIndex(s=>s.id===t.id);t=m(m({},n),t);let r=[...e.expenses];return r[i]=t,R(m({},e),{expenses:r})};var lM={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Cu="__@ngrx/effects_create__";function fb(t,e={}){let n=e.functional?t:t(),i=m(m({},lM),e);return Object.defineProperty(n,Cu,{value:i}),n}function uM(t){return Object.getOwnPropertyNames(t).filter(i=>t[i]&&t[i].hasOwnProperty(Cu)?t[i][Cu].hasOwnProperty("dispatch"):!1).map(i=>{let r=t[i][Cu];return m({propertyName:i},r)})}function dM(t){return uM(t)}function pb(t){return Object.getPrototypeOf(t)}function hM(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function mb(t){return typeof t=="function"}function fM(t){return t.filter(mb)}function pM(t,e,n){let i=pb(t),s=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,o=dM(t).map(({propertyName:a,dispatch:c,useEffectsErrorHandler:l})=>{let u=typeof t[a]=="function"?t[a]():t[a],d=l?n(u,e):u;return c===!1?d.pipe(wg()):d.pipe(Sg()).pipe(H(f=>({effect:t[a],notification:f,propertyName:a,sourceName:s,sourceInstance:t})))});return ni(...o)}var mM=10;function gb(t,e,n=mM){return t.pipe(Sn(i=>(e&&e.handleError(i),n<=1?t:gb(t,e,n-1))))}var _b=(()=>{let e=class e extends dt{constructor(i){super(),i&&(this.source=i)}lift(i){let r=new e;return r.source=this,r.operator=i,r}};e.\u0275fac=function(r){return new(r||e)(_(la))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yb(...t){return ye(e=>t.some(n=>typeof n=="string"?n===e.type:n.type===e.type))}var V$=new C("@ngrx/effects Internal Root Guard"),L$=new C("@ngrx/effects User Provided Effects"),U$=new C("@ngrx/effects Internal Root Effects"),j$=new C("@ngrx/effects Internal Root Effects Instances"),B$=new C("@ngrx/effects Internal Feature Effects"),$$=new C("@ngrx/effects Internal Feature Effects Instance Groups"),gM=new C("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>gb}),_M="@ngrx/effects/init",yM=Vt(_M);function vM(t,e){if(t.notification.kind==="N"){let n=t.notification.value;!EM(n)&&e.handleError(new Error(`Effect ${wM(t)} dispatched an invalid action: ${IM(n)}`))}}function EM(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function wM({propertyName:t,sourceInstance:e,sourceName:n}){let i=typeof e[t]=="function";return!!n?`"${n}.${String(t)}${i?"()":""}"`:`"${String(t)}()"`}function IM(t){try{return JSON.stringify(t)}catch{return t}}var bM="ngrxOnIdentifyEffects";function TM(t){return mg(t,bM)}var CM="ngrxOnRunEffects";function SM(t){return mg(t,CM)}var AM="ngrxOnInitEffects";function RM(t){return mg(t,AM)}function mg(t,e){return t&&e in t&&typeof t[e]=="function"}var vb=(()=>{let e=class e extends X{constructor(i,r){super(),this.errorHandler=i,this.effectsErrorHandler=r}addEffects(i){this.next(i)}toActions(){return this.pipe(Mu(i=>hM(i)?pb(i):i),We(i=>i.pipe(Mu(DM))),We(i=>{let r=i.pipe(Tg(o=>PM(this.errorHandler,this.effectsErrorHandler)(o)),H(o=>(vM(o,this.errorHandler),o.notification)),ye(o=>o.kind==="N"&&o.value!=null),bg()),s=i.pipe(Ke(1),ye(RM),H(o=>o.ngrxOnInitEffects()));return ni(r,s)}))}};e.\u0275fac=function(r){return new(r||e)(_(us),_(gM))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DM(t){return TM(t)?t.ngrxOnIdentifyEffects():""}function PM(t,e){return n=>{let i=pM(n,t,e);return SM(n)?n.ngrxOnRunEffects(i):i}}var xM=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(i,r){this.effectSources=i,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(_(vb),_(vt))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Eb(...t){let e=t.flat(),n=fM(e);return cn([n,{provide:zi,multi:!0,useValue:()=>{b(pu),b(H0,{optional:!0});let i=b(xM),r=b(vb),s=!i.isStarted;s&&i.start();for(let o of e){let a=mb(o)?b(o):o;r.addEffects(a)}s&&b(vt).dispatch(yM())}}])}var wb=(()=>{let e=class e{constructor(i,r,s){this.actions$=i,this.projectFirebaseService=r,this.store=s,this.log=fb(()=>this.actions$.pipe(yb(Jr,Zr,es,ts,ji),ve(o=>{console.log("Action",o)})),{dispatch:!1})}};e.\u0275fac=function(r){return new(r||e)(_(_b),_(Yr),_(vt))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();var kM={apiKey:"AIzaSyDtzDGTgBgvdbj2IZPjjlTHlw--ihn4E4I",authDomain:"splitbillapp-c8f1f.firebaseapp.com",projectId:"splitbillapp-c8f1f",storageBucket:"splitbillapp-c8f1f.appspot.com",messagingSenderId:"842401796749",appId:"1:842401796749:web:f8522a221179940bc708c4",measurementId:"G-FWZW3K5H3C"},Ib={providers:[ry(ub),db(),J0({expense:hb}),Eb([wb]),Fg([b0(()=>A0()),Gv(()=>Hv(kM))])]};var NM=()=>["/"],bb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=re({type:e,selectors:[["app-header"]],standalone:!0,features:[oe],decls:5,vars:2,consts:[[1,"container"],[1,"flex-center"],[1,"logo","display-1",3,"routerLink"]],template:function(r,s){r&1&&(y(0,"div",0)(1,"div",1)(2,"span",2),E(3,"SplitBill"),g()(),me(4,"hr"),g()),r&2&&(I(2),O("routerLink",Kg(1,NM)))},dependencies:[Ya,ny],styles:[".container[_ngcontent-%COMP%]{padding:1rem}.flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});let t=e;return t})();var Tb=(()=>{let e=class e{constructor(){this.title="Split Bill App"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=re({type:e,selectors:[["app-root"]],standalone:!0,features:[oe],decls:3,vars:0,consts:[[1,"container"]],template:function(r,s){r&1&&(me(0,"app-header"),y(1,"div",0),me(2,"router-outlet"),g())},dependencies:[bb,Od,Oe,Ya],styles:[".container[_ngcontent-%COMP%]{padding:1rem}"]});let t=e;return t})();m_(Tb,Ib).catch(t=>console.error(t));
